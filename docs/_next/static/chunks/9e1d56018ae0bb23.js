(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89854,(e,t,n)=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},67928,(e,t,n)=>{let i,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];n.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},n.getSymbolTotalCodewords=function(e){return r[e]},n.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},n.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');i=e},n.isKanjiModeEnabled=function(){return void 0!==i},n.toSJIS=function(e){return i(e)}},50715,(e,t,n)=>{n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2},n.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},n.from=function(e,t){if(n.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw Error("Unknown EC Level: "+e)}}catch(e){return t}}},83703,(e,t,n)=>{function i(){this.buffer=[],this.length=0}i.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=i},49307,(e,t,n)=>{function i(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}i.prototype.set=function(e,t,n,i){let r=e*this.size+t;this.data[r]=n,i&&(this.reservedBit[r]=!0)},i.prototype.get=function(e,t){return this.data[e*this.size+t]},i.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},i.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=i},88487,(e,t,n)=>{let i=e.r(67928).getSymbolSize;n.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,n=i(e),r=145===n?26:2*Math.ceil((n-13)/(2*t-2)),a=[n-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-r;return a.push(6),a.reverse()},n.getPositions=function(e){let t=[],i=n.getRowColCoords(e),r=i.length;for(let e=0;e<r;e++)for(let n=0;n<r;n++)(0!==e||0!==n)&&(0!==e||n!==r-1)&&(e!==r-1||0!==n)&&t.push([i[e],i[n]]);return t}},19315,(e,t,n)=>{let i=e.r(67928).getSymbolSize;n.getPositions=function(e){let t=i(e);return[[0,0],[t-7,0],[0,t-7]]}},500,(e,t,n)=>{n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let i={N1:3,N2:3,N3:40,N4:10};n.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},n.from=function(e){return n.isValid(e)?parseInt(e,10):void 0},n.getPenaltyN1=function(e){let t=e.size,n=0,r=0,a=0,s=null,o=null;for(let l=0;l<t;l++){r=a=0,s=o=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===s?r++:(r>=5&&(n+=i.N1+(r-5)),s=t,r=1),(t=e.get(c,l))===o?a++:(a>=5&&(n+=i.N1+(a-5)),o=t,a=1)}r>=5&&(n+=i.N1+(r-5)),a>=5&&(n+=i.N1+(a-5))}return n},n.getPenaltyN2=function(e){let t=e.size,n=0;for(let i=0;i<t-1;i++)for(let r=0;r<t-1;r++){let t=e.get(i,r)+e.get(i,r+1)+e.get(i+1,r)+e.get(i+1,r+1);(4===t||0===t)&&n++}return n*i.N2},n.getPenaltyN3=function(e){let t=e.size,n=0,r=0,a=0;for(let i=0;i<t;i++){r=a=0;for(let s=0;s<t;s++)r=r<<1&2047|e.get(i,s),s>=10&&(1488===r||93===r)&&n++,a=a<<1&2047|e.get(s,i),s>=10&&(1488===a||93===a)&&n++}return n*i.N3},n.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let i=0;i<n;i++)t+=e.data[i];return Math.abs(Math.ceil(100*t/n/5)-10)*i.N4},n.applyMask=function(e,t){let i=t.size;for(let r=0;r<i;r++)for(let a=0;a<i;a++)t.isReserved(a,r)||t.xor(a,r,function(e,t,i){switch(e){case n.Patterns.PATTERN000:return(t+i)%2==0;case n.Patterns.PATTERN001:return t%2==0;case n.Patterns.PATTERN010:return i%3==0;case n.Patterns.PATTERN011:return(t+i)%3==0;case n.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(i/3))%2==0;case n.Patterns.PATTERN101:return t*i%2+t*i%3==0;case n.Patterns.PATTERN110:return(t*i%2+t*i%3)%2==0;case n.Patterns.PATTERN111:return(t*i%3+(t+i)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,a,r))},n.getBestMask=function(e,t){let i=Object.keys(n.Patterns).length,r=0,a=1/0;for(let s=0;s<i;s++){t(s),n.applyMask(s,e);let i=n.getPenaltyN1(e)+n.getPenaltyN2(e)+n.getPenaltyN3(e)+n.getPenaltyN4(e);n.applyMask(s,e),i<a&&(a=i,r=s)}return r}},35188,(e,t,n)=>{let i=e.r(50715),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];n.getBlocksCount=function(e,t){switch(t){case i.L:return r[(e-1)*4+0];case i.M:return r[(e-1)*4+1];case i.Q:return r[(e-1)*4+2];case i.H:return r[(e-1)*4+3];default:return}},n.getTotalCodewordsCount=function(e,t){switch(t){case i.L:return a[(e-1)*4+0];case i.M:return a[(e-1)*4+1];case i.Q:return a[(e-1)*4+2];case i.H:return a[(e-1)*4+3];default:return}}},55341,(e,t,n)=>{let i=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)i[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)i[e]=i[e-255]}(),n.log=function(e){if(e<1)throw Error("log("+e+")");return r[e]},n.exp=function(e){return i[e]},n.mul=function(e,t){return 0===e||0===t?0:i[r[e]+r[t]]}},9256,(e,t,n)=>{let i=e.r(55341);n.mul=function(e,t){let n=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let a=0;a<t.length;a++)n[r+a]^=i.mul(e[r],t[a]);return n},n.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){let e=n[0];for(let r=0;r<t.length;r++)n[r]^=i.mul(t[r],e);let r=0;for(;r<n.length&&0===n[r];)r++;n=n.slice(r)}return n},n.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=n.mul(t,new Uint8Array([1,i.exp(r)]));return t}},72976,(e,t,n)=>{let i=e.r(9256);function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let n=i.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){let e=new Uint8Array(this.degree);return e.set(n,r),e}return n},t.exports=r},76045,(e,t,n)=>{n.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},59774,(e,t,n)=>{let i="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";n.KANJI=RegExp(r,"g"),n.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),n.BYTE=RegExp(a,"g"),n.NUMERIC=RegExp(i,"g"),n.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let s=RegExp("^"+r+"$"),o=RegExp("^"+i+"$"),l=RegExp("^[A-Z0-9 $%*+\\-./:]+$");n.testKanji=function(e){return s.test(e)},n.testNumeric=function(e){return o.test(e)},n.testAlphanumeric=function(e){return l.test(e)}},88023,(e,t,n)=>{let i=e.r(76045),r=e.r(59774);n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!i.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},n.getBestModeForData=function(e){return r.testNumeric(e)?n.NUMERIC:r.testAlphanumeric(e)?n.ALPHANUMERIC:r.testKanji(e)?n.KANJI:n.BYTE},n.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},n.isValid=function(e){return e&&e.bit&&e.ccBits},n.from=function(e,t){if(n.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw Error("Unknown mode: "+e)}}catch(e){return t}}},97527,(e,t,n)=>{let i=e.r(67928),r=e.r(35188),a=e.r(50715),s=e.r(88023),o=e.r(76045),l=i.getBCHDigit(7973);function c(e,t){return s.getCharCountIndicator(e,t)+4}n.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},n.getCapacity=function(e,t,n){if(!o.isValid(e))throw Error("Invalid QR Code version");void 0===n&&(n=s.BYTE);let a=(i.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t))*8;if(n===s.MIXED)return a;let l=a-c(n,e);switch(n){case s.NUMERIC:return Math.floor(l/10*3);case s.ALPHANUMERIC:return Math.floor(l/11*2);case s.KANJI:return Math.floor(l/13);case s.BYTE:default:return Math.floor(l/8)}},n.getBestVersionForData=function(e,t){let i,r=a.from(t,a.M);if(Array.isArray(e)){if(e.length>1){for(let t=1;t<=40;t++)if(function(e,t){let n=0;return e.forEach(function(e){let i=c(e.mode,t);n+=i+e.getBitsLength()}),n}(e,t)<=n.getCapacity(t,r,s.MIXED))return t;return}if(0===e.length)return 1;i=e[0]}else i=e;return function(e,t,i){for(let r=1;r<=40;r++)if(t<=n.getCapacity(r,i,e))return r}(i.mode,i.getLength(),r)},n.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;i.getBCHDigit(t)-l>=0;)t^=7973<<i.getBCHDigit(t)-l;return e<<12|t}},13693,(e,t,n)=>{let i=e.r(67928),r=i.getBCHDigit(1335);n.getEncodedBits=function(e,t){let n=e.bit<<3|t,a=n<<10;for(;i.getBCHDigit(a)-r>=0;)a^=1335<<i.getBCHDigit(a)-r;return(n<<10|a)^21522}},69092,(e,t,n)=>{let i=e.r(88023);function r(e){this.mode=i.NUMERIC,this.data=e.toString()}r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t,n;for(t=0;t+3<=this.data.length;t+=3)n=parseInt(this.data.substr(t,3),10),e.put(n,10);let i=this.data.length-t;i>0&&(n=parseInt(this.data.substr(t),10),e.put(n,3*i+1))},t.exports=r},69579,(e,t,n)=>{let i=e.r(88023),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=i.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*r.indexOf(this.data[t]);n+=r.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},t.exports=a},48541,(e,t,n)=>{let i=e.r(88023);function r(e){this.mode=i.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}r.getBitsLength=function(e){return 8*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},t.exports=r},99490,(e,t,n)=>{let i=e.r(88023),r=e.r(67928);function a(e){this.mode=i.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=r.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n=(n>>>8&255)*192+(255&n),e.put(n,13)}},t.exports=a},28488,(e,t,n)=>{"use strict";var i={single_source_shortest_paths:function(e,t,n){var r,a,s,o,l,c,d,u={},h={};h[t]=0;var p=i.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(s in a=(r=p.pop()).value,o=r.cost,l=e[a]||{})l.hasOwnProperty(s)&&(c=o+l[s],d=h[s],(void 0===h[s]||d>c)&&(h[s]=c,p.push(s,c),u[s]=a));if(void 0!==n&&void 0===h[n])throw Error("Could not find a path from "+t+" to "+n+".");return u},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],i=t;i;)n.push(i),e[i],i=e[i];return n.reverse(),n},find_path:function(e,t,n){var r=i.single_source_shortest_paths(e,t,n);return i.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t,n=i.PriorityQueue,r={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=i},96540,(e,t,n)=>{let i=e.r(88023),r=e.r(69092),a=e.r(69579),s=e.r(48541),o=e.r(99490),l=e.r(59774),c=e.r(67928),d=e.r(28488);function u(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){let i,r=[];for(;null!==(i=e.exec(n));)r.push({data:i[0],index:i.index,mode:t,length:i[0].length});return r}function p(e){let t,n,r=h(l.NUMERIC,i.NUMERIC,e),a=h(l.ALPHANUMERIC,i.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=h(l.BYTE,i.BYTE,e),n=h(l.KANJI,i.KANJI,e)):(t=h(l.BYTE_KANJI,i.BYTE,e),n=[]),r.concat(a,t,n).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function f(e,t){switch(t){case i.NUMERIC:return r.getBitsLength(e);case i.ALPHANUMERIC:return a.getBitsLength(e);case i.KANJI:return o.getBitsLength(e);case i.BYTE:return s.getBitsLength(e)}}function m(e,t){let n,l=i.getBestModeForData(e);if((n=i.from(t,l))!==i.BYTE&&n.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+i.toString(n)+".\n Suggested mode is: "+i.toString(l));switch(n===i.KANJI&&!c.isKanjiModeEnabled()&&(n=i.BYTE),n){case i.NUMERIC:return new r(e);case i.ALPHANUMERIC:return new a(e);case i.KANJI:return new o(e);case i.BYTE:return new s(e)}}n.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},n.fromString=function(e,t){let r=function(e,t){let n={},r={start:{}},a=["start"];for(let s=0;s<e.length;s++){let o=e[s],l=[];for(let e=0;e<o.length;e++){let c=o[e],d=""+s+e;l.push(d),n[d]={node:c,lastCount:0},r[d]={};for(let e=0;e<a.length;e++){let s=a[e];n[s]&&n[s].node.mode===c.mode?(r[s][d]=f(n[s].lastCount+c.length,c.mode)-f(n[s].lastCount,c.mode),n[s].lastCount+=c.length):(n[s]&&(n[s].lastCount=c.length),r[s][d]=f(c.length,c.mode)+4+i.getCharCountIndicator(c.mode,t))}}a=l}for(let e=0;e<a.length;e++)r[a[e]].end=0;return{map:r,table:n}}(function(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];switch(r.mode){case i.NUMERIC:t.push([r,{data:r.data,mode:i.ALPHANUMERIC,length:r.length},{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.ALPHANUMERIC:t.push([r,{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.KANJI:t.push([r,{data:r.data,mode:i.BYTE,length:u(r.data)}]);break;case i.BYTE:t.push([{data:r.data,mode:i.BYTE,length:u(r.data)}])}}return t}(p(e,c.isKanjiModeEnabled())),t),a=d.find_path(r.map,"start","end"),s=[];for(let e=1;e<a.length-1;e++)s.push(r.table[a[e]].node);return n.fromArray(s.reduce(function(e,t){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},n.rawSplit=function(e){return n.fromArray(p(e,c.isKanjiModeEnabled()))}},4054,(e,t,n)=>{let i=e.r(67928),r=e.r(50715),a=e.r(83703),s=e.r(49307),o=e.r(88487),l=e.r(19315),c=e.r(500),d=e.r(35188),u=e.r(72976),h=e.r(97527),p=e.r(13693),f=e.r(88023),m=e.r(96540);function g(e,t,n){let i,r,a=e.size,s=p.getEncodedBits(t,n);for(i=0;i<15;i++)r=(s>>i&1)==1,i<6?e.set(i,8,r,!0):i<8?e.set(i+1,8,r,!0):e.set(a-15+i,8,r,!0),i<8?e.set(8,a-i-1,r,!0):i<9?e.set(8,15-i-1+1,r,!0):e.set(8,15-i-1,r,!0);e.set(a-8,8,1,!0)}n.create=function(e,t){let n,p;if(void 0===e||""===e)throw Error("No input text");let y=r.M;return void 0!==t&&(y=r.from(t.errorCorrectionLevel,r.M),n=h.from(t.version),p=c.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),function(e,t,n,r){let p;if(Array.isArray(e))p=m.fromArray(e);else if("string"==typeof e){let i=t;if(!i){let t=m.rawSplit(e);i=h.getBestVersionForData(t,n)}p=m.fromString(e,i||40)}else throw Error("Invalid data");let y=h.getBestVersionForData(p,n);if(!y)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<y)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else t=y;let v=function(e,t,n){let r=new a;n.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(r)});let s=(i.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t))*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);let o=(s-r.getLengthInBits())/8;for(let e=0;e<o;e++)r.put(e%2?17:236,8);return function(e,t,n){let r,a,s=i.getSymbolTotalCodewords(t),o=s-d.getTotalCodewordsCount(t,n),l=d.getBlocksCount(t,n),c=s%l,h=l-c,p=Math.floor(s/l),f=Math.floor(o/l),m=f+1,g=p-f,y=new u(g),v=0,b=Array(l),x=Array(l),w=0,_=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<h?f:m;b[e]=_.slice(v,v+t),x[e]=y.encode(b[e]),v+=t,w=Math.max(w,t)}let k=new Uint8Array(s),S=0;for(r=0;r<w;r++)for(a=0;a<l;a++)r<b[a].length&&(k[S++]=b[a][r]);for(r=0;r<g;r++)for(a=0;a<l;a++)k[S++]=x[a][r];return k}(r,e,t)}(t,n,p),b=new s(i.getSymbolSize(t));!function(e,t){let n=e.size,i=l.getPositions(t);for(let t=0;t<i.length;t++){let r=i[t][0],a=i[t][1];for(let t=-1;t<=7;t++)if(!(r+t<=-1)&&!(n<=r+t))for(let i=-1;i<=7;i++)a+i<=-1||n<=a+i||(t>=0&&t<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===t||6===t)||t>=2&&t<=4&&i>=2&&i<=4?e.set(r+t,a+i,!0,!0):e.set(r+t,a+i,!1,!0))}}(b,t);let x=b.size;for(let e=8;e<x-8;e++){let t=e%2==0;b.set(e,6,t,!0),b.set(6,e,t,!0)}return!function(e,t){let n=o.getPositions(t);for(let t=0;t<n.length;t++){let i=n[t][0],r=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(i+t,r+n,!0,!0):e.set(i+t,r+n,!1,!0)}}(b,t),g(b,n,0),t>=7&&function(e,t){let n,i,r,a=e.size,s=h.getEncodedBits(t);for(let t=0;t<18;t++)n=Math.floor(t/3),i=t%3+a-8-3,r=(s>>t&1)==1,e.set(n,i,r,!0),e.set(i,n,r,!0)}(b,t),!function(e,t){let n=e.size,i=-1,r=n-1,a=7,s=0;for(let o=n-1;o>0;o-=2)for(6===o&&o--;;){for(let n=0;n<2;n++)if(!e.isReserved(r,o-n)){let i=!1;s<t.length&&(i=(t[s]>>>a&1)==1),e.set(r,o-n,i),-1==--a&&(s++,a=7)}if((r+=i)<0||n<=r){r-=i,i=-i;break}}}(b,v),isNaN(r)&&(r=c.getBestMask(b,g.bind(null,b,n))),c.applyMask(r,b),g(b,n,r),{modules:b,version:t,errorCorrectionLevel:n,maskPattern:r,segments:p}}(e,n,y,p)}},67683,(e,t,n)=>{function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}n.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:n,scale:n?4:r,margin:t,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},n.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},n.getImageWidth=function(e,t){let i=n.getScale(e,t);return Math.floor((e+2*t.margin)*i)},n.qrToImageData=function(e,t,i){let r=t.modules.size,a=t.modules.data,s=n.getScale(r,i),o=Math.floor((r+2*i.margin)*s),l=i.margin*s,c=[i.color.light,i.color.dark];for(let t=0;t<o;t++)for(let n=0;n<o;n++){let d=(t*o+n)*4,u=i.color.light;t>=l&&n>=l&&t<o-l&&n<o-l&&(u=c[+!!a[Math.floor((t-l)/s)*r+Math.floor((n-l)/s)]]),e[d++]=u.r,e[d++]=u.g,e[d++]=u.b,e[d]=u.a}}},22556,(e,t,n)=>{let i=e.r(67683);n.render=function(e,t,n){var r;let a=n,s=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(s=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),a=i.getOptions(a);let o=i.getImageWidth(e.modules.size,a),l=s.getContext("2d"),c=l.createImageData(o,o);return i.qrToImageData(c.data,e,a),r=s,l.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=o,r.width=o,r.style.height=o+"px",r.style.width=o+"px",l.putImageData(c,0,0),s},n.renderToDataURL=function(e,t,i){let r=i;void 0!==r||t&&t.getContext||(r=t,t=void 0),r||(r={});let a=n.render(e,t,r),s=r.type||"image/png",o=r.rendererOpts||{};return a.toDataURL(s,o.quality)}},69801,(e,t,n)=>{let i=e.r(67683);function r(e,t){let n=e.a/255,i=t+'="'+e.hex+'"';return n<1?i+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function a(e,t,n){let i=e+t;return void 0!==n&&(i+=" "+n),i}n.render=function(e,t,n){let s=i.getOptions(t),o=e.modules.size,l=e.modules.data,c=o+2*s.margin,d=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+r(s.color.dark,"stroke")+' d="'+function(e,t,n){let i="",r=0,s=!1,o=0;for(let l=0;l<e.length;l++){let c=Math.floor(l%t),d=Math.floor(l/t);c||s||(s=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(i+=s?a("M",c+n,.5+d+n):a("m",r,0),r=0,s=!1),c+1<t&&e[l+1]||(i+=a("h",o),o=0)):r++}return i}(l,o,s.margin)+'"/>',h='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+('viewBox="0 0 '+c+" ")+c+'" shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof n&&n(null,h),h}},11797,(e,t,n)=>{let i=e.r(89854),r=e.r(4054),a=e.r(22556),s=e.r(69801);function o(e,t,n,a,s){let o=[].slice.call(arguments,1),l=o.length,c="function"==typeof o[l-1];if(!c&&!i())throw Error("Callback required as last argument");if(c){if(l<2)throw Error("Too few arguments provided");2===l?(s=n,n=t,t=a=void 0):3===l&&(t.getContext&&void 0===s?(s=a,a=void 0):(s=a,a=n,n=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(n=t,t=a=void 0):2!==l||t.getContext||(a=n,n=t,t=void 0),new Promise(function(i,s){try{let s=r.create(n,a);i(e(s,t,a))}catch(e){s(e)}})}try{let i=r.create(n,a);s(null,e(i,t,a))}catch(e){s(e)}}n.create=r.create,n.toCanvas=o.bind(null,a.render),n.toDataURL=o.bind(null,a.renderToDataURL),n.toString=o.bind(null,function(e,t,n){return s.render(e,n)})},3115,e=>{"use strict";let t,n,i,r,a,s,o;e.s(["default",()=>rH],3115);var l,c=e.i(91398),d=e.i(91788),u=e.i(51575),h=e.i(51196),p=e.i(75732),f=e.i(60499);let m=(0,f.defineChain)({id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}});var g=e.i(24076),y=e.i(98938),v=e.i(82690),b=e.i(87255);let x={block:(0,y.defineBlock)({format(e){var t;return{transactions:null==(t=e.transactions)?void 0:t.map(e=>{if("string"==typeof e)return e;let t=(0,v.formatTransaction)(e);return"0x7e"===t.typeHex&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?(0,g.hexToBigInt)(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}),stateRoot:e.stateRoot}}}),transaction:(0,v.defineTransaction)({format(e){let t={};return"0x7e"===e.type&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?(0,g.hexToBigInt)(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:(0,b.defineTransactionReceipt)({format:e=>({l1GasPrice:e.l1GasPrice?(0,g.hexToBigInt)(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?(0,g.hexToBigInt)(e.l1GasUsed):null,l1Fee:e.l1Fee?(0,g.hexToBigInt)(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null})})},w=(0,f.defineChain)({id:8453,network:"base",name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://base-mainnet.g.alchemy.com/v2"],webSocket:["wss://base-mainnet.g.alchemy.com/v2"]},infura:{http:["https://base-mainnet.infura.io/v3"],webSocket:["wss://base-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.base.org"]},public:{http:["https://mainnet.base.org"]}},blockExplorers:{blockscout:{name:"Basescout",url:"https://base.blockscout.com"},default:{name:"Basescan",url:"https://basescan.org"},etherscan:{name:"Basescan",url:"https://basescan.org"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022}}},{formatters:x});var _=e.i(8430),k=e.i(85134);function S(){let[e,t]=(0,d.useState)("");return(0,d.useEffect)(()=>{t(new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))},[]),(0,c.jsx)("span",{id:"currentDate",children:e})}function C(e){let{onSettingsClick:t,onSyncClick:n}=e,{address:i,isConnected:r}=(0,u.useAccount)(),{connectAsync:a}=(0,u.useConnect)(),{disconnect:s}=(0,u.useDisconnect)(),[o,l]=d.default.useState(null),h=async()=>{l(null);try{await a({connector:new _.InjectedConnector})}catch(e){if(function(e){var t;if(!e)return!1;let n=String(null!=(t=e.message)?t:String(null!=e?e:"")).toLowerCase();return!!(n.includes("user rejected")||n.includes("user rejected the request")||"string"==typeof e.name&&e.name.toLowerCase().includes("userrejected"))}(e))return void l("Connection request rejected by wallet. Please approve the connection in your wallet.");console.error("Connect failed",e),l(String((null==e?void 0:e.message)||String(e)))}};return(0,c.jsxs)("header",{children:[(0,c.jsx)("h1",{children:"ðŸ  Family Chores"}),(0,c.jsxs)("div",{className:"header-controls",children:[(0,c.jsx)("div",{className:"date-display",children:(0,c.jsx)(S,{})}),(0,c.jsx)("button",{id:"settingsBtn",className:"btn btn-primary",onClick:t,"data-tour":"settings-button",children:"âš™ï¸ Settings"}),(0,c.jsx)("button",{id:"syncBtn",className:"btn btn-secondary",onClick:n,children:"ðŸ“± Sync"}),(0,c.jsxs)("div",{style:{marginLeft:12},children:[r?(0,c.jsx)("button",{className:"btn btn-wallet",onClick:()=>s(),title:i||"",children:i?"".concat(String(i).slice(0,6),"...").concat(String(i).slice(-4)):"Wallet"}):(0,c.jsx)("button",{className:"btn btn-wallet",onClick:h,"data-tour":"wallet-button",children:"Connect Wallet"}),o&&(0,c.jsx)("div",{style:{color:"#c00",fontSize:"0.8rem",marginTop:4},children:o})]})]})]})}var E=e.i(30943),T=e.i(66402),j=e.i(43028),A=e.i(55474),N=e.i(55824);function I(t){let{open:n,onClose:i}=t,{state:r,dispatch:a}=(0,T.useChoresApp)(),[s,o]=(0,d.useState)(""),[l,u]=(0,d.useState)(""),[h,p]=(0,d.useState)(""),[f,m]=(0,d.useState)(""),[g,y]=(0,d.useState)("#FFB6C1"),[v,b]=(0,d.useState)(1),[x,w]=(0,d.useState)(.5),[_,k]=(0,d.useState)("daily"),[S,C]=(0,d.useState)([]),[I,O]=(0,d.useState)(""),[R,D]=(0,d.useState)(""),[P,M]=(0,d.useState)(""),[$,L]=(0,d.useState)(!1),[z,B]=(0,d.useState)(null),[F,U]=(0,d.useState)(!1),[H,q]=(0,d.useState)(""),[W,V]=(0,d.useState)(!1),[Z,Y]=(0,d.useState)(!1),[K,Q]=(0,d.useState)([]),J=(0,d.useRef)({}),[G,X]=(0,d.useState)({}),[ee,et]=(0,d.useState)(!1),[en,ei]=(0,d.useState)(),er=(0,d.useRef)(null),[ea,es]=(0,d.useState)(r.parentSettings.approvals);if((0,d.useEffect)(()=>(Y(!0),()=>Y(!1)),[]),(0,d.useEffect)(()=>{n&&es(r.parentSettings.approvals)},[n,r.parentSettings.approvals]),(0,d.useEffect)(()=>()=>{Object.values(J.current).forEach(e=>clearTimeout(e)),J.current={}},[]),!n||!Z)return null;let eo=e=>{Q(t=>t.filter(t=>t.id!==e)),J.current[e]&&(clearTimeout(J.current[e]),delete J.current[e])},el=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={id:"toast_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8)),message:e,type:t,dismissible:n.dismissible,durationMs:n.durationMs};if(Q(e=>[...e,i]),!n.dismissible){var r;let e=setTimeout(()=>eo(i.id),null!=(r=n.durationMs)?r:4e3);J.current[i.id]=e}},ec=e=>{X(t=>{if(!t[e])return t;let n={...t};return delete n[e],n})},ed=(e,t)=>{ei(e),er.current=t,et(!0)},eu=async()=>{let t=I.trim(),n=/^[0-9]{4,12}$/,i={},s=r.parentSettings.pins||[];if(t||(i.handle="Enter an approver handle"),n.test(R)||(i.pin="PIN must be 4-12 digits"),n.test(P)?n.test(R)&&R!==P&&(i.confirm="PINs must match"):i.confirm="Confirm PIN using 4-12 digits",Object.keys(i).length>0)return X(i),!1;X({});let o=async n=>{try{let{genSalt:i,hashPin:o}=await e.A(90504);for(let e of s)if(await o(R,e.salt)===e.pinHash)return X(e=>({...e,pin:"PIN already in use by another approver"})),!1;let l=await i(),c=await o(R,l),d=[...s.filter(e=>e.handle!==t),{handle:t,pinHash:c,salt:l}];return a({type:"UPDATE_PARENT_SETTINGS",payload:{pins:d},actorHandle:n}),O(""),D(""),M(""),X({}),el("Approver added","success"),z&&(a({type:"UPDATE_PARENT_SETTINGS",payload:{approvals:{...r.parentSettings.approvals,[z]:!0}},actorHandle:n}),B(null)),L(!1),!0}catch(e){return console.error("pin add error",e),ep("Failed to add approver"),!1}};return s.length>0?(ed("Enter an existing parent PIN to add another approver.",e=>{o(e)}),!1):o()},eh=(e,t)=>{es(n=>({...n,[e]:t}))},ep=e=>{q(e),U(!0)},ef=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"modal-overlay",onClick:i,children:[(0,c.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:"âš™ï¸ Settings"}),(0,c.jsx)("span",{className:"close",onClick:e=>{e.stopPropagation(),i()},children:"Ã—"})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h3",{children:"ðŸ”’ Parent Settings"}),(0,c.jsxs)("div",{className:"parent-settings",children:[(0,c.jsxs)("div",{className:"approval-settings",children:[(0,c.jsx)("h4",{children:"Require Parent Approval For:"}),(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"checkbox",checked:ea.taskMove,onChange:e=>eh("taskMove",e.target.checked)})," Moving tasks between children"]}),(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"checkbox",checked:ea.earlyComplete,onChange:e=>eh("earlyComplete",e.target.checked)})," Completing tasks early"]}),(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"checkbox",checked:ea.taskComplete,onChange:e=>eh("taskComplete",e.target.checked)})," Marking any task complete"]}),(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"checkbox",checked:ea.editTasks,onChange:e=>eh("editTasks",e.target.checked)})," Editing tasks and children"]})]}),(0,c.jsxs)("div",{className:"approver-list",style:{marginTop:12},children:[(0,c.jsx)("h4",{children:"Approvers"}),r.parentSettings.pins&&0!==r.parentSettings.pins.length?r.parentSettings.pins.map(e=>(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[(0,c.jsx)("div",{children:e.handle}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>{var t;return t=e.handle,void(confirm("Remove approver ".concat(t,"?"))&&ed("Enter a parent PIN to remove an approver.",e=>{a({type:"UPDATE_PARENT_SETTINGS",payload:{pins:(r.parentSettings.pins||[]).filter(e=>e.handle!==t)},actorHandle:e}),el("Approver removed","info")}))},children:"Remove"})})]},e.handle)):(0,c.jsx)("div",{className:"empty-state",children:"No approvers defined. Add one below."}),(0,c.jsxs)("div",{style:{marginTop:8},"data-tour":"approver-form",children:[(0,c.jsxs)("div",{style:{marginBottom:8},children:[(0,c.jsx)("input",{placeholder:"Handle (e.g. Dad)",value:I,onChange:e=>{O(e.target.value),ec("handle")},"data-tour":"approver-handle-input","aria-invalid":G.handle?"true":void 0,style:{width:"100%",marginBottom:8}}),G.handle&&(0,c.jsx)("div",{className:"input-error",children:G.handle})]}),(0,c.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"flex-start",flexWrap:"wrap"},children:[(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsx)("input",{placeholder:"PIN (4-12 digits)",type:"password",minLength:4,maxLength:12,value:R,onChange:e=>{D(e.target.value),ec("pin")},"data-tour":"approver-pin-input","aria-invalid":G.pin?"true":void 0,style:{width:"120px"}}),G.pin&&(0,c.jsx)("div",{className:"input-error",children:G.pin})]}),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsx)("input",{placeholder:"Confirm PIN",type:"password",minLength:4,maxLength:12,value:P,onChange:e=>{M(e.target.value),ec("confirm")},"data-tour":"approver-confirm-input","aria-invalid":G.confirm?"true":void 0,style:{width:"120px"}}),G.confirm&&(0,c.jsx)("div",{className:"input-error",children:G.confirm})]}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:eu,"data-tour":"add-approver-button",children:"Add Approver"})]})]})]})]}),$&&(0,c.jsx)("div",{className:"modal",style:{display:"block"},children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h3",{children:"Add Approver"}),(0,c.jsx)("span",{className:"close",onClick:()=>L(!1),children:"Ã—"})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsx)("div",{style:{marginBottom:8},children:"No approvers found â€” create the first approver to enable approval flows."}),(0,c.jsxs)("div",{style:{marginBottom:8},children:[(0,c.jsx)("input",{placeholder:"Handle (e.g. Parent)",value:I,onChange:e=>{O(e.target.value),ec("handle")},"aria-invalid":G.handle?"true":void 0,style:{width:"100%",marginBottom:8}}),G.handle&&(0,c.jsx)("div",{className:"input-error",children:G.handle})]}),(0,c.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"flex-start",flexWrap:"wrap"},children:[(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsx)("input",{placeholder:"PIN (4-12 digits)",type:"password",minLength:4,maxLength:12,value:R,onChange:e=>{D(e.target.value),ec("pin")},"aria-invalid":G.pin?"true":void 0,style:{width:"120px"}}),G.pin&&(0,c.jsx)("div",{className:"input-error",children:G.pin})]}),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,c.jsx)("input",{placeholder:"Confirm PIN",type:"password",minLength:4,maxLength:12,value:P,onChange:e=>{M(e.target.value),ec("confirm")},"aria-invalid":G.confirm?"true":void 0,style:{width:"120px"}}),G.confirm&&(0,c.jsx)("div",{className:"input-error",children:G.confirm})]})]})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{className:"btn btn-primary",onClick:async()=>{await eu()&&L(!1)},children:"Create Approver"}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:()=>L(!1),children:"Cancel"})]})]})})]}),(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h3",{children:"ðŸ‘¥ Children"}),(0,c.jsx)("div",{children:0===r.children.length?(0,c.jsx)("div",{className:"empty-state",children:"No children added yet. Add your first child below."}):(()=>{let e=r.parentSettings.childDisplayOrder||[],t=r.children.map(e=>e.id),n=[...e.filter(e=>t.includes(e)),...t.filter(t=>!e.includes(t))],i=n.map(e=>r.children.find(t=>t.id===e)).filter(e=>void 0!==e);return i.map((e,t)=>{let r=t>0,s=t<i.length-1;return(0,c.jsxs)("div",{className:"child-item",children:[(0,c.jsxs)("div",{className:"child-info",children:[(0,c.jsx)("span",{className:"child-name",children:e.name}),(0,c.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:e.blockchainAddress||(0,c.jsx)("em",{children:"No address"})})]}),(0,c.jsxs)("div",{className:"child-actions",style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,c.jsx)("button",{className:"btn btn-small",onClick:()=>{let t=[...n],i=t.indexOf(e.id);i>0&&([t[i-1],t[i]]=[t[i],t[i-1]],a({type:"UPDATE_PARENT_SETTINGS",payload:{childDisplayOrder:t}}))},disabled:!r,title:"Move up",style:{opacity:r?1:.5,cursor:r?"pointer":"not-allowed"},children:"â†‘"}),(0,c.jsx)("button",{className:"btn btn-small",onClick:()=>{let t=[...n],i=t.indexOf(e.id);i<t.length-1&&([t[i],t[i+1]]=[t[i+1],t[i]],a({type:"UPDATE_PARENT_SETTINGS",payload:{childDisplayOrder:t}}))},disabled:!s,title:"Move down",style:{opacity:s?1:.5,cursor:s?"pointer":"not-allowed"},children:"â†“"}),(0,c.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>{a({type:"DELETE_CHILD",payload:e.id})},children:"Delete"})]})]},e.id)})})()}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("input",{type:"text",placeholder:"Child name",value:s,onChange:e=>o(e.target.value)}),(0,c.jsx)("input",{type:"text",placeholder:"Blockchain address / ENS (optional)",value:l,onChange:e=>u(e.target.value),style:{marginLeft:8}}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!s.trim())return;let e=r.parentSettings.approvals.editTasks,t=r.parentSettings.pins||[];if(e)return 0===t.length?void ep("Adding children requires parent approval, but no approvers are defined. Please add an approver first."):void ed("Enter a parent PIN to add a child.",e=>{a({type:"ADD_CHILD",payload:{id:Date.now(),name:s.trim(),stars:0,money:0,blockchainAddress:l||void 0}}),o(""),u(""),el("Child added","success")});a({type:"ADD_CHILD",payload:{id:Date.now(),name:s.trim(),stars:0,money:0,blockchainAddress:l||void 0}}),o(""),u("")},children:"Add Child"})]})]}),(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h3",{children:"ðŸ“ Tasks"}),(0,c.jsx)("div",{children:r.tasks&&0!==r.tasks.length?r.tasks.filter(e=>"recurring"===e.type||e.recurring).map(e=>{var t,n;let i,r=(null==(t=e.recurring)?void 0:t.cadence)||"daily";if("custom-days"===r&&(null==(n=e.recurring)?void 0:n.customDays)&&e.recurring.customDays.length>0){let t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];i=e.recurring.customDays.map(e=>t[e]).join(", ")}else i="weekdays"===r?"Weekdays only":"weekends"===r?"Weekends only":"weekly"===r?"Weekly":"monthly"===r?"Monthly":"Daily";return(0,c.jsxs)("div",{className:"chore-item",children:[(0,c.jsxs)("div",{className:"chore-info",children:[(0,c.jsxs)("span",{children:[e.emoji||"ðŸ“"," ",e.title]}),(0,c.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["â­ ",e.stars||0," | ðŸ’° $",e.money||0," | ",i]})]}),(0,c.jsx)("div",{className:"chore-actions",children:(0,c.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>{a({type:"DELETE_TASK",payload:e.id})},children:"Delete"})})]},e.id)}):(0,c.jsx)("div",{className:"empty-state",children:"No tasks created yet. Add your first task below."})}),(0,c.jsxs)("div",{className:"add-chore-form",children:[(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("input",{type:"text",placeholder:"Chore name",value:h,onChange:e=>p(e.target.value)}),(0,c.jsx)("input",{type:"text",placeholder:"Emoji",maxLength:2,value:f,onChange:e=>m(e.target.value)}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,c.jsx)("span",{children:"Color:"}),(0,c.jsx)("input",{type:"color",value:g,onChange:e=>y(e.target.value),"aria-label":"Task color"})]})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,c.jsx)("span",{children:"Star Reward:"}),(0,c.jsx)("input",{type:"number",placeholder:"Stars",min:1,max:5,value:v,onChange:e=>b(Number(e.target.value)),"aria-label":"Star reward"})]}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,c.jsx)("span",{children:"Money Reward:"}),(0,c.jsx)("input",{type:"number",placeholder:"Money ($)",min:0,step:.25,value:x,onChange:e=>w(Number(e.target.value)),"aria-label":"Money reward"})]})]}),(0,c.jsxs)("div",{className:"recurrence-group",children:[(0,c.jsx)("label",{htmlFor:"choreRecurrence",children:"Repeat:"}),(0,c.jsxs)("select",{id:"choreRecurrence",value:_,onChange:e=>k(e.target.value),children:[(0,c.jsx)("option",{value:"daily",children:"Daily"}),(0,c.jsx)("option",{value:"weekly",children:"Weekly"}),(0,c.jsx)("option",{value:"monthly",children:"Monthly"}),(0,c.jsx)("option",{value:"weekdays",children:"Weekdays Only"}),(0,c.jsx)("option",{value:"weekends",children:"Weekends Only"}),(0,c.jsx)("option",{value:"custom-days",children:"Specific Days"})]})]}),"custom-days"===_&&(0,c.jsxs)("div",{className:"custom-days",children:[(0,c.jsx)("label",{children:"Select days:"}),(0,c.jsx)("div",{className:"days-checkboxes",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"checkbox",checked:S.includes(t),onChange:e=>{e.target.checked?C([...S,t]):C(S.filter(e=>e!==t))}}),e]},t))})]}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!h.trim())return;let e=r.parentSettings.approvals.editTasks,t=r.parentSettings.pins||[],n=()=>{a({type:"ADD_TASK",payload:{id:"task_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8)),title:h.trim(),emoji:f||"ðŸ“",color:g,stars:v,money:x,type:"recurring",enabled:!0,createdAt:new Date().toISOString(),description:"",requirePin:!1,recurring:{cadence:"weekdays"===_?"weekdays":"weekends"===_?"weekends":"custom-days"===_?"custom-days":"weekly"===_?"weekly":"monthly"===_?"monthly":"daily",customDays:"custom-days"===_?S:void 0}}}),p(""),m(""),y("#FFB6C1"),b(1),w(.5),k("daily"),C([]),el("Task added","success")};if(e)return 0===t.length?void ep("Adding tasks requires parent approval, but no approvers are defined. Please add an approver first."):void ed("Enter a parent PIN to add a task.",e=>{n()});n()},children:"Add Chore"})]})]})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(JSON.stringify(ea)!==JSON.stringify(r.parentSettings.approvals)){let e=r.parentSettings.pins||[];if(Object.keys(ea).filter(e=>ea[e]&&!r.parentSettings.approvals[e]).length>0&&0===e.length)return void ep("Enabling approval requirements requires at least one approver. Please add an approver first.");a({type:"UPDATE_PARENT_SETTINGS",payload:{approvals:ea}}),el("Settings saved","success")}i()},children:"Save Settings"}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:()=>{a({type:"UPDATE_PARENT_SETTINGS",payload:{onboardingCompleted:!1}}),el("Tutorial will restart when you close settings","info")},children:"Restart Tutorial"}),(0,c.jsx)("button",{className:"btn btn-danger",onClick:()=>{V(!0)},children:"Reset All Data"})]})]}),(0,c.jsx)(j.default,{open:F,onClose:()=>U(!1),title:"Notice",message:H}),(0,c.jsx)(A.default,{open:W,onClose:()=>V(!1),onConfirm:()=>{a({type:"RESET_ALL_DATA"})},title:"Reset All Data",message:"Are you sure you want to reset all data? This cannot be undone. All children, tasks, and settings will be deleted.",confirmText:"Reset All Data",cancelText:"Cancel",confirmButtonClass:"btn btn-danger"})]}),K.length>0&&(0,c.jsx)("div",{className:"toast-container","aria-live":"polite","aria-atomic":"true",children:K.map(e=>(0,c.jsxs)("div",{className:"toast toast-".concat(e.type),role:"status",children:[(0,c.jsx)("span",{children:e.message}),e.dismissible&&(0,c.jsx)("button",{className:"toast-close",onClick:()=>eo(e.id),"aria-label":"Dismiss notification",children:"Ã—"})]},e.id))}),(0,c.jsx)(N.default,{open:ee,onClose:()=>{er.current=null,et(!1)},onSuccess:e=>{var t;null==(t=er.current)||t.call(er,e),er.current=null,et(!1)},message:en})]});return(0,E.createPortal)(ef,document.body)}function O(e){let{open:t,onClose:n,childId:i}=e,{dispatch:r}=(0,T.useChoresApp)(),[a,s]=(0,d.useState)(""),[o,l]=(0,d.useState)(""),[u,h]=(0,d.useState)("#FFB6C1"),[p,f]=(0,d.useState)(1),[m,g]=(0,d.useState)(.5),[y,v]=(0,d.useState)(new Date().toISOString().split("T")[0]),[b,x]=(0,d.useState)("any-child"),[w,_]=(0,d.useState)(!1);if((0,d.useEffect)(()=>(_(!0),()=>_(!1)),[]),!t||!w)return null;let k=(0,c.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,c.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:"âž• Add One-off Task"}),(0,c.jsx)("span",{className:"close",onClick:e=>{e.stopPropagation(),n()},children:"Ã—"})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{children:"Task Name:"}),(0,c.jsx)("input",{type:"text",placeholder:"Task name",value:a,onChange:e=>s(e.target.value)})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{children:"Emoji:"}),(0,c.jsx)("input",{type:"text",placeholder:"Emoji",maxLength:2,value:o,onChange:e=>l(e.target.value)}),(0,c.jsx)("label",{children:"Color:"}),(0,c.jsx)("input",{type:"color",value:u,onChange:e=>h(e.target.value)})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{children:"Star Reward:"}),(0,c.jsx)("input",{type:"number",min:1,max:5,value:p,onChange:e=>f(Number(e.target.value))}),(0,c.jsx)("label",{children:"Money Reward:"}),(0,c.jsx)("input",{type:"number",min:0,step:.25,value:m,onChange:e=>g(Number(e.target.value))})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{children:"Date:"}),(0,c.jsx)("input",{type:"date",value:y,onChange:e=>v(e.target.value)})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{children:"Task Type:"}),(0,c.jsxs)("select",{value:b,onChange:e=>x(e.target.value),children:[(0,c.jsx)("option",{value:"any-child",children:"Any child can complete"}),(0,c.jsx)("option",{value:"first-come",children:"First child to claim gets it"}),(0,c.jsx)("option",{value:"all-children",children:"Each child can complete once"})]})]})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),(()=>{if(!a.trim())return;let e={id:"oneoff_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8)),title:a.trim(),emoji:o||"ðŸ“",color:u,stars:p,money:m,type:"oneoff",enabled:!0,createdAt:new Date().toISOString(),description:"",requirePin:!1,oneOff:{dueDate:y},assignedTo:"any-child"===b&&i?String(i):void 0},t={id:"instance_".concat(e.id,"_").concat(i||0,"_").concat(y),templateId:e.id,childId:i||0,date:y,stars:e.stars,money:e.money,completed:!1,createdAt:new Date().toISOString()};r({type:"ADD_TASK",payload:e}),r({type:"ADD_TASK_INSTANCE",payload:t}),s(""),l(""),h("#FFB6C1"),f(1),g(.5),v(new Date().toISOString().split("T")[0]),x("any-child"),n()})()},children:"Add Task"}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:e=>{e.stopPropagation(),n()},children:"Cancel"})]})]})});return(0,E.createPortal)(k,document.body)}var R=e.i(11797);class D{static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await D.listCameras(!1)).length}catch(e){return!1}}static async listCameras(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind),n;try{e&&(await t()).every(e=>!e.label)&&(n=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(e){}try{return(await t()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":"Camera ".concat(t+1))}))}finally{n&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),D._stopVideoStream(n))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(e){return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),D._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),D._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?D._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(D._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(t(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s,o=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(s=t.scanRegion,n=t.qrEngine,i=t.canvas,r=t.disallowCanvasResizing||!1,a=t.alsoTryWithoutScanRegion||!1,o=!0):t||n||i||r||a?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!n;try{let l,c,d;if([n,l]=await Promise.all([n||D.createQrEngine(),D._loadImage(e)]),[i,c]=D._drawToCanvas(l,s,i,r),n instanceof Worker){let e=n;t||D._postWorkerMessageSync(e,"inversionMode","both"),d=await new Promise((t,n)=>{let r,a,o,l=-1;a=i=>{i.data.id===l&&(e.removeEventListener("message",a),e.removeEventListener("error",o),clearTimeout(r),null!==i.data.data?t({data:i.data.data,cornerPoints:D._convertPoints(i.data.cornerPoints,s)}):n(D.NO_QR_CODE_FOUND))},o=t=>{e.removeEventListener("message",a),e.removeEventListener("error",o),clearTimeout(r),n("Scanner error: "+(t?t.message||t:"Unknown Error"))},e.addEventListener("message",a),e.addEventListener("error",o),r=setTimeout(()=>o("timeout"),1e4);let d=c.getImageData(0,0,i.width,i.height);l=D._postWorkerMessageSync(e,"decode",d,[d.data.buffer])})}else d=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[t]=await n.detect(i);if(!t)throw D.NO_QR_CODE_FOUND;return{data:t.rawValue,cornerPoints:D._convertPoints(t.cornerPoints,s)}}catch(n){if(t=n.message||n,/not implemented|service unavailable/.test(t))return D._disableBarcodeDetector=!0,D.scanImage(e,{scanRegion:s,canvas:i,disallowCanvasResizing:r,alsoTryWithoutScanRegion:a});throw"Scanner error: ".concat(t)}})()]);return o?d:d.data}catch(l){if(!s||!a)throw l;let t=await D.scanImage(e,{qrEngine:n,canvas:i,disallowCanvasResizing:r});return o?t:t.data}finally{t||D._postWorkerMessage(n,"close")}}setGrayscaleWeights(e,t,n){let i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];D._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:n,useIntegerApproximation:i})}setInversionMode(e){D._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(t){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>e.A(5630).then(e=>e.createWorker()),!(!D._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return t();let n=navigator.userAgentData;return n&&n.brands.some(e=>{let{brand:t}=e;return/Chromium/i.test(t)})&&/mac ?OS/i.test(n.platform)&&await n.getHighEntropyValues(["architecture","platformVersion"]).then(e=>{let{architecture:t,platformVersion:n}=e;return/arm/i.test(t||"arm")&&13<=parseInt(n||"13")}).catch(()=>!0)?t():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,n=e.videoHeight,i=e.offsetWidth,r=e.offsetHeight,a=e.offsetLeft,s=e.offsetTop,o=window.getComputedStyle(e),l=o.objectFit,c=t/n,d=i/r;switch(l){case"none":var u=t,h=n;break;case"fill":u=i,h=r;break;default:("cover"===l?c>d:c<d)?u=(h=r)*c:h=(u=i)/c,"scale-down"===l&&(u=Math.min(u,t),h=Math.min(h,n))}var[p,f]=o.objectPosition.split(" ").map((e,t)=>{let n=parseFloat(e);return e.endsWith("%")?(t?r-h:i-u)*n/100:n});o=this._scanRegion.width||t,d=this._scanRegion.height||n,l=this._scanRegion.x||0;var m=this._scanRegion.y||0;(c=this.$overlay.style).width="".concat(o/t*u,"px"),c.height="".concat(d/n*h,"px"),c.top="".concat(s+f+m/n*h,"px"),n=/scaleX\(-1\)/.test(e.style.transform),c.left="".concat(a+(n?i-p-u:p)+(n?t-l-o:l)/t*u,"px"),c.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let n=t.x||0,i=t.y||0,r=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;for(let a of(t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1,e))a.x=a.x*r+n,a.y=a.y*t+i;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(n=>setTimeout(n,t-e)),this._lastScanTimestamp=Date.now();try{var n=await D.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(e){if(!this._active)return;this._onDecodeError(e)}!D._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=D.createQrEngine()),n?(this._onDecode?this._onDecode(n):this._legacyOnDecode&&this._legacyOnDecode(n.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox","".concat(this._scanRegion.x||0," ")+"".concat(this._scanRegion.y||0," ")+"".concat(this._scanRegion.width||this.$video.videoWidth," ")+"".concat(this._scanRegion.height||this.$video.videoHeight)),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",n.cornerPoints.map(e=>{let{x:t,y:n}=e;return"".concat(t,",").concat(n)}).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==D.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}];for(let n of[...t.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}})),...t])try{let e=await navigator.mediaDevices.getUserMedia({video:n,audio:!1}),t=this._getFacingMode(e)||(n.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment");return{stream:e,facingMode:t}}catch(e){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=n||document.createElement("canvas");let r=t&&t.x?t.x:0,a=t&&t.y?t.y:0,s=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return i||(i=t&&t.downScaledWidth?t.downScaledWidth:s,t=t&&t.downScaledHeight?t.downScaledHeight:o,n.width!==i&&(n.width=i),n.height!==t&&(n.height=t)),(t=n.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,r,a,s,o,0,0,n.width,n.height),[n,t]}static async _loadImage(e){if(e instanceof Image)return await D._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await D._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((t,n)=>{let i=r=>{e.removeEventListener("load",i),e.removeEventListener("error",i),r instanceof ErrorEvent?n("Image load error"):t()};e.addEventListener("load",i),e.addEventListener("error",i)})}static async _postWorkerMessage(e,t,n,i){return D._postWorkerMessageSync(await e,t,n,i)}static _postWorkerMessageSync(e,t,n,i){if(!(e instanceof Worker))return -1;let r=D._workerMessageId++;return e.postMessage({id:r,type:t,data:n},i),r}constructor(e,t,n,i,r){this._legacyCanvasSize=D.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),n&&"object"==typeof n?this._onDecode=t:(n||i||r?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t="object"==typeof n?n:{},this._onDecodeError=t.onDecodeError||("function"==typeof n?n:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||("function"==typeof i?i:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||r||this._preferredCamera,this._legacyCanvasSize="number"==typeof n?n:"number"==typeof i?i:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let a=!1;if(e.hidden&&(e.hidden=!1,a=!0),document.body.contains(e)||(document.body.appendChild(e),a=!0),n=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(i=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),(r=this.$overlay.style).position="absolute",r.display="none",r.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(e){}n.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let t=window.getComputedStyle(e);"none"===t.display&&(e.style.setProperty("display","block","important"),a=!0),"visible"!==t.visibility&&(e.style.setProperty("visibility","visible","important"),a=!0),a&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=D.createQrEngine()}}function P(e){let t=e.length;for(;--t>=0;)e[t]=0}D.DEFAULT_CANVAS_SIZE=400,D.NO_QR_CODE_FOUND="No QR code found",D._disableBarcodeDetector=!1,D._workerMessageId=0;let M=573,$=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),L=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),z=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F=Array(576);P(F);let U=Array(60);P(U);let H=Array(512);P(H);let q=Array(256);P(q);let W=Array(29);P(W);let V=Array(30);function Z(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function Y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}P(V);let K=e=>e<256?H[e]:H[256+(e>>>7)],Q=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},J=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Q(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},G=(e,t,n)=>{J(e,n[2*t],n[2*t+1])},X=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0)return n>>>1},ee=(e,t,n)=>{let i,r,a=Array(16),s=0;for(i=1;i<=15;i++)s=s+n[i-1]<<1,a[i]=s;for(r=0;r<=t;r++){let t=e[2*r+1];0!==t&&(e[2*r]=X(a[t]++,t))}},et=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},en=e=>{e.bi_valid>8?Q(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ei=(e,t,n,i)=>{let r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]},er=(e,t,n)=>{let i=e.heap[n],r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&ei(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!ei(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},ea=(e,t,n)=>{let i,r,a,s,o=0;if(0!==e.sym_next)do i=(255&e.pending_buf[e.sym_buf+o++])+((255&e.pending_buf[e.sym_buf+o++])<<8),r=e.pending_buf[e.sym_buf+o++],0===i?G(e,r,t):(G(e,(a=q[r])+256+1,t),0!==(s=$[a])&&J(e,r-=W[a],s),G(e,a=K(--i),n),0!==(s=L[a])&&J(e,i-=V[a],s));while(o<e.sym_next)G(e,256,t)},es=(e,t)=>{let n,i,r,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(n=0,e.heap_len=0,e.heap_max=M;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,o&&(e.static_len-=s[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)er(e,a,n);r=l;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],er(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,a[2*r]=a[2*n]+a[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,a[2*n+1]=a[2*i+1]=r,e.heap[1]=r++,er(e,a,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let n,i,r,a,s,o,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<M;n++)(a=l[2*l[2*(i=e.heap[n])+1]+1]+1)>f&&(a=f,m++),l[2*i+1]=a,!(i>c)&&(e.bl_count[a]++,s=0,i>=p&&(s=h[i-p]),o=l[2*i],e.opt_len+=o*(a+s),u&&(e.static_len+=o*(d[2*i+1]+s)));if(0!==m){do{for(a=f-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[f]--,m-=2}while(m>0)for(a=f;0!==a;a--)for(i=e.bl_count[a];0!==i;)!((r=e.heap[--n])>c)&&(l[2*r+1]!==a&&(e.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),i--)}})(e,t),ee(a,c,e.bl_count)},eo=(e,t,n)=>{let i,r,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)r=s,s=t[(i+1)*2+1],++o<l&&r===s||(o<c?e.bl_tree[2*r]+=o:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))},el=(e,t,n)=>{let i,r,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),i=0;i<=n;i++)if(r=s,s=t[(i+1)*2+1],!(++o<l)||r!==s){if(o<c)do G(e,r,e.bl_tree);while(0!=--o)else 0!==r?(r!==a&&(G(e,r,e.bl_tree),o--),G(e,16,e.bl_tree),J(e,o-3,2)):o<=10?(G(e,17,e.bl_tree),J(e,o-3,3)):(G(e,18,e.bl_tree),J(e,o-11,7));o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}},ec=!1,ed=(e,t,n,i)=>{J(e,0+ +!!i,3),en(e),Q(e,n),Q(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var eu={_tr_init:e=>{ec||((()=>{let e,r,a,s,o,l=Array(16);for(s=0,a=0;s<28;s++)for(e=0,W[s]=a;e<1<<$[s];e++)q[a++]=s;for(q[a-1]=s,o=0,s=0;s<16;s++)for(e=0,V[s]=o;e<1<<L[s];e++)H[o++]=s;for(o>>=7;s<30;s++)for(e=0,V[s]=o<<7;e<1<<L[s]-7;e++)H[256+o++]=s;for(r=0;r<=15;r++)l[r]=0;for(e=0;e<=143;)F[2*e+1]=8,e++,l[8]++;for(;e<=255;)F[2*e+1]=9,e++,l[9]++;for(;e<=279;)F[2*e+1]=7,e++,l[7]++;for(;e<=287;)F[2*e+1]=8,e++,l[8]++;for(ee(F,287,l),e=0;e<30;e++)U[2*e+1]=5,U[2*e]=X(e,5);t=new Z(F,$,257,286,15),n=new Z(U,L,0,30,15),i=new Z([],z,0,19,7)})(),ec=!0),e.l_desc=new Y(e.dyn_ltree,t),e.d_desc=new Y(e.dyn_dtree,n),e.bl_desc=new Y(e.bl_tree,i),e.bi_buf=0,e.bi_valid=0,et(e)},_tr_stored_block:ed,_tr_flush_block:(e,t,n,i)=>{let r,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),es(e,e.l_desc),es(e,e.d_desc),s=(e=>{let t;for(eo(e,e.dyn_ltree,e.l_desc.max_code),eo(e,e.dyn_dtree,e.d_desc.max_code),es(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*B[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=r&&(r=a)):r=a=n+5,n+4<=r&&-1!==t?ed(e,t,n,i):4===e.strategy||a===r?(J(e,2+ +!!i,3),ea(e,F,U)):(J(e,4+ +!!i,3),((e,t,n,i)=>{let r;for(J(e,t-257,5),J(e,n-1,5),J(e,i-4,4),r=0;r<i;r++)J(e,e.bl_tree[2*B[r]+1],3);el(e,e.dyn_ltree,t-1),el(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),ea(e,e.dyn_ltree,e.dyn_dtree)),et(e),i&&en(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(q[n]+256+1)*2]++,e.dyn_dtree[2*K(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{J(e,2,3),G(e,256,F),(e=>{16===e.bi_valid?(Q(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},eh=(e,t,n,i)=>{let r=65535&e,a=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do a=a+(r=r+t[i++]|0)|0;while(--s)r%=65521,a%=65521}return r|a<<16};let ep=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t})());var ef=(e,t,n,i)=>{let r=i+n;e^=-1;for(let n=i;n<r;n++)e=e>>>8^ep[(e^t[n])&255];return -1^e},em={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eg={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:ey,_tr_stored_block:ev,_tr_flush_block:eb,_tr_tally:ex,_tr_align:ew}=eu,{Z_NO_FLUSH:e_,Z_PARTIAL_FLUSH:ek,Z_FULL_FLUSH:eS,Z_FINISH:eC,Z_BLOCK:eE,Z_OK:eT,Z_STREAM_END:ej,Z_STREAM_ERROR:eA,Z_DATA_ERROR:eN,Z_BUF_ERROR:eI,Z_DEFAULT_COMPRESSION:eO,Z_FILTERED:eR,Z_HUFFMAN_ONLY:eD,Z_RLE:eP,Z_FIXED:eM,Z_DEFAULT_STRATEGY:e$,Z_UNKNOWN:eL,Z_DEFLATED:ez}=eg,eB=573,eF=(e,t)=>(e.msg=em[t],t),eU=e=>2*e-9*(e>4),eH=e=>{let t=e.length;for(;--t>=0;)e[t]=0},eq=e=>{let t,n,i,r=e.w_size;i=t=e.hash_size;do n=e.head[--i],e.head[i]=n>=r?n-r:0;while(--t)i=t=r;do n=e.prev[--i],e.prev[i]=n>=r?n-r:0;while(--t)},eW=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,eV=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},eZ=(e,t)=>{eb(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,eV(e.strm)},eY=(e,t)=>{e.pending_buf[e.pending++]=t},eK=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eQ=(e,t,n,i)=>{let r=e.avail_in;return(r>i&&(r=i),0===r)?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=eh(e.adler,t,r,n):2===e.state.wrap&&(e.adler=ef(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},eJ=(e,t)=>{let n,i,r=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+258,p=c[a+s-1],f=c[a+s];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(n=t)+s]!==f||c[n+s-1]!==p||c[n]!==c[a]||c[++n]!==c[a+1])continue;a+=2,n++;do;while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h)if(i=258-(h-a),a=h-258,i>s){if(e.match_start=t,s=i,i>=o)break;p=c[a+s-1],f=c[a+s]}}while((t=u[t&d])>l&&0!=--r)return s<=e.lookahead?s:e.lookahead},eG=e=>{let t,n,i,r=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-262)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),eq(e),n+=r),0===e.strm.avail_in)break;if(t=eQ(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=eW(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=eW(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eX=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i,r,a,s=0,o=e.strm.avail_in;do{if(i=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i>(r=e.strstart-e.block_start)+e.strm.avail_in&&(i=r+e.strm.avail_in),i>a&&(i=a),i<n&&(0===i&&t!==eC||t===e_||i!==r+e.strm.avail_in)))break;s=+(t===eC&&i===r+e.strm.avail_in),ev(e,0,0,s),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,eV(e.strm),r&&(r>i&&(r=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,i-=r),i&&(eQ(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===s)return((o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s)?4:t!==e_&&t!==eC&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(eQ(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,n=(a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((r=e.strstart-e.block_start)>=n||(r||t===eC)&&t!==e_&&0===e.strm.avail_in&&r<=a)&&(i=r>a?a:r,s=+(t===eC&&0===e.strm.avail_in&&i===r),ev(e,e.block_start,i,s),e.block_start+=i,eV(e.strm)),s?3:1)},e0=(e,t)=>{let n,i;for(;;){if(e.lookahead<262){if(eG(e),e.lookahead<262&&t===e_)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eW(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=eJ(e,n)),e.match_length>=3)if(i=ex(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=eW(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eW(e,e.ins_h,e.window[e.strstart+1]);else i=ex(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(eZ(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===eC)?(eZ(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eZ(e,!1),0===e.strm.avail_out)?1:2},e1=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<262){if(eG(e),e.lookahead<262&&t===e_)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eW(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=eJ(e,n),e.match_length<=5&&(e.strategy===eR||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=ex(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=eW(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,i&&(eZ(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=ex(e,0,e.window[e.strstart-1]))&&eZ(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(i=ex(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===eC)?(eZ(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eZ(e,!1),0===e.strm.avail_out)?1:2};function e2(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}let e5=[new e2(0,0,0,0,eX),new e2(4,4,8,4,e0),new e2(4,5,16,8,e0),new e2(4,6,32,32,e0),new e2(4,4,16,16,e1),new e2(8,16,32,32,e1),new e2(8,16,128,128,e1),new e2(8,32,128,256,e1),new e2(32,128,258,1024,e1),new e2(32,258,258,4096,e1)];function e6(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ez,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eB),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),eH(this.dyn_ltree),eH(this.dyn_dtree),eH(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),eH(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),eH(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let e3=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1};var e8={deflateInit2:(e,t,n,i,r,a)=>{if(!e)return eA;let s=1;if(t===eO&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==ez||i<8||i>15||t<0||t>9||a<0||a>eM||8===i&&1!==s)return eF(e,eA);8===i&&(i=9);let o=new e6;return e.state=o,o.strm=e,o.status=42,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=a,o.method=n,(e=>{let t=(e=>{if(e3(e))return eF(e,eA);e.total_in=e.total_out=0,e.data_type=eL;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,ey(t),eT})(e);return t===eT&&(e=>{e.window_size=2*e.w_size,eH(e.head),e.max_lazy_match=e5[e.level].max_lazy,e.good_match=e5[e.level].good_length,e.nice_match=e5[e.level].nice_length,e.max_chain_length=e5[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t})(e)},deflateSetHeader:(e,t)=>e3(e)||2!==e.state.wrap?eA:(e.state.gzhead=t,eT),deflate:(e,t)=>{if(e3(e)||t>eE||t<0)return e?eF(e,eA):eA;let n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==eC)return eF(e,0===e.avail_out?eI:eA);let i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(eV(e),0===e.avail_out)return n.last_flush=-1,eT}else if(0===e.avail_in&&eU(t)<=eU(i)&&t!==eC)return eF(e,eI);if(666===n.status&&0!==e.avail_in)return eF(e,eI);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=ez+(n.w_bits-8<<4)<<8;if(t|=(n.strategy>=eD||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(t|=32),eK(n,t+=31-t%31),0!==n.strstart&&(eK(n,e.adler>>>16),eK(n,65535&e.adler)),e.adler=1,n.status=113,eV(e),0!==n.pending)return n.last_flush=-1,eT}if(57===n.status){if(e.adler=0,eY(n,31),eY(n,139),eY(n,8),n.gzhead)eY(n,+!!n.gzhead.text+2*!!n.gzhead.hcrc+4*!!n.gzhead.extra+8*!!n.gzhead.name+16*!!n.gzhead.comment),eY(n,255&n.gzhead.time),eY(n,n.gzhead.time>>8&255),eY(n,n.gzhead.time>>16&255),eY(n,n.gzhead.time>>24&255),eY(n,9===n.level?2:4*(n.strategy>=eD||n.level<2)),eY(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(eY(n,255&n.gzhead.extra.length),eY(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ef(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(eY(n,0),eY(n,0),eY(n,0),eY(n,0),eY(n,0),eY(n,9===n.level?2:4*(n.strategy>=eD||n.level<2)),eY(n,3),n.status=113,eV(e),0!==n.pending)return n.last_flush=-1,eT}if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=ef(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,eV(e),0!==n.pending)return n.last_flush=-1,eT;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=ef(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=ef(e.adler,n.pending_buf,n.pending-i,i)),eV(e),0!==n.pending)return n.last_flush=-1,eT;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,eY(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>i&&(e.adler=ef(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=ef(e.adler,n.pending_buf,n.pending-i,i)),eV(e),0!==n.pending)return n.last_flush=-1,eT;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,eY(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>i&&(e.adler=ef(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(eV(e),0!==n.pending))return n.last_flush=-1,eT;eY(n,255&e.adler),eY(n,e.adler>>8&255),e.adler=0}if(n.status=113,eV(e),0!==n.pending)return n.last_flush=-1,eT}if(0!==e.avail_in||0!==n.lookahead||t!==e_&&666!==n.status){let i=0===n.level?eX(n,t):n.strategy===eD?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(eG(e),0===e.lookahead)){if(t===e_)return 1;break}if(e.match_length=0,n=ex(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(eZ(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===eC)?(eZ(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eZ(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===eP?((e,t)=>{let n,i,r,a,s=e.window;for(;;){if(e.lookahead<=258){if(eG(e),e.lookahead<=258&&t===e_)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=e.strstart+258;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a)e.match_length=258-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=ex(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ex(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(eZ(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===eC)?(eZ(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eZ(e,!1),0===e.strm.avail_out)?1:2})(n,t):e5[n.level].func(n,t);if((3===i||4===i)&&(n.status=666),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),eT;if(2===i&&(t===ek?ew(n):t!==eE&&(ev(n,0,0,!1),t===eS&&(eH(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),eV(e),0===e.avail_out))return n.last_flush=-1,eT}return t!==eC?eT:n.wrap<=0?ej:(2===n.wrap?(eY(n,255&e.adler),eY(n,e.adler>>8&255),eY(n,e.adler>>16&255),eY(n,e.adler>>24&255),eY(n,255&e.total_in),eY(n,e.total_in>>8&255),eY(n,e.total_in>>16&255),eY(n,e.total_in>>24&255)):(eK(n,e.adler>>>16),eK(n,65535&e.adler)),eV(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?eT:ej)},deflateEnd:e=>{if(e3(e))return eA;let t=e.state.status;return e.state=null,113===t?eF(e,eN):eT},deflateSetDictionary:(e,t)=>{let n=t.length;if(e3(e))return eA;let i=e.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return eA;if(1===r&&(e.adler=eh(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(eH(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}let a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,eG(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do i.ins_h=eW(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++;while(--t)i.strstart=e,i.lookahead=2,eG(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,i.wrap=r,eT}};let e4=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var e9={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let t in n)e4(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];n.set(r,i),i+=r.length}return n}};let e7=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){e7=!1}let te=new Uint8Array(256);for(let e=0;e<256;e++)te[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;te[254]=te[254]=1;var tt={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,r,a,s=e.length,o=0;for(r=0;r<s;r++)(64512&(n=e.charCodeAt(r)))==55296&&r+1<s&&(64512&(i=e.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),r++),o+=n<128?1:n<2048?2:n<65536?3:4;for(a=0,t=new Uint8Array(o),r=0;a<o;r++)(64512&(n=e.charCodeAt(r)))==55296&&r+1<s&&(64512&(i=e.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},buf2string:(e,t)=>{let n,i,r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a=Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){a[i++]=t;continue}let s=te[t];if(s>4){a[i++]=65533,n+=s-1;continue}for(t&=2===s?31:3===s?15:7;s>1&&n<r;)t=t<<6|63&e[n++],s--;if(s>1){a[i++]=65533;continue}t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}return((e,t)=>{if(t<65534&&e.subarray&&e7)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(a,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+te[e[n]]>t?n:t}},tn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let ti=Object.prototype.toString,{Z_NO_FLUSH:tr,Z_SYNC_FLUSH:ta,Z_FULL_FLUSH:ts,Z_FINISH:to,Z_OK:tl,Z_STREAM_END:tc,Z_DEFAULT_COMPRESSION:td,Z_DEFAULT_STRATEGY:tu,Z_DEFLATED:th}=eg;function tp(e){this.options=e9.assign({level:td,method:th,chunkSize:16384,windowBits:15,memLevel:8,strategy:tu},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tn,this.strm.avail_out=0;let n=e8.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tl)throw Error(em[n]);if(t.header&&e8.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?tt.string2buf(t.dictionary):"[object ArrayBuffer]"===ti.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=e8.deflateSetDictionary(this.strm,e))!==tl)throw Error(em[n]);this._dict_set=!0}}function tf(e,t){let n=new tp(t);if(n.push(e,!0),n.err)throw n.msg||em[n.err];return n.result}tp.prototype.push=function(e,t){let n,i,r=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(i=t===~~t?t:!0===t?to:tr,"string"==typeof e?r.input=tt.string2buf(e):"[object ArrayBuffer]"===ti.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(0===r.avail_out&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),(i===ta||i===ts)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if((n=e8.deflate(r,i))===tc)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),n=e8.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tl;if(0===r.avail_out){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(0===r.avail_in)break}return!0},tp.prototype.onData=function(e){this.chunks.push(e)},tp.prototype.onEnd=function(e){e===tl&&(this.result=e9.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var tm=function(e,t){let n,i,r,a,s,o,l,c,d,u,h,p,f,m,g,y,v,b,x,w,_,k,S,C,E=e.state;n=e.next_in,S=e.input,i=n+(e.avail_in-5),r=e.next_out,C=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),o=E.dmax,l=E.wsize,c=E.whave,d=E.wnext,u=E.window,h=E.hold,p=E.bits,f=E.lencode,m=E.distcode,g=(1<<E.lenbits)-1,y=(1<<E.distbits)-1;e:do for(p<15&&(h+=S[n++]<<p,p+=8,h+=S[n++]<<p,p+=8),v=f[h&g];;){if(h>>>=b=v>>>24,p-=b,0==(b=v>>>16&255))C[r++]=65535&v;else if(16&b)for(x=65535&v,(b&=15)&&(p<b&&(h+=S[n++]<<p,p+=8),x+=h&(1<<b)-1,h>>>=b,p-=b),p<15&&(h+=S[n++]<<p,p+=8,h+=S[n++]<<p,p+=8),v=m[h&y];;){if(h>>>=b=v>>>24,p-=b,16&(b=v>>>16&255)){if(w=65535&v,p<(b&=15)&&(h+=S[n++]<<p,(p+=8)<b&&(h+=S[n++]<<p,p+=8)),(w+=h&(1<<b)-1)>o){e.msg="invalid distance too far back",E.mode=16209;break e}if(h>>>=b,p-=b,w>(b=r-a)){if((b=w-b)>c&&E.sane){e.msg="invalid distance too far back",E.mode=16209;break e}if(_=0,k=u,0===d){if(_+=l-b,b<x){x-=b;do C[r++]=u[_++];while(--b)_=r-w,k=C}}else if(d<b){if(_+=l+d-b,(b-=d)<x){x-=b;do C[r++]=u[_++];while(--b)if(_=0,d<x){x-=b=d;do C[r++]=u[_++];while(--b)_=r-w,k=C}}}else if(_+=d-b,b<x){x-=b;do C[r++]=u[_++];while(--b)_=r-w,k=C}for(;x>2;)C[r++]=k[_++],C[r++]=k[_++],C[r++]=k[_++],x-=3;x&&(C[r++]=k[_++],x>1&&(C[r++]=k[_++]))}else{_=r-w;do C[r++]=C[_++],C[r++]=C[_++],C[r++]=C[_++],x-=3;while(x>2)x&&(C[r++]=C[_++],x>1&&(C[r++]=C[_++]))}}else if((64&b)==0){v=m[(65535&v)+(h&(1<<b)-1)];continue}else{e.msg="invalid distance code",E.mode=16209;break e}break}else if((64&b)==0){v=f[(65535&v)+(h&(1<<b)-1)];continue}else if(32&b){E.mode=16191;break e}else{e.msg="invalid literal/length code",E.mode=16209;break e}break}while(n<i&&r<s)n-=x=p>>3,p-=x<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=r<s?257+(s-r):257-(r-s),E.hold=h,E.bits=p};let tg=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ty=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tv=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tx=(e,t,n,i,r,a,s,o)=>{let l,c,d,u,h,p,f,m,g,y=o.bits,v=0,b=0,x=0,w=0,_=0,k=0,S=0,C=0,E=0,T=0,j=null,A=new Uint16Array(16),N=new Uint16Array(16),I=null;for(v=0;v<=15;v++)A[v]=0;for(b=0;b<i;b++)A[t[n+b]]++;for(w=15,_=y;w>=1&&0===A[w];w--);if(_>w&&(_=w),0===w)return r[a++]=0x1400000,r[a++]=0x1400000,o.bits=1,0;for(x=1;x<w&&0===A[x];x++);for(_<x&&(_=x),C=1,v=1;v<=15;v++)if(C<<=1,(C-=A[v])<0)return -1;if(C>0&&(0===e||1!==w))return -1;for(v=1,N[1]=0;v<15;v++)N[v+1]=N[v]+A[v];for(b=0;b<i;b++)0!==t[n+b]&&(s[N[t[n+b]]++]=b);if(0===e?(j=I=s,p=20):1===e?(j=tg,I=ty,p=257):(j=tv,I=tb,p=0),T=0,b=0,v=x,h=a,k=_,S=0,d=-1,u=(E=1<<_)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){f=v-S,s[b]+1<p?(m=0,g=s[b]):s[b]>=p?(m=I[s[b]-p],g=j[s[b]-p]):(m=96,g=0),l=1<<v-S,x=c=1<<k;do r[h+(T>>S)+(c-=l)]=f<<24|m<<16|g;while(0!==c)for(l=1<<v-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,b++,0==--A[v]){if(v===w)break;v=t[n+s[b]]}if(v>_&&(T&u)!==d){for(0===S&&(S=_),h+=x,C=1<<(k=v-S);k+S<w&&!((C-=A[k+S])<=0);)k++,C<<=1;if(E+=1<<k,1===e&&E>852||2===e&&E>592)return 1;r[d=T&u]=_<<24|k<<16|h-a}}return 0!==T&&(r[h+T]=v-S<<24|4194304),o.bits=_,0};let{Z_FINISH:tw,Z_BLOCK:t_,Z_TREES:tk,Z_OK:tS,Z_STREAM_END:tC,Z_NEED_DICT:tE,Z_STREAM_ERROR:tT,Z_DATA_ERROR:tj,Z_MEM_ERROR:tA,Z_BUF_ERROR:tN,Z_DEFLATED:tI}=eg,tO=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function tR(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let tD=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},tP=e=>{if(tD(e))return tT;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(tD(e))return tT;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tS})(e)},tM=!0,t$=e=>{if(tM){r=new Int32Array(512),a=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tx(1,e.lens,0,288,r,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tx(2,e.lens,0,32,a,0,e.work,{bits:5}),tM=!1}e.lencode=r,e.lenbits=9,e.distcode=a,e.distbits=5},tL=(e,t,n,i)=>{let r,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):((r=a.wsize-a.wnext)>i&&(r=i),a.window.set(t.subarray(n-i,n-i+r),a.wnext),(i-=r)?(a.window.set(t.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};var tz={inflateReset:tP,inflateInit2:(e,t)=>{if(!e)return tT;let n=new tR;e.state=n,n.strm=e,n.window=null,n.mode=16180;let i=((e,t)=>{let n;if(tD(e))return tT;let i=e.state;return(t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?tT:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,tP(e))})(e,t);return i!==tS&&(e.state=null),i},inflate:(e,t)=>{let n,i,r,a,s,o,l,c,d,u,h,p,f,m,g,y,v,b,x,w,_,k,S,C,E=0,T=new Uint8Array(4),j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tD(e)||!e.output||!e.input&&0!==e.avail_in)return tT;16191===(n=e.state).mode&&(n.mode=16192),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,c=n.hold,d=n.bits,u=o,h=l,k=tS;t:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;d<16;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=ef(n.check,T,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&c)!==tI){e.msg="unknown compression method",n.mode=16209;break}if(c>>>=4,d-=4,_=(15&c)+8,0===n.wbits&&(n.wbits=_),_>15||_>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:16191,c=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==tI){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ef(n.check,T,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=ef(n.check,T,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ef(n.check,T,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=ef(n.check,T,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((p=n.length)>o&&(p=o),p&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+p),_)),512&n.flags&&4&n.wrap&&(n.check=ef(n.check,i,p,a)),o-=p,a+=p,n.length-=p),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break t;p=0;do _=i[a+p++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_));while(_&&p<o)if(512&n.flags&&4&n.wrap&&(n.check=ef(n.check,i,p,a)),o-=p,a+=p,_)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break t;p=0;do _=i[a+p++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_));while(_&&p<o)if(512&n.flags&&4&n.wrap&&(n.check=ef(n.check,i,p,a)),o-=p,a+=p,_)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}e.adler=n.check=tO(c),c=0,d=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,tE;e.adler=n.check=1,n.mode=16191;case 16191:if(t===t_||t===tk)break t;case 16192:if(n.last){c>>>=7&d,d-=7&d,n.mode=16206;break}for(;d<3;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}switch(n.last=1&c,d-=1,3&(c>>>=1)){case 0:n.mode=16193;break;case 1:if(t$(n),n.mode=16199,t===tk){c>>>=2,d-=2;break t}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&c,c=0,d=0,n.mode=16194,t===tk)break t;case 16194:n.mode=16195;case 16195:if(p=n.length){if(p>o&&(p=o),p>l&&(p=l),0===p)break t;r.set(i.subarray(a,a+p),s),o-=p,a+=p,l-=p,s+=p,n.length-=p;break}n.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(n.nlen=(31&c)+257,d-=5,n.ndist=(31&(c>>>=5))+1,d-=5,n.ncode=(15&(c>>>=5))+4,c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}n.lens[j[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},k=tx(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,k){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;g=(E=n.lencode[c&(1<<n.lenbits)-1])>>>24,y=E>>>16&255,v=65535&E,!(g<=d);){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(v<16)c>>>=g,d-=g,n.lens[n.have++]=v;else{if(16===v){for(C=g+2;d<C;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(c>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}_=n.lens[n.have-1],p=3+(3&c),c>>>=2,d-=2}else if(17===v){for(C=g+3;d<C;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}c>>>=g,d-=g,_=0,p=3+(7&c),c>>>=3,d-=3}else{for(C=g+7;d<C;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}c>>>=g,d-=g,_=0,p=11+(127&c),c>>>=7,d-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;p--;)n.lens[n.have++]=_}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,S={bits:n.lenbits},k=tx(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,k){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},k=tx(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,k){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===tk)break t;case 16199:n.mode=16200;case 16200:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,tm(e,h),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,c=n.hold,d=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;g=(E=n.lencode[c&(1<<n.lenbits)-1])>>>24,y=E>>>16&255,v=65535&E,!(g<=d);){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(y&&(240&y)==0){for(b=g,x=y,w=v;g=(E=n.lencode[w+((c&(1<<b+x)-1)>>b)])>>>24,y=E>>>16&255,v=65535&E,!(b+g<=d);){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=g,d-=g,n.back+=g,n.length=v,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=16191;break}if(64&y){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;d<C;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;g=(E=n.distcode[c&(1<<n.distbits)-1])>>>24,y=E>>>16&255,v=65535&E,!(g<=d);){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if((240&y)==0){for(b=g,x=y,w=v;g=(E=n.distcode[w+((c&(1<<b+x)-1)>>b)])>>>24,y=E>>>16&255,v=65535&E,!(b+g<=d);){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=g,d-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=16209;break}n.offset=v,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;d<C;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===l)break t;if(p=h-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=r,f=s-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do r[s++]=m[f++];while(--p)0===n.length&&(n.mode=16200);break;case 16205:if(0===l)break t;r[s++]=n.length,l--,n.mode=16200;break;case 16206:if(n.wrap){for(;d<32;){if(0===o)break t;o--,c|=i[a++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?ef(n.check,r,h,s-h):eh(n.check,r,h,s-h)),h=l,4&n.wrap&&(n.flags?c:tO(c))!==n.check){e.msg="incorrect data check",n.mode=16209;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===o)break t;o--,c+=i[a++]<<d,d+=8}if(4&n.wrap&&c!==(0|n.total)){e.msg="incorrect length check",n.mode=16209;break}c=0,d=0}n.mode=16208;case 16208:k=tC;break t;case 16209:k=tj;break t;case 16210:return tA;default:return tT}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==tw))&&tL(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?ef(n.check,r,h,e.next_out-h):eh(n.check,r,h,e.next_out-h)),e.data_type=n.bits+64*!!n.last+128*(16191===n.mode)+256*(16199===n.mode||16194===n.mode),(0===u&&0===h||t===tw)&&k===tS&&(k=tN),k},inflateEnd:e=>{if(tD(e))return tT;let t=e.state;return t.window&&(t.window=null),e.state=null,tS},inflateGetHeader:(e,t)=>{if(tD(e))return tT;let n=e.state;return(2&n.wrap)==0?tT:(n.head=t,t.done=!1,tS)},inflateSetDictionary:(e,t)=>{let n,i=t.length;return tD(e)||0!==(n=e.state).wrap&&16190!==n.mode?tT:16190===n.mode&&eh(1,t,i,0)!==n.check?tj:tL(e,t,i,i)?(n.mode=16210,tA):(n.havedict=1,tS)}},tB=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tF=Object.prototype.toString,{Z_NO_FLUSH:tU,Z_FINISH:tH,Z_OK:tq,Z_STREAM_END:tW,Z_NEED_DICT:tV,Z_STREAM_ERROR:tZ,Z_DATA_ERROR:tY,Z_MEM_ERROR:tK}=eg;function tQ(e){this.options=e9.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tn,this.strm.avail_out=0;let n=tz.inflateInit2(this.strm,t.windowBits);if(n!==tq||(this.header=new tB,tz.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=tt.string2buf(t.dictionary):"[object ArrayBuffer]"===tF.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(n=tz.inflateSetDictionary(this.strm,t.dictionary))!==tq))throw Error(em[n])}function tJ(e,t){let n=new tQ(t);if(n.push(e),n.err)throw n.msg||em[n.err];return n.result}tQ.prototype.push=function(e,t){let n,i,r,a=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(i=t===~~t?t:!0===t?tH:tU,"[object ArrayBuffer]"===tF.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(n=tz.inflate(a,i))===tV&&o&&((n=tz.inflateSetDictionary(a,o))===tq?n=tz.inflate(a,i):n===tY&&(n=tV));a.avail_in>0&&n===tW&&a.state.wrap>0&&0!==e[a.next_in];)tz.inflateReset(a),n=tz.inflate(a,i);switch(n){case tZ:case tY:case tV:case tK:return this.onEnd(n),this.ended=!0,!1}if(r=a.avail_out,a.next_out&&(0===a.avail_out||n===tW))if("string"===this.options.to){let e=tt.utf8border(a.output,a.next_out),t=a.next_out-e,n=tt.buf2string(a.output,e);a.next_out=t,a.avail_out=s-t,t&&a.output.set(a.output.subarray(e,e+t),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(n!==tq||0!==r){if(n===tW)return n=tz.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},tQ.prototype.onData=function(e){this.chunks.push(e)},tQ.prototype.onEnd=function(e){e===tq&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=e9.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:tG,deflate:tX,deflateRaw:t0,gzip:t1}={Deflate:tp,deflate:tf,deflateRaw:function(e,t){return(t=t||{}).raw=!0,tf(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,tf(e,t)},constants:eg},{Inflate:t2,inflate:t5,inflateRaw:t6,ungzip:t3}={Inflate:tQ,inflate:tJ,inflateRaw:function(e,t){return(t=t||{}).raw=!0,tJ(e,t)},ungzip:tJ,constants:eg};var t8={deflate:tX,inflate:t5};function t4(e){let{open:t,onClose:n}=e,{state:i,dispatch:r}=(0,T.useChoresApp)(),[a,s]=(0,d.useState)(""),[o,l]=(0,d.useState)(""),[u,h]=(0,d.useState)(!1),[p,f]=(0,d.useState)(!1),[m,g]=(0,d.useState)(""),[y,v]=(0,d.useState)(!1),b=(0,d.useRef)(null),x=(0,d.useRef)(null);if(d.default.useEffect(()=>(p&&b.current?(x.current=new D(b.current,e=>{l(e.data),f(!1),x.current&&x.current.stop()},{highlightScanRegion:!0,highlightCodeOutline:!0}),x.current.start()):x.current&&(x.current.stop(),x.current=null),()=>{x.current&&x.current.stop()}),[p]),!t)return null;let w=async()=>{try{let e={children:i.children,tasks:i.tasks,taskInstances:i.taskInstances||[],parentSettings:{pins:i.parentSettings.pins||[],approvals:i.parentSettings.approvals},completedTasks:i.completedTasks,timers:i.timers,timedCompletions:i.timedCompletions},t=JSON.stringify(e),n=t8.deflate(t),r=String.fromCharCode(...n),a=btoa(r);try{let e=await R.default.toDataURL(a,{width:256,margin:2,errorCorrectionLevel:"L"});s(e)}catch(e){console.warn("Compressed data still too large for QR code, showing text instead"),s("TEXT:".concat(a))}}catch(e){console.error("QR Code generation error:",e),g("Failed to generate configuration data.")}};return(0,c.jsxs)("div",{className:"modal-overlay",onClick:n,children:[(0,c.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:"ðŸ“± Sync Data"}),(0,c.jsx)("span",{className:"close",onClick:e=>{e.stopPropagation(),n()},children:"Ã—"})]}),(0,c.jsxs)("div",{className:"modal-body",children:[m&&(0,c.jsxs)("div",{className:"error-message",style:{marginBottom:"20px"},children:[m,(0,c.jsx)("button",{style:{float:"right",background:"none",border:"none",cursor:"pointer"},onClick:()=>g(""),children:"Ã—"})]}),(0,c.jsxs)("div",{className:"sync-section",children:[(0,c.jsx)("h3",{children:"Share Configuration"}),(0,c.jsx)("p",{children:"Generate configuration data to share with other devices:"}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:w,children:"Generate Config Data"}),a&&(0,c.jsx)("div",{className:"qr-container",children:a.startsWith("TEXT:")?(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"10px"},children:"Configuration data (too large for QR code):"}),(0,c.jsx)("textarea",{readOnly:!0,value:a.substring(5),style:{width:"100%",height:"100px",fontFamily:"monospace",fontSize:"12px"}}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:()=>navigator.clipboard.writeText(a.substring(5)),style:{marginTop:"10px"},children:"Copy to Clipboard"})]}):(0,c.jsxs)("div",{children:[(0,c.jsx)("img",{src:a,alt:"QR Code for configuration data",style:{maxWidth:"100%",height:"auto",border:"1px solid #e2e8f0"}}),(0,c.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"10px"},children:"Scan this QR code with another device to import the configuration"})]})})]}),(0,c.jsxs)("div",{className:"sync-section",children:[(0,c.jsx)("h3",{children:"Import Configuration"}),(0,c.jsxs)("div",{className:"import-options",children:[(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>f(!p),children:p?"Stop":"ðŸ“· Scan QR Code"}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:()=>h(!u),children:u?"Hide":"âœï¸ Manual Entry"})]}),p&&(0,c.jsxs)("div",{className:"qr-scanner",style:{marginTop:"15px"},children:[(0,c.jsx)("video",{ref:b,style:{width:"100%",maxWidth:"400px",height:"auto"}}),(0,c.jsx)("p",{style:{textAlign:"center",marginTop:"10px"},children:"Position QR code within the camera view"})]}),u&&(0,c.jsxs)("div",{style:{marginTop:"15px"},children:[(0,c.jsx)("p",{children:"Paste configuration data from another device:"}),(0,c.jsx)("textarea",{placeholder:"Paste configuration data here...",value:o,onChange:e=>l(e.target.value),style:{width:"100%",height:"120px",fontFamily:"monospace"}}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!o.trim())return void g("Please paste configuration data");try{let e;try{let t=atob(o),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);let i=t8.inflate(n),r=String.fromCharCode(...i);e=JSON.parse(r)}catch(t){try{let t=decodeURIComponent(atob(o));e=JSON.parse(t)}catch(t){e=JSON.parse(o)}}if(!e.children)throw Error("Invalid configuration format");let t=e.tasks||[],n={children:e.children||[],tasks:t,taskInstances:e.taskInstances||[],parentSettings:e.parentSettings||i.parentSettings,completedTasks:e.completedTasks||{},timers:e.timers||{},timedCompletions:e.timedCompletions||[]};r({type:"SET_STATE",payload:n}),l(""),g(""),v(!0)}catch(e){console.error("Import error:",e),g("Error importing configuration. Please check the data format.")}},children:"Import Data"})]})]})]}),(0,c.jsx)("div",{className:"modal-footer",children:(0,c.jsx)("button",{className:"btn btn-secondary",onClick:n,children:"Close"})})]}),(0,c.jsx)(j.default,{open:y,onClose:()=>{v(!1),n()},title:"Success",message:"Configuration imported successfully!"})]})}function t9(e){let{open:t,onClose:n,child:i,onSave:r,onDelete:a}=e,{state:s}=(0,T.useChoresApp)(),[o,l]=(0,d.useState)(""),[u,h]=(0,d.useState)(""),[p,f]=(0,d.useState)(!1),[m,g]=(0,d.useState)(null),[y,v]=(0,d.useState)(!1);return(d.default.useEffect(()=>{i&&(l(i.name),h(i.blockchainAddress||""))},[i]),t&&i)?(0,c.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,c.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:"Edit Child"}),(0,c.jsx)("span",{className:"close",onClick:e=>{e.stopPropagation(),n()},children:"Ã—"})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsxs)("form",{id:"edit-child-form",onSubmit:e=>{var t,n;e.preventDefault();let a={...i,name:o,blockchainAddress:u||void 0},l=!!(null==(n=s.parentSettings)||null==(t=n.approvals)?void 0:t.editTasks),c=(s.parentSettings.pins||[]).length>0;if(l)return c?(g(a),void f(!0)):void v(!0);r(a)},children:[(0,c.jsxs)("label",{children:["Name:",(0,c.jsx)("input",{value:o,onChange:e=>l(e.target.value),required:!0,placeholder:"Enter child's name"})]}),(0,c.jsxs)("label",{children:[(0,c.jsx)("span",{children:"Blockchain Address / ENS:"}),(0,c.jsx)("input",{value:u,onChange:e=>h(e.target.value),placeholder:"0x or ENS name (optional)"})]}),u&&u.trim()&&(0,c.jsx)("div",{style:{marginTop:"-8px",marginBottom:"12px",marginLeft:"auto",width:"fit-content"},children:(0,c.jsx)("a",{href:"https://etherscan.io/address/".concat(u.trim()),target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.9rem",color:"#4299e1",textDecoration:"none",whiteSpace:"nowrap",padding:"4px 8px",borderRadius:"4px",border:"1px solid #4299e1",transition:"all 0.2s",display:"inline-block"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4299e1",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="#4299e1"},children:"ðŸ”— View on Etherscan"})}),(0,c.jsxs)("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f5f5f5",borderRadius:"6px",border:"1px solid #e0e0e0"},children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,c.jsx)("span",{style:{fontWeight:600,color:"#666"},children:"Stars Earned:"}),(0,c.jsxs)("span",{style:{fontSize:"1.2rem",fontWeight:600},children:["â­ ",i.stars]})]}),(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)("span",{style:{fontWeight:600,color:"#666"},children:"Money Earned:"}),(0,c.jsxs)("span",{style:{fontSize:"1.2rem",fontWeight:600},children:["ðŸ’° $",i.money.toFixed(2)]})]})]})]})}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"submit",form:"edit-child-form",className:"btn btn-primary",children:"Save"}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"Cancel"}),(0,c.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>a(i.id),children:"Delete"})]}),(0,c.jsx)(N.default,{open:p,onClose:()=>{f(!1),g(null)},onSuccess:()=>{m&&(r(m),g(null)),f(!1),n()}}),(0,c.jsx)(j.default,{open:y,onClose:()=>v(!1),title:"Approval Required",message:"Editing requires parent approval, but no approvers are defined. Please add an approver in Settings first."})]})}):null}function t7(e){let{open:t,onClose:n,onAdd:i}=e,[r,a]=(0,d.useState)(""),[s,o]=(0,d.useState)("");return t?(0,c.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,c.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),"data-tour":"add-child-modal",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:"Add Child"}),(0,c.jsx)("span",{className:"close",onClick:e=>{e.stopPropagation(),n()},children:"Ã—"})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsxs)("form",{id:"add-child-form",onSubmit:e=>{e.preventDefault(),i({name:r,blockchainAddress:s||void 0}),a(""),o(""),n()},children:[(0,c.jsxs)("label",{children:["Name:",(0,c.jsx)("input",{value:r,onChange:e=>a(e.target.value),required:!0,placeholder:"Enter child's name","data-tour":"child-name-input"})]}),(0,c.jsxs)("label",{children:[(0,c.jsx)("span",{children:"Blockchain Address / ENS:"}),(0,c.jsx)("input",{value:s,onChange:e=>o(e.target.value),placeholder:"0x or ENS name (optional)"})]}),s&&s.trim()&&(0,c.jsx)("div",{style:{marginTop:"-8px",marginBottom:"12px",marginLeft:"auto",width:"fit-content"},children:(0,c.jsx)("a",{href:"https://etherscan.io/address/".concat(s.trim()),target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.9rem",color:"#4299e1",textDecoration:"none",whiteSpace:"nowrap",padding:"4px 8px",borderRadius:"4px",border:"1px solid #4299e1",transition:"all 0.2s",display:"inline-block"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4299e1",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="#4299e1"},children:"ðŸ”— View on Etherscan"})})]})}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"submit",form:"add-child-form",className:"btn btn-primary","data-tour":"add-child-submit-button",children:"Add"}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"Cancel"})]})]})}):null}var ne=e.i(83627);let nt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function nn(e){let{open:t,onClose:n,initialTask:i=null,onSave:r,editOption:a=null,editInstanceId:s=null}=e,{state:o,dispatch:l}=(0,T.useChoresApp)(),[u,h]=(0,d.useState)(""),[p,f]=(0,d.useState)(""),[m,g]=(0,d.useState)("#cccccc"),[y,v]=(0,d.useState)("recurring"),[b,x]=(0,d.useState)(!1),[w,_]=(0,d.useState)(1),[k,S]=(0,d.useState)(0),[C,A]=(0,d.useState)(!1),[I,O]=(0,d.useState)(null),[R,D]=(0,d.useState)([]),[P,M]=(0,d.useState)("single-child"),[$,L]=(0,d.useState)([]),[z,B]=(0,d.useState)(void 0),[F,U]=(0,d.useState)("daily"),[H,q]=(0,d.useState)(1),[W,V]=(0,d.useState)([1]),[Z,Y]=(0,d.useState)(1),[K,Q]=(0,d.useState)("17:00"),[J,G]=(0,d.useState)(!1),[X,ee]=(0,d.useState)("0 17 * * *"),[et,en]=(0,d.useState)(new Date().toISOString().split("T")[0]),[ei,er]=(0,d.useState)("17:00"),[ea,es]=(0,d.useState)(5),[eo,el]=(0,d.useState)(50),[ec,ed]=(0,d.useState)(!1),[eu,eh]=(0,d.useState)(()=>new Date().toISOString().split("T")[0]),[ep,ef]=(0,d.useState)(()=>"undefined"!=typeof Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:"UTC"),[em,eg]=(0,d.useState)("never"),[ey,ev]=(0,d.useState)(()=>new Date().toISOString().split("T")[0]),[eb,ex]=(0,d.useState)(10),[ew,e_]=(0,d.useState)([]),[ek,eS]=(0,d.useState)(!1),[eC,eE]=(0,d.useState)(null),[eT,ej]=(0,d.useState)(!1);(0,d.useEffect)(()=>{let e=new Date().toISOString().split("T")[0];if(i){var t,n,r,a,s,o,l,c,d,u,p,m,y;O(String(i.id)),h(i.title||""),f(i.emoji||""),g(i.color||"#cccccc"),v(i.type||"recurring"),_("number"==typeof i.stars?i.stars:1),S("number"==typeof i.money?i.money:0),A("boolean"==typeof i.requirePin&&i.requirePin);let b=(null==(t=i.assignment)?void 0:t.childIds)||(null==(n=i.rotation)?void 0:n.assignedChildIds)||i.assignedChildIds||(i.assignedTo?[parseInt(i.assignedTo,10)]:[]);D(Array.isArray(b)?Array.from(new Set(b.filter(e=>"number"==typeof e&&!isNaN(e)))):[]);let w=null==(r=i.assignment)?void 0:r.strategy;if(M((null==(a=i.rotation)?void 0:a.mode)||("simultaneous"===w?"simultaneous":"round_robin"===w?"round-robin":"single-child")||(b&&b.length>1?"round-robin":"single-child")),L((null==(s=i.rotation)?void 0:s.rotationOrder)||[]),B(null==(o=i.rotation)?void 0:o.linkedTaskId),null==(l=i.schedule)?void 0:l.cronExpression)G(!0),ee(i.schedule.cronExpression);else if(null==(c=i.schedule)?void 0:c.rule){G(!1);let t=i.schedule.rule;U(t.frequency),q(t.interval||1),t.byWeekday&&V(t.byWeekday),t.byMonthday&&t.byMonthday.length>0&&Y(t.byMonthday[0]),(t.startTime||t.timeOfDay)&&Q(t.startTime||t.timeOfDay||K),eh(t.startDate||e),ef(i.schedule.timezone||t.timezone||ep),(null==(u=t.end)?void 0:u.type)==="afterDate"?(eg("onDate"),ev(t.end.date||e)):(null==(p=t.end)?void 0:p.type)==="afterOccurrences"?(eg("afterOccurrences"),ex(t.end.occurrences||10)):(eg("never"),ev(e))}else if(i.recurring){G(!1);let t=i.recurring.cadence||"daily";U("custom-days"===t?"weekly":t),"custom-days"===t&&i.recurring.customDays&&V(i.recurring.customDays),i.recurring.timeOfDay&&Q(i.recurring.timeOfDay),eh(e),eg("never"),ev(e),ef("undefined"!=typeof Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:"UTC")}if(null==(d=i.oneOff)?void 0:d.dueDate){let e=i.oneOff.dueDate;en(e.split("T")[0]),er((null==(m=e.split("T")[1])?void 0:m.slice(0,5))||"17:00")}i.timed?(x(!0),es(Math.round((i.timed.allowedSeconds||60)/60)),el((null!=(y=i.timed.latePenaltyPercent)?y:0)*100),ed(!!i.timed.autoApproveOnStop)):x(!1)}else O(null),h(""),f(""),g("#cccccc"),v("recurring"),_(1),S(0),A(!1),x(!1),es(5),el(50),ed(!1),L([]),B(void 0),D([]),M("single-child"),U("daily"),q(1),V([1]),Y(1),Q("17:00"),G(!1),ee("0 17 * * *"),en(new Date().toISOString().split("T")[0]),er("17:00"),eh(e),eg("never"),ev(e),ex(10),e_([]),ef("undefined"!=typeof Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:"UTC")},[i,t]);let[eA,eN]=(0,d.useState)(!1);(0,d.useEffect)(()=>(eN(!0),()=>eN(!1)),[]),(0,d.useEffect)(()=>{if("instance"===a&&s){let e=o.taskInstances.find(e=>e.id===s);e&&e.childId&&D([e.childId])}},[a,s,o.taskInstances]);let eI=(0,d.useMemo)(()=>{if("oneoff"!==y)return ni({useCron:J,cronExpression:X,frequency:F,interval:H,selectedWeekdays:W,selectedMonthDay:Z,timeOfDay:K,startDate:eu,timezone:ep,endMode:em,endDate:ey,occurrenceCount:eb})},[y,J,X,F,H,W,Z,K,eu,ep,em,ey,eb]);if((0,d.useEffect)(()=>{if(!eI)return void e_([]);try{let e=(0,ne.getNextExecutionDateTimes)(eI,eu,3);e_(e)}catch(e){e_([])}},[eI,eu]),(0,d.useEffect)(()=>{"round-robin"===P&&R.length>0?0!==$.length&&R.every(e=>$.includes(e))||L([...$.filter(e=>R.includes(e)),...R.filter(e=>!$.includes(e))]):"round-robin"!==P&&$.length>0&&L([])},[P,R.length]),(0,d.useEffect)(()=>{if(z&&"round-robin"===P&&R.length>0){var e;let t=o.tasks.find(e=>e.id===z);if(null==t||null==(e=t.rotation)?void 0:e.rotationOrder){let e=t.rotation.rotationOrder.filter(e=>R.includes(e)),n=R.filter(t=>!e.includes(t));L([...e,...n])}}},[z]),!t||!eA)return null;let eO=(e,t)=>{let n=$.indexOf(e);if(-1===n)return;let i="up"===t?n-1:n+1;if(i<0||i>=$.length)return;let r=[...$];[r[n],r[i]]=[r[i],r[n]],L(r)},eR=()=>{var e,t;let c=null!=I?I:"task_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8)),d=new Date().toISOString().split("T")[0],h=R.length>0?R:o.children.map(e=>e.id),p="oneoff"===y?void 0:eI,f=(null==i||null==(e=i.assignment)?void 0:e.rotationStartDate)||(null==i||null==(t=i.rotation)?void 0:t.startDate)||d,m={id:c,title:u,description:"",createdAt:new Date().toISOString(),enabled:!0,requirePin:C,stars:Number(w),money:Number(k),type:y,assignedChildIds:h,rotation:{mode:P,assignedChildIds:h,startDate:f,...$.length>0&&{rotationOrder:$},...z&&{linkedTaskId:z}},assignment:{strategy:"simultaneous"===P?"simultaneous":"round-robin"===P?"round_robin":"single",childIds:h,rotationStartDate:f,allowSimultaneous:"simultaneous"===P},...p?{schedule:p}:{},...b?{timed:{allowedSeconds:Math.round(60*ea),latePenaltyPercent:eo/100,autoApproveOnStop:ec,allowNegative:!1}}:{},..."oneoff"===y?{oneOff:{dueDate:function(e,t){let n=e||new Date().toISOString().split("T")[0],[i="00",r="00"]=(t||"00:00").split(":"),a=parseInt(i,10),s=parseInt(r,10),o=new Date("".concat(n,"T00:00:00"));return o.setHours(Number.isFinite(a)?a:0,Number.isFinite(s)?s:0,0,0),o.toISOString()}(et,ei)},completed:!1}:{},..."oneoff"!==y&&!J?{recurring:function(e,t,n){switch(e){case"weekly":return t.length>0?{cadence:"custom-days",customDays:t,timeOfDay:n}:{cadence:"weekly",timeOfDay:n};case"monthly":case"yearly":return{cadence:"monthly",timeOfDay:n};default:return{cadence:"daily",timeOfDay:n}}}(F,W,K)}:{}};if(I)if("instance"===a&&s){let e=o.taskInstances.find(e=>e.id===s);if(e){let t=R.length>0?R[0]:e.childId;l({type:"UPDATE_TASK_INSTANCE",payload:{...e,childId:t,stars:Number(w),money:Number(k)}})}}else l({type:"UPDATE_TASK",payload:m}),r&&r(m);else l({type:"ADD_TASK",payload:m});n()},eD=o.children.length>0&&R.length===o.children.length,eP="simultaneous"===P?"Every selected child receives this task each time it runs.":"round-robin"===P?"Selected children will take turns automatically based on the schedule.":"Task will stay assigned to the first selected child unless you reassign it.",eM=(0,c.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,c.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),"data-tour":"task-modal",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:I?"Edit Task":"Create Task"}),(0,c.jsx)("span",{className:"close",onClick:e=>{e.stopPropagation(),n()},children:"Ã—"})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsxs)("form",{id:"task-form",onSubmit:e=>{if(e.preventDefault(),I){var t,n;let e=!!(null==(n=o.parentSettings)||null==(t=n.approvals)?void 0:t.editTasks),i=(o.parentSettings.pins||[]).length>0;if(e)return i?(eE({}),void eS(!0)):void ej(!0)}eR()},children:[(0,c.jsxs)("label",{children:["Title:",(0,c.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),required:!0,placeholder:"Enter task title","data-tour":"task-title-input"})]}),(0,c.jsxs)("label",{children:["Emoji:",(0,c.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),maxLength:2,placeholder:"ðŸ“"})]}),(0,c.jsxs)("label",{children:["Color:",(0,c.jsx)("input",{type:"color",value:m,onChange:e=>g(e.target.value)})]}),(0,c.jsxs)("label",{children:["Type:",(0,c.jsxs)("select",{value:y,onChange:e=>v(e.target.value),children:[(0,c.jsx)("option",{value:"recurring",children:"Recurring"}),(0,c.jsx)("option",{value:"oneoff",children:"One-off"})]})]}),(0,c.jsxs)("label",{children:["Star Reward:",(0,c.jsx)("input",{type:"number",value:w,min:-10,onChange:e=>_(Number(e.target.value))})]}),(0,c.jsxs)("label",{children:["Money Reward:",(0,c.jsx)("input",{type:"number",value:k,step:"0.01",onChange:e=>S(Number(e.target.value))})]}),(0,c.jsxs)("label",{children:["Require PIN:",(0,c.jsx)("input",{type:"checkbox",checked:C,onChange:e=>A(e.target.checked)})]}),(0,c.jsxs)("fieldset",{className:"form-section",children:[(0,c.jsx)("legend",{children:"Assignment"}),0===o.children.length?(0,c.jsx)("p",{className:"helper-text",children:"Add children first to assign tasks."}):(0,c.jsxs)("div",{className:"child-multi-select",children:[(0,c.jsxs)("div",{className:"assignment-actions",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-ghost",onClick:()=>{R.length===o.children.length?D([]):D(o.children.map(e=>e.id))},children:eD?"Deselect all":"Select all"}),(0,c.jsx)("button",{type:"button",className:"btn btn-ghost",onClick:()=>D([]),disabled:0===R.length,children:"Clear"})]}),o.children.map(e=>(0,c.jsxs)("label",{className:"checkbox-item",children:[(0,c.jsx)("input",{type:"checkbox",checked:R.includes(e.id),onChange:()=>{var t;return t=e.id,void D(e=>{let n=e.includes(t)?e.filter(e=>e!==t):[...e,t];return"round-robin"===P&&L([...$.filter(e=>n.includes(e)),...n.filter(e=>!$.includes(e))]),n})}}),e.name]},e.id))]}),(0,c.jsxs)("label",{children:[(0,c.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:["Rotation Mode:",(0,c.jsx)("span",{title:"How the task is assigned: Single child (stays with one), Rotate (takes turns), or Simultaneous (all children get it).",style:{cursor:"help",fontSize:"14px",color:"#666",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px",borderRadius:"50%",background:"#e2e8f0",lineHeight:"1"},children:"â„¹ï¸"})]}),(0,c.jsxs)("select",{value:P,onChange:e=>M(e.target.value),children:[(0,c.jsx)("option",{value:"single-child",children:"Single child"}),(0,c.jsx)("option",{value:"round-robin",children:"Rotate across children"}),(0,c.jsx)("option",{value:"simultaneous",children:"Assign to all selected children"})]})]}),(0,c.jsx)("p",{className:"helper-text",children:eP}),"round-robin"===P&&R.length>1&&(0,c.jsxs)("div",{className:"rotation-order-section",children:[(0,c.jsx)("label",{children:"Rotation Order:"}),(0,c.jsx)("p",{className:"helper-text",children:"Drag to reorder which child the task rotates to first, second, third, etc."}),(0,c.jsx)("div",{className:"rotation-order-list",children:$.length>0?$.map((e,t)=>{let n=o.children.find(t=>t.id===e);return n?(0,c.jsxs)("div",{className:"rotation-order-item",children:[(0,c.jsxs)("span",{className:"rotation-order-number",children:[t+1,"."]}),(0,c.jsx)("span",{className:"rotation-order-name",children:n.name}),(0,c.jsxs)("div",{className:"rotation-order-controls",children:[(0,c.jsx)("button",{type:"button",className:"btn-icon",onClick:()=>eO(e,"up"),disabled:0===t,title:"Move up",children:"â†‘"}),(0,c.jsx)("button",{type:"button",className:"btn-icon",onClick:()=>eO(e,"down"),disabled:t===$.length-1,title:"Move down",children:"â†“"})]})]},e):null}):(0,c.jsx)("p",{className:"helper-text",children:"Select children above to set rotation order"})})]}),"round-robin"===P&&(0,c.jsxs)("label",{children:["Link rotation with another task:",(0,c.jsxs)("select",{value:z||"",onChange:e=>B(e.target.value||void 0),children:[(0,c.jsx)("option",{value:"",children:"None (independent rotation)"}),o.tasks.filter(e=>{var t;return e.id!==I&&(null==(t=e.rotation)?void 0:t.mode)==="round-robin"}).map(e=>(0,c.jsx)("option",{value:e.id,children:e.title||"Untitled task"},e.id))]})]})]}),"oneoff"!==y&&(0,c.jsxs)("fieldset",{className:"form-section",children:[(0,c.jsx)("legend",{children:"Schedule"}),(0,c.jsxs)("label",{className:"checkbox-item",children:[(0,c.jsx)("input",{type:"checkbox",checked:J,onChange:e=>G(e.target.checked)}),"Use advanced cron expression"]}),J?(0,c.jsxs)("label",{children:["Cron Expression:",(0,c.jsx)("input",{type:"text",value:X,onChange:e=>ee(e.target.value),placeholder:"0 17 * * *"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("label",{children:[(0,c.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:["Frequency:",(0,c.jsx)("span",{title:"How often the task should repeat: Daily, Weekly, Monthly, or Yearly. Combined with Interval, this determines the schedule.",style:{cursor:"help",fontSize:"14px",color:"#666",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px",borderRadius:"50%",background:"#e2e8f0",lineHeight:"1"},children:"â„¹ï¸"})]}),(0,c.jsxs)("select",{value:F,onChange:e=>U(e.target.value),children:[(0,c.jsx)("option",{value:"daily",children:"Daily"}),(0,c.jsx)("option",{value:"weekly",children:"Weekly"}),(0,c.jsx)("option",{value:"monthly",children:"Monthly"}),(0,c.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,c.jsxs)("label",{children:[(0,c.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:["Interval:",(0,c.jsx)("span",{title:"How often the task repeats. For example, '2' with 'Daily' means every 2 days, or '3' with 'Weekly' means every 3 weeks.",style:{cursor:"help",fontSize:"14px",color:"#666",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px",borderRadius:"50%",background:"#e2e8f0",lineHeight:"1"},children:"â„¹ï¸"})]}),(0,c.jsx)("input",{type:"number",min:1,value:H,onChange:e=>q(Math.max(1,Number(e.target.value))),title:"How often the task repeats. For example, '2' with 'Daily' means every 2 days."})]}),(0,c.jsxs)("label",{children:["Start Date:",(0,c.jsx)("input",{type:"date",value:eu,onChange:e=>eh(e.target.value)})]}),"weekly"===F&&(0,c.jsx)("div",{className:"weekday-picker",children:nt.map((e,t)=>(0,c.jsxs)("label",{className:"checkbox-item",children:[(0,c.jsx)("input",{type:"checkbox",checked:W.includes(t),onChange:()=>{V(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t].sort((e,t)=>e-t))}}),e]},e))}),"monthly"===F&&(0,c.jsxs)("label",{children:["Day of month:",(0,c.jsx)("input",{type:"number",min:1,max:31,value:Z,onChange:e=>Y(Math.min(31,Math.max(1,Number(e.target.value))))})]}),(0,c.jsxs)("label",{children:["Time of day:",(0,c.jsx)("input",{type:"time",value:K,onChange:e=>Q(e.target.value)})]}),(0,c.jsxs)("fieldset",{className:"form-subsection",children:[(0,c.jsx)("legend",{children:"Ends"}),(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,c.jsxs)("label",{className:"radio-item",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,c.jsx)("input",{type:"radio",name:"end-mode",checked:"never"===em,onChange:()=>eg("never")}),(0,c.jsx)("span",{children:"Never"})]}),(0,c.jsxs)("label",{className:"radio-item",style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[(0,c.jsx)("input",{type:"radio",name:"end-mode",checked:"onDate"===em,onChange:()=>eg("onDate")}),(0,c.jsx)("span",{children:"On"}),(0,c.jsx)("input",{type:"date",value:ey,onChange:e=>ev(e.target.value),disabled:"onDate"!==em,style:{marginLeft:"4px"}})]}),(0,c.jsxs)("label",{className:"radio-item",style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[(0,c.jsx)("input",{type:"radio",name:"end-mode",checked:"afterOccurrences"===em,onChange:()=>eg("afterOccurrences")}),(0,c.jsx)("span",{children:"After"}),(0,c.jsx)("input",{type:"number",min:1,value:eb,onChange:e=>ex(Math.max(1,Number(e.target.value))),disabled:"afterOccurrences"!==em,style:{width:"60px",marginLeft:"4px"}}),(0,c.jsx)("span",{children:"occurrences"})]})]})]}),(0,c.jsx)("button",{type:"button",className:"btn btn-ghost",onClick:()=>{let e=ni({useCron:!1,cronExpression:X,frequency:F,interval:H,selectedWeekdays:W,selectedMonthDay:Z,timeOfDay:K,startDate:eu,timezone:ep,endMode:em,endDate:ey,occurrenceCount:eb});if(null==e?void 0:e.rule){let t=(0,ne.buildCronExpressionFromRule)(e.rule);t&&(ee(t),G(!0))}},children:"Generate cron expression"})]}),(0,c.jsxs)("label",{children:["Timezone:",(0,c.jsx)("input",{type:"text",value:ep,onChange:e=>ef(e.target.value),placeholder:"e.g., America/Chicago"})]}),eI&&(0,c.jsxs)("div",{className:"schedule-preview",children:[(0,c.jsx)("p",{className:"helper-text",children:(0,ne.describeSchedule)(eI)}),ew.length>0?(0,c.jsx)("ul",{children:ew.map(e=>(0,c.jsx)("li",{children:function(e){let t=new Date(e);return Number.isNaN(t.getTime())?e:"undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat?Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(t):t.toISOString()}(e)},e))}):(0,c.jsx)("p",{className:"helper-text",children:"No upcoming occurrences within the preview window."})]})]}),"oneoff"===y&&(0,c.jsxs)("fieldset",{className:"form-section",children:[(0,c.jsx)("legend",{children:"Due Date"}),(0,c.jsxs)("label",{children:["Date:",(0,c.jsx)("input",{type:"date",value:et,onChange:e=>en(e.target.value)})]}),(0,c.jsxs)("label",{children:["Time:",(0,c.jsx)("input",{type:"time",value:ei,onChange:e=>er(e.target.value)})]})]}),(0,c.jsxs)("fieldset",{style:{border:"1px solid #e2e8f0",borderRadius:"6px",padding:"12px",marginTop:"12px"},children:[(0,c.jsx)("legend",{style:{padding:"0 8px",fontSize:"0.9rem",fontWeight:600,color:"#4a5568"},children:"â±ï¸ Timer Settings"}),(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,c.jsx)("input",{type:"checkbox",checked:b,onChange:e=>x(e.target.checked)}),(0,c.jsx)("span",{children:"This is a timed task"})]}),b&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("label",{children:["Allowed Minutes:",(0,c.jsx)("input",{type:"number",value:ea,min:1,onChange:e=>es(Number(e.target.value))})]}),(0,c.jsxs)("label",{children:["Late Penalty (%):",(0,c.jsx)("input",{type:"number",value:eo,min:0,max:100,onChange:e=>el(Number(e.target.value))})]}),(0,c.jsxs)("label",{children:["Auto-approve on Stop:",(0,c.jsx)("input",{type:"checkbox",checked:ec,onChange:e=>ed(e.target.checked)})]})]})]})]})}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{type:"submit",form:"task-form",className:"btn btn-primary","data-tour":"task-submit-button",children:I?"Save":"Create"}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"Cancel"})]}),(0,c.jsx)(N.default,{open:ek,onClose:()=>{eS(!1),eE(null)},onSuccess:e=>{eS(!1),eC&&(eR(),eE(null))},message:"Enter a parent PIN to save changes to this task."}),(0,c.jsx)(j.default,{open:eT,onClose:()=>ej(!1),title:"Approval Required",message:"Editing tasks requires parent approval, but no approvers are defined. Please add an approver in Settings first."})]})});return(0,E.createPortal)(eM,document.body)}function ni(e){if(e.useCron){let t=e.cronExpression.trim();if(!t)return;return{cronExpression:t,timezone:e.timezone}}let t={frequency:e.frequency,interval:Math.max(1,e.interval),startDate:e.startDate,startTime:e.timeOfDay,timezone:e.timezone};return"weekly"===e.frequency&&(t.byWeekday=e.selectedWeekdays.length>0?e.selectedWeekdays:void 0),"monthly"===e.frequency&&(t.byMonthday=[e.selectedMonthDay]),"onDate"===e.endMode?t.end={type:"afterDate",date:e.endDate}:"afterOccurrences"===e.endMode&&(t.end={type:"afterOccurrences",occurrences:Math.max(1,e.occurrenceCount)}),{rule:t,dueTime:e.timeOfDay,timezone:e.timezone}}function nr(e){return e instanceof HTMLElement}function na(e){return"function"==typeof e}function ns(e){return"string"==typeof e}function no(e){return void 0===e}class nl{on(e,t,n){var i;let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return no(this.bindings)&&(this.bindings={}),no(this.bindings[e])&&(this.bindings[e]=[]),null==(i=this.bindings[e])||i.push({handler:t,ctx:n,once:r}),this}once(e,t,n){return this.on(e,t,n,!0)}off(e,t){if(no(this.bindings)||no(this.bindings[e]))return this;if(no(t))delete this.bindings[e];else{var n;null==(n=this.bindings[e])||n.forEach((n,i)=>{if(n.handler===t){var r;null==(r=this.bindings[e])||r.splice(i,1)}})}return this}trigger(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return!no(this.bindings)&&this.bindings[e]&&(null==(t=this.bindings[e])||t.forEach((t,n)=>{let{ctx:r,handler:a,once:s}=t;if(a.apply(r||this,i),s){var o;null==(o=this.bindings[e])||o.splice(n,1)}})),this}}function nc(){return(nc=Object.assign.bind()).apply(null,arguments)}function nd(e,t){if(null==e)return{};var n={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}let nu={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};function nh(e,t){return t}function np(e,t){return e.filter(e=>void 0!==e)}function nf(e){return"object"!=typeof e||null===e?0:Array.isArray(e)?2:!function(e){if(!ng.has(Object.prototype.toString.call(e)))return!1;let{constructor:t}=e;if(void 0===t)return!0;let n=t.prototype;return null!==n&&"object"==typeof n&&!!ng.has(Object.prototype.toString.call(n))&&!!n.hasOwnProperty("isPrototypeOf")}(e)?e instanceof Set?3:e instanceof Map?4:5:1}function nm(e){return{*[Symbol.iterator](){for(let t of e)for(let e of t)yield e}}}nu.defaultMerge,function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"}(l||(l={}));let ng=new Set(["[object Object]","[object Module]"]),ny={mergeRecords:function(e,t,n){let i={};for(let r of function(e){let t=new Set;for(let n of e)for(let e of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(e);return t}(e)){let a=[];for(let t of e)"object"==typeof t&&Object.prototype.propertyIsEnumerable.call(t,r)&&a.push(t[r]);if(0===a.length)continue;let s=t.metaDataUpdater(n,{key:r,parents:e}),o=nb(a,t,s);o!==nu.skip&&("__proto__"===r?Object.defineProperty(i,r,{value:o,configurable:!0,enumerable:!0,writable:!0}):i[r]=o)}return i},mergeArrays:function(e){return e.flat()},mergeSets:function(e){return new Set(nm(e))},mergeMaps:function(e){return new Map(nm(e))},mergeOthers:function(e){return e.at(-1)}};function nv(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(function(e,t){var n,i,r,a,s;let o=(n=e,i=l,{defaultMergeFunctions:ny,mergeFunctions:nc({},ny,Object.fromEntries(Object.entries(n).filter(e=>{let[t,n]=e;return Object.hasOwn(ny,t)}).map(e=>{let[t,n]=e;return!1===n?[t,ny.mergeOthers]:[t,n]}))),metaDataUpdater:null!=(r=n.metaDataUpdater)?r:nh,deepmerge:i,useImplicitDefaultMerging:null!=(a=n.enableImplicitDefaultMerging)&&a,filterValues:!1===n.filterValues?void 0:null!=(s=n.filterValues)?s:np,actions:nu});function l(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return nb(n,o,t)}return l})({})(...t)}function nb(e,t,n){var i;let r=null!=(i=null==t.filterValues?void 0:t.filterValues(e,n))?i:e;if(0===r.length)return;if(1===r.length)return nx(r,t,n);let a=nf(r[0]);if(0!==a&&5!==a){for(let e=1;e<r.length;e++)if(nf(r[e])!==a)return nx(r,t,n)}switch(a){case 1:var s=r,o=t,l=n;let c=o.mergeFunctions.mergeRecords(s,o,l);return c===nu.defaultMerge||o.useImplicitDefaultMerging&&void 0===c&&o.mergeFunctions.mergeRecords!==o.defaultMergeFunctions.mergeRecords?o.defaultMergeFunctions.mergeRecords(s,o,l):c;case 2:var d=r,u=t,h=n;let p=u.mergeFunctions.mergeArrays(d,u,h);return p===nu.defaultMerge||u.useImplicitDefaultMerging&&void 0===p&&u.mergeFunctions.mergeArrays!==u.defaultMergeFunctions.mergeArrays?u.defaultMergeFunctions.mergeArrays(d):p;case 3:var f=r,m=t,g=n;let y=m.mergeFunctions.mergeSets(f,m,g);return y===nu.defaultMerge||m.useImplicitDefaultMerging&&void 0===y&&m.mergeFunctions.mergeSets!==m.defaultMergeFunctions.mergeSets?m.defaultMergeFunctions.mergeSets(f):y;case 4:var v=r,b=t,x=n;let w=b.mergeFunctions.mergeMaps(v,b,x);return w===nu.defaultMerge||b.useImplicitDefaultMerging&&void 0===w&&b.mergeFunctions.mergeMaps!==b.defaultMergeFunctions.mergeMaps?b.defaultMergeFunctions.mergeMaps(v):w;default:return nx(r,t,n)}}function nx(e,t,n){let i=t.mergeFunctions.mergeOthers(e,t,n);return i===nu.defaultMerge||t.useImplicitDefaultMerging&&void 0===i&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):i}function nw(e){let t=Object.getOwnPropertyNames(e.constructor.prototype);for(let n=0;n<t.length;n++){let i=t[n],r=e[i];"constructor"!==i&&"function"==typeof r&&(e[i]=r.bind(e))}return e}function n_(e){return ns(e)&&""!==e?"-"!==e.charAt(e.length-1)?"".concat(e,"-"):e:""}function nk(e){return null==e||!e.element||!e.on}function nS(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}let nC=["top","right","bottom","left"].reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),nE=Math.min,nT=Math.max,nj=Math.round,nA=Math.floor,nN=e=>({x:e,y:e}),nI={left:"right",right:"left",bottom:"top",top:"bottom"},nO={start:"end",end:"start"};function nR(e,t){return"function"==typeof e?e(t):e}function nD(e){return e.split("-")[0]}function nP(e){return e.split("-")[1]}function nM(e){return"x"===e?"y":"x"}function n$(e){return"y"===e?"height":"width"}function nL(e){return["top","bottom"].includes(nD(e))?"y":"x"}function nz(e,t,n){void 0===n&&(n=!1);let i=nP(e),r=nM(nL(e)),a=n$(r),s="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=nF(s)),[s,nF(s)]}function nB(e){return e.replace(/start|end/g,e=>nO[e])}function nF(e){return e.replace(/left|right|bottom|top/g,e=>nI[e])}function nU(e){return"number"!=typeof e?nc({top:0,right:0,bottom:0,left:0},e):{top:e,right:e,bottom:e,left:e}}function nH(e){let{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}let nq=["crossAxis","alignment","allowedPlacements","autoAlignment"],nW=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],nV=["mainAxis","crossAxis","limiter"];function nZ(e,t,n){let i,{reference:r,floating:a}=e,s=nL(t),o=nM(nL(t)),l=n$(o),c=nD(t),d="y"===s,u=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[l]/2-a[l]/2;switch(c){case"top":i={x:u,y:r.y-a.height};break;case"bottom":i={x:u,y:r.y+r.height};break;case"right":i={x:r.x+r.width,y:h};break;case"left":i={x:r.x-a.width,y:h};break;default:i={x:r.x,y:r.y}}switch(nP(t)){case"start":i[o]-=p*(n&&d?-1:1);break;case"end":i[o]+=p*(n&&d?-1:1)}return i}let nY=async(e,t,n)=>{let{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await (null==s.isRTL?void 0:s.isRTL(t)),c=await s.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:u}=nZ(c,i,l),h=i,p={},f=0;for(let n=0;n<o.length;n++){let{name:a,fn:m}=o[n],{x:g,y:y,data:v,reset:b}=await m({x:d,y:u,initialPlacement:i,placement:h,strategy:r,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=y?y:u,p=nc({},p,{[a]:nc({},p[a],v)}),b&&f<=50&&(f++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:r}):b.rects),{x:d,y:u}=nZ(c,h,l)),n=-1)}return{x:d,y:u,placement:h,strategy:r,middlewareData:p}};async function nK(e,t){var n;void 0===t&&(t={});let{x:i,y:r,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=nR(t,e),f=nU(p),m=o[h?"floating"===u?"reference":"floating":u],g=nH(await a.getClippingRect({element:null==(n=await (null==a.isElement?void 0:a.isElement(m)))||n?m:m.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),y="floating"===u?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,v=await (null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),b=await (null==a.isElement?void 0:a.isElement(v))&&await (null==a.getScale?void 0:a.getScale(v))||{x:1,y:1},x=nH(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-x.top+f.top)/b.y,bottom:(x.bottom-g.bottom+f.bottom)/b.y,left:(g.left-x.left+f.left)/b.x,right:(x.right-g.right+f.right)/b.x}}function nQ(){return"undefined"!=typeof window}function nJ(e){return n0(e)?(e.nodeName||"").toLowerCase():"#document"}function nG(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function nX(e){var t;return null==(t=(n0(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function n0(e){return!!nQ()&&(e instanceof Node||e instanceof nG(e).Node)}function n1(e){return!!nQ()&&(e instanceof Element||e instanceof nG(e).Element)}function n2(e){return!!nQ()&&(e instanceof HTMLElement||e instanceof nG(e).HTMLElement)}function n5(e){return!!nQ()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof nG(e).ShadowRoot)}function n6(e){let{overflow:t,overflowX:n,overflowY:i,display:r}=n7(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function n3(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function n8(e){let t=n4(),n=n1(e)?n7(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function n4(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function n9(e){return["html","body","#document"].includes(nJ(e))}function n7(e){return nG(e).getComputedStyle(e)}function ie(e){return n1(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function it(e){if("html"===nJ(e))return e;let t=e.assignedSlot||e.parentNode||n5(e)&&e.host||nX(e);return n5(t)?t.host:t}function ii(e,t,n){var i;void 0===t&&(t=[]),void 0===n&&(n=!0);let r=function e(t){let n=it(t);return n9(n)?t.ownerDocument?t.ownerDocument.body:t.body:n2(n)&&n6(n)?n:e(n)}(e),a=r===(null==(i=e.ownerDocument)?void 0:i.body),s=nG(r);if(a){let e=ir(s);return t.concat(s,s.visualViewport||[],n6(r)?r:[],e&&n?ii(e):[])}return t.concat(r,ii(r,[],n))}function ir(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ia(e){let t=n7(e),n=parseFloat(t.width)||0,i=parseFloat(t.height)||0,r=n2(e),a=r?e.offsetWidth:n,s=r?e.offsetHeight:i,o=nj(n)!==a||nj(i)!==s;return o&&(n=a,i=s),{width:n,height:i,$:o}}function is(e){return n1(e)?e:e.contextElement}function io(e){let t=is(e);if(!n2(t))return nN(1);let n=t.getBoundingClientRect(),{width:i,height:r,$:a}=ia(t),s=(a?nj(n.width):n.width)/i,o=(a?nj(n.height):n.height)/r;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}let il=nN(0);function ic(e){let t=nG(e);return n4()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:il}function id(e,t,n,i){var r;void 0===t&&(t=!1),void 0===n&&(n=!1);let a=e.getBoundingClientRect(),s=is(e),o=nN(1);t&&(i?n1(i)&&(o=io(i)):o=io(e));let l=(void 0===(r=n)&&(r=!1),i&&(!r||i===nG(s))&&r)?ic(s):nN(0),c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(s){let e=nG(s),t=i&&n1(i)?nG(i):i,n=e,r=ir(n);for(;r&&i&&t!==n;){let e=io(r),t=r.getBoundingClientRect(),i=n7(r),a=t.left+(r.clientLeft+parseFloat(i.paddingLeft))*e.x,s=t.top+(r.clientTop+parseFloat(i.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,h*=e.y,c+=a,d+=s,r=ir(n=nG(r))}}return nH({width:u,height:h,x:c,y:d})}function iu(e,t){let n=ie(e).scrollLeft;return t?t.left+n:id(nX(e)).left+n}function ih(e,t,n){void 0===n&&(n=!1);let i=e.getBoundingClientRect();return{x:i.left+t.scrollLeft-(n?0:iu(e,i)),y:i.top+t.scrollTop}}function ip(e,t,n){let i;if("viewport"===t)i=function(e,t){let n=nG(e),i=nX(e),r=n.visualViewport,a=i.clientWidth,s=i.clientHeight,o=0,l=0;if(r){a=r.width,s=r.height;let e=n4();(!e||e&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:s,x:o,y:l}}(e,n);else if("document"===t)i=function(e){let t=nX(e),n=ie(e),i=e.ownerDocument.body,r=nT(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),a=nT(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight),s=-n.scrollLeft+iu(e),o=-n.scrollTop;return"rtl"===n7(i).direction&&(s+=nT(t.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:o}}(nX(e));else if(n1(t))i=function(e,t){let n=id(e,!0,"fixed"===t),i=n.top+e.clientTop,r=n.left+e.clientLeft,a=n2(e)?io(e):nN(1),s=e.clientWidth*a.x,o=e.clientHeight*a.y;return{width:s,height:o,x:r*a.x,y:i*a.y}}(t,n);else{let n=ic(e);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return nH(i)}function im(e){return"static"===n7(e).position}function ig(e,t){if(!n2(e)||"fixed"===n7(e).position)return null;if(t)return t(e);let n=e.offsetParent;return nX(e)===n&&(n=n.ownerDocument.body),n}function iy(e,t){let n=nG(e);if(n3(e))return n;if(!n2(e)){let t=it(e);for(;t&&!n9(t);){if(n1(t)&&!im(t))return t;t=it(t)}return n}let i=ig(e,t);for(;i&&["table","td","th"].includes(nJ(i))&&im(i);)i=ig(i,t);return i&&n9(i)&&im(i)&&!n8(i)?n:i||function(e){let t=it(e);for(;n2(t)&&!n9(t);){if(n8(t))return t;if(n3(t))break;t=it(t)}return null}(e)||n}let iv=async function(e){let t=this.getOffsetParent||iy,n=this.getDimensions,i=await n(e.floating);return{reference:function(e,t,n){let i=n2(t),r=nX(t),a="fixed"===n,s=id(e,!0,a,t),o={scrollLeft:0,scrollTop:0},l=nN(0);if(i||!i&&!a)if(("body"!==nJ(t)||n6(r))&&(o=ie(t)),i){let e=id(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&(l.x=iu(r));a&&!i&&r&&(l.x=iu(r));let c=!r||i||a?nN(0):ih(r,o);return{x:s.left+o.scrollLeft-l.x-c.x,y:s.top+o.scrollTop-l.y-c.y,width:s.width,height:s.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},ib={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e,a="fixed"===r,s=nX(i),o=!!t&&n3(t.floating);if(i===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},c=nN(1),d=nN(0),u=n2(i);if((u||!u&&!a)&&(("body"!==nJ(i)||n6(s))&&(l=ie(i)),n2(i))){let e=id(i);c=io(i),d.x=e.x+i.clientLeft,d.y=e.y+i.clientTop}let h=!s||u||a?nN(0):ih(s,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:nX,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e,a=[..."clippingAncestors"===n?n3(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let i=ii(e,[],!1).filter(e=>n1(e)&&"body"!==nJ(e)),r=null,a="fixed"===n7(e).position,s=a?it(e):e;for(;n1(s)&&!n9(s);){let t=n7(s),n=n8(s);n||"fixed"!==t.position||(r=null),(a?!n&&!r:!n&&"static"===t.position&&!!r&&["absolute","fixed"].includes(r.position)||n6(s)&&!n&&function e(t,n){let i=it(t);return!(i===n||!n1(i)||n9(i))&&("fixed"===n7(i).position||e(i,n))}(e,s))?i=i.filter(e=>e!==s):r=t,s=it(s)}return t.set(e,i),i}(t,this._c):[].concat(n),i],s=a[0],o=a.reduce((e,n)=>{let i=ip(t,n,r);return e.top=nT(i.top,e.top),e.right=nE(i.right,e.right),e.bottom=nE(i.bottom,e.bottom),e.left=nT(i.left,e.left),e},ip(t,s,r));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:iy,getElementRects:iv,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=ia(e);return{width:t,height:n}},getScale:io,isElement:n1,isRTL:function(e){return"rtl"===n7(e).direction}};function ix(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function iw(){}function i_(e){return e()}function ik(){return Object.create(null)}function iS(e){e.forEach(i_)}function iC(e){return"function"==typeof e}function iE(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function iT(e,t){e.appendChild(t)}function ij(e,t,n){e.insertBefore(t,n||null)}function iA(e){e.parentNode&&e.parentNode.removeChild(e)}function iN(e){return document.createElement(e)}function iI(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function iO(e){return document.createTextNode(e)}function iR(){return iO(" ")}function iD(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function iP(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}let iM=["width","height"];function i$(e,t){let n=Object.getOwnPropertyDescriptors(e.__proto__);for(let i in t)null==t[i]?e.removeAttribute(i):"style"===i?e.style.cssText=t[i]:"__value"===i?e.value=e[i]=t[i]:n[i]&&n[i].set&&-1===iM.indexOf(i)?e[i]=t[i]:iP(e,i,t[i])}function iL(e,t,n){e.classList.toggle(t,!!n)}function iz(){if(!s)throw Error("Function called outside component initialization");return s}function iB(e){iz().$$.after_update.push(e)}let iF=[],iU=[],iH=[],iq=[],iW=Promise.resolve(),iV=!1;function iZ(e){iH.push(e)}let iY=new Set,iK=0;function iQ(){if(0!==iK)return;let e=s;do{try{for(;iK<iF.length;){let e=iF[iK];iK++,s=e,function(e){if(null!==e.fragment){e.update(),iS(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(iZ)}}(e.$$)}}catch(e){throw iF.length=0,iK=0,e}for(s=null,iF.length=0,iK=0;iU.length;)iU.pop()();for(let e=0;e<iH.length;e+=1){let t=iH[e];iY.has(t)||(iY.add(t),t())}iH.length=0}while(iF.length)for(;iq.length;)iq.pop()();iV=!1,iY.clear(),s=e}let iJ=new Set;function iG(){o={r:0,c:[],p:o}}function iX(){o.r||iS(o.c),o=o.p}function i0(e,t){e&&e.i&&(iJ.delete(e),e.i(t))}function i1(e,t,n,i){e&&e.o?iJ.has(e)||(iJ.add(e),o.c.push(()=>{iJ.delete(e),i&&(n&&e.d(1),i())}),e.o(t)):i&&i()}function i2(e){return(null==e?void 0:e.length)!==void 0?e:Array.from(e)}function i5(e){e&&e.c()}function i6(e,t,n){let{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),iZ(()=>{let t=e.$$.on_mount.map(i_).filter(iC);e.$$.on_destroy?e.$$.on_destroy.push(...t):iS(t),e.$$.on_mount=[]}),r.forEach(iZ)}function i3(e,t){let n=e.$$;if(null!==n.fragment){var i=n.after_update;let e=[],r=[];iH.forEach(t=>-1===i.indexOf(t)?e.push(t):r.push(t)),r.forEach(e=>e()),iH=e,iS(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[]}}function i8(e,t,n,i,r,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],c=s;s=e;let d=e.$$={fragment:null,ctx:[],props:a,update:iw,not_equal:r,bound:ik(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ik(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};o&&o(d.root);let u=!1;if(d.ctx=n?n(e,t.props||{},function(t,n){for(var i=arguments.length,a=Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];let o=a.length?a[0]:n;return d.ctx&&r(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),u&&(-1===e.$$.dirty[0]&&(iF.push(e),iV||(iV=!0,iW.then(iQ)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31)),n}):[],d.update(),u=!0,iS(d.before_update),d.fragment=!!i&&i(d.ctx),t.target){if(t.hydrate){let e=Array.from(t.target.childNodes);d.fragment&&d.fragment.l(e),e.forEach(iA)}else d.fragment&&d.fragment.c();t.intro&&i0(e.$$.fragment),i6(e,t.target,t.anchor),iQ()}s=c}class i4{$destroy(){i3(this,1),this.$destroy=iw}$on(e,t){if(!iC(t))return iw;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&0!==Object.keys(e).length&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}constructor(){this.$$=void 0,this.$$set=void 0}}function i9(e){let t,n,i,r,a;return{c(){iP(t=iN("button"),"aria-label",n=e[3]?e[3]:null),iP(t,"class",i="".concat(e[1]||""," shepherd-button ").concat(e[4]?"shepherd-button-secondary":"")),t.disabled=e[2],iP(t,"tabindex","0"),iP(t,"type","button")},m(n,i){ij(n,t,i),t.innerHTML=e[5],r||(a=iD(t,"click",function(){iC(e[0])&&e[0].apply(this,arguments)}),r=!0)},p(r,a){let[s]=a;e=r,32&s&&(t.innerHTML=e[5]),8&s&&n!==(n=e[3]?e[3]:null)&&iP(t,"aria-label",n),18&s&&i!==(i="".concat(e[1]||""," shepherd-button ").concat(e[4]?"shepherd-button-secondary":""))&&iP(t,"class",i),4&s&&(t.disabled=e[2])},i:iw,o:iw,d(e){e&&iA(t),r=!1,a()}}}function i7(e,t,n){let i,r,a,s,o,l,{config:c,step:d}=t;function u(e){return na(e)?e.call(d):e}return e.$$set=e=>{"config"in e&&n(6,c=e.config),"step"in e&&n(7,d=e.step)},e.$$.update=()=>{192&e.$$.dirty&&(n(0,i=c.action?c.action.bind(d.tour):null),n(1,r=c.classes),n(2,a=!!c.disabled&&u(c.disabled)),n(3,s=c.label?u(c.label):null),n(4,o=c.secondary),n(5,l=c.text?u(c.text):null))},[i,r,a,s,o,l,c,d]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class re extends i4{constructor(e){super(),i8(this,e,i7,i9,iE,{config:6,step:7})}}function rt(e,t,n){let i=e.slice();return i[2]=t[n],i}function rn(e){let t,n,i=i2(e[1]),r=[];for(let t=0;t<i.length;t+=1)r[t]=ri(rt(e,i,t));let a=e=>i1(r[e],1,1,()=>{r[e]=null});return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=iO("")},m(e,i){for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,i);ij(e,t,i),n=!0},p(e,n){if(3&n){let s;for(s=0,i=i2(e[1]);s<i.length;s+=1){let a=rt(e,i,s);r[s]?(r[s].p(a,n),i0(r[s],1)):(r[s]=ri(a),r[s].c(),i0(r[s],1),r[s].m(t.parentNode,t))}for(iG(),s=i.length;s<r.length;s+=1)a(s);iX()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)i0(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)i1(r[e]);n=!1},d(e){e&&iA(t);var n=r;for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}}}function ri(e){let t,n;return t=new re({props:{config:e[2],step:e[0]}}),{c(){i5(t.$$.fragment)},m(e,i){i6(t,e,i),n=!0},p(e,n){let i={};2&n&&(i.config=e[2]),1&n&&(i.step=e[0]),t.$set(i)},i(e){n||(i0(t.$$.fragment,e),n=!0)},o(e){i1(t.$$.fragment,e),n=!1},d(e){i3(t,e)}}}function rr(e){let t,n,i=e[1]&&rn(e);return{c(){t=iN("footer"),i&&i.c(),iP(t,"class","shepherd-footer")},m(e,r){ij(e,t,r),i&&i.m(t,null),n=!0},p(e,n){let[r]=n;e[1]?i?(i.p(e,r),2&r&&i0(i,1)):((i=rn(e)).c(),i0(i,1),i.m(t,null)):i&&(iG(),i1(i,1,1,()=>{i=null}),iX())},i(e){n||(i0(i),n=!0)},o(e){i1(i),n=!1},d(e){e&&iA(t),i&&i.d()}}}function ra(e,t,n){let i,{step:r}=t;return e.$$set=e=>{"step"in e&&n(0,r=e.step)},e.$$.update=()=>{1&e.$$.dirty&&n(1,i=r.options.buttons)},[r,i]}class rs extends i4{constructor(e){super(),i8(this,e,ra,rr,iE,{step:0})}}function ro(e){let t,n,i,r,a;return{c(){t=iN("button"),(n=iN("span")).textContent="Ã—",iP(n,"aria-hidden","true"),iP(t,"aria-label",i=e[0].label?e[0].label:"Close Tour"),iP(t,"class","shepherd-cancel-icon"),iP(t,"type","button")},m(i,s){ij(i,t,s),iT(t,n),r||(a=iD(t,"click",e[1]),r=!0)},p(e,n){let[r]=n;1&r&&i!==(i=e[0].label?e[0].label:"Close Tour")&&iP(t,"aria-label",i)},i:iw,o:iw,d(e){e&&iA(t),r=!1,a()}}}function rl(e,t,n){let{cancelIcon:i,step:r}=t;return e.$$set=e=>{"cancelIcon"in e&&n(0,i=e.cancelIcon),"step"in e&&n(2,r=e.step)},[i,e=>{e.preventDefault(),r.cancel()},r]}class rc extends i4{constructor(e){super(),i8(this,e,rl,ro,iE,{cancelIcon:0,step:2})}}function rd(e){let t;return{c(){iP(t=iN("h3"),"id",e[1]),iP(t,"class","shepherd-title")},m(n,i){ij(n,t,i),e[3](t)},p(e,n){let[i]=n;2&i&&iP(t,"id",e[1])},i:iw,o:iw,d(n){n&&iA(t),e[3](null)}}}function ru(e,t,n){let{labelId:i,element:r,title:a}=t;return iB(()=>{na(a)&&n(2,a=a()),n(0,r.innerHTML=a,r)}),e.$$set=e=>{"labelId"in e&&n(1,i=e.labelId),"element"in e&&n(0,r=e.element),"title"in e&&n(2,a=e.title)},[r,i,a,function(e){iU[e?"unshift":"push"](()=>{n(0,r=e)})}]}class rh extends i4{constructor(e){super(),i8(this,e,ru,rd,iE,{labelId:1,element:0,title:2})}}function rp(e){let t,n;return t=new rh({props:{labelId:e[0],title:e[2]}}),{c(){i5(t.$$.fragment)},m(e,i){i6(t,e,i),n=!0},p(e,n){let i={};1&n&&(i.labelId=e[0]),4&n&&(i.title=e[2]),t.$set(i)},i(e){n||(i0(t.$$.fragment,e),n=!0)},o(e){i1(t.$$.fragment,e),n=!1},d(e){i3(t,e)}}}function rf(e){let t,n;return t=new rc({props:{cancelIcon:e[3],step:e[1]}}),{c(){i5(t.$$.fragment)},m(e,i){i6(t,e,i),n=!0},p(e,n){let i={};8&n&&(i.cancelIcon=e[3]),2&n&&(i.step=e[1]),t.$set(i)},i(e){n||(i0(t.$$.fragment,e),n=!0)},o(e){i1(t.$$.fragment,e),n=!1},d(e){i3(t,e)}}}function rm(e){let t,n,i,r=e[2]&&rp(e),a=e[3]&&e[3].enabled&&rf(e);return{c(){t=iN("header"),r&&r.c(),n=iR(),a&&a.c(),iP(t,"class","shepherd-header")},m(e,s){ij(e,t,s),r&&r.m(t,null),iT(t,n),a&&a.m(t,null),i=!0},p(e,i){let[s]=i;e[2]?r?(r.p(e,s),4&s&&i0(r,1)):((r=rp(e)).c(),i0(r,1),r.m(t,n)):r&&(iG(),i1(r,1,1,()=>{r=null}),iX()),e[3]&&e[3].enabled?a?(a.p(e,s),8&s&&i0(a,1)):((a=rf(e)).c(),i0(a,1),a.m(t,null)):a&&(iG(),i1(a,1,1,()=>{a=null}),iX())},i(e){i||(i0(r),i0(a),i=!0)},o(e){i1(r),i1(a),i=!1},d(e){e&&iA(t),r&&r.d(),a&&a.d()}}}function rg(e,t,n){let i,r,{labelId:a,step:s}=t;return e.$$set=e=>{"labelId"in e&&n(0,a=e.labelId),"step"in e&&n(1,s=e.step)},e.$$.update=()=>{2&e.$$.dirty&&(n(2,i=s.options.title),n(3,r=s.options.cancelIcon))},[a,s,i,r]}class ry extends i4{constructor(e){super(),i8(this,e,rg,rm,iE,{labelId:0,step:1})}}function rv(e){let t;return{c(){iP(t=iN("div"),"class","shepherd-text"),iP(t,"id",e[1])},m(n,i){ij(n,t,i),e[3](t)},p(e,n){let[i]=n;2&i&&iP(t,"id",e[1])},i:iw,o:iw,d(n){n&&iA(t),e[3](null)}}}function rb(e,t,n){let{descriptionId:i,element:r,step:a}=t;return iB(()=>{let{text:e}=a.options;na(e)&&(e=e.call(a)),nr(e)?r.appendChild(e):n(0,r.innerHTML=e,r)}),e.$$set=e=>{"descriptionId"in e&&n(1,i=e.descriptionId),"element"in e&&n(0,r=e.element),"step"in e&&n(2,a=e.step)},[r,i,a,function(e){iU[e?"unshift":"push"](()=>{n(0,r=e)})}]}class rx extends i4{constructor(e){super(),i8(this,e,rb,rv,iE,{descriptionId:1,element:0,step:2})}}function rw(e){let t,n;return t=new ry({props:{labelId:e[1],step:e[2]}}),{c(){i5(t.$$.fragment)},m(e,i){i6(t,e,i),n=!0},p(e,n){let i={};2&n&&(i.labelId=e[1]),4&n&&(i.step=e[2]),t.$set(i)},i(e){n||(i0(t.$$.fragment,e),n=!0)},o(e){i1(t.$$.fragment,e),n=!1},d(e){i3(t,e)}}}function r_(e){let t,n;return t=new rx({props:{descriptionId:e[0],step:e[2]}}),{c(){i5(t.$$.fragment)},m(e,i){i6(t,e,i),n=!0},p(e,n){let i={};1&n&&(i.descriptionId=e[0]),4&n&&(i.step=e[2]),t.$set(i)},i(e){n||(i0(t.$$.fragment,e),n=!0)},o(e){i1(t.$$.fragment,e),n=!1},d(e){i3(t,e)}}}function rk(e){let t,n;return t=new rs({props:{step:e[2]}}),{c(){i5(t.$$.fragment)},m(e,i){i6(t,e,i),n=!0},p(e,n){let i={};4&n&&(i.step=e[2]),t.$set(i)},i(e){n||(i0(t.$$.fragment,e),n=!0)},o(e){i1(t.$$.fragment,e),n=!1},d(e){i3(t,e)}}}function rS(e){let t,n,i,r,a=!no(e[2].options.title)||e[2].options.cancelIcon&&e[2].options.cancelIcon.enabled,s=!no(e[2].options.text),o=Array.isArray(e[2].options.buttons)&&e[2].options.buttons.length,l=a&&rw(e),c=s&&r_(e),d=o&&rk(e);return{c(){t=iN("div"),l&&l.c(),n=iR(),c&&c.c(),i=iR(),d&&d.c(),iP(t,"class","shepherd-content")},m(e,a){ij(e,t,a),l&&l.m(t,null),iT(t,n),c&&c.m(t,null),iT(t,i),d&&d.m(t,null),r=!0},p(e,r){let[u]=r;4&u&&(a=!no(e[2].options.title)||e[2].options.cancelIcon&&e[2].options.cancelIcon.enabled),a?l?(l.p(e,u),4&u&&i0(l,1)):((l=rw(e)).c(),i0(l,1),l.m(t,n)):l&&(iG(),i1(l,1,1,()=>{l=null}),iX()),4&u&&(s=!no(e[2].options.text)),s?c?(c.p(e,u),4&u&&i0(c,1)):((c=r_(e)).c(),i0(c,1),c.m(t,i)):c&&(iG(),i1(c,1,1,()=>{c=null}),iX()),4&u&&(o=Array.isArray(e[2].options.buttons)&&e[2].options.buttons.length),o?d?(d.p(e,u),4&u&&i0(d,1)):((d=rk(e)).c(),i0(d,1),d.m(t,null)):d&&(iG(),i1(d,1,1,()=>{d=null}),iX())},i(e){r||(i0(l),i0(c),i0(d),r=!0)},o(e){i1(l),i1(c),i1(d),r=!1},d(e){e&&iA(t),l&&l.d(),c&&c.d(),d&&d.d()}}}function rC(e,t,n){let{descriptionId:i,labelId:r,step:a}=t;return e.$$set=e=>{"descriptionId"in e&&n(0,i=e.descriptionId),"labelId"in e&&n(1,r=e.labelId),"step"in e&&n(2,a=e.step)},[i,r,a]}class rE extends i4{constructor(e){super(),i8(this,e,rC,rS,iE,{descriptionId:0,labelId:1,step:2})}}function rT(e){let t;return{c(){iP(t=iN("div"),"class","shepherd-arrow"),iP(t,"data-popper-arrow","")},m(e,n){ij(e,t,n)},d(e){e&&iA(t)}}}function rj(e){let t,n,i,r,a,s,o,l,c=e[4].options.arrow&&e[4].options.attachTo&&e[4].options.attachTo.element&&e[4].options.attachTo.on&&rT();i=new rE({props:{descriptionId:e[2],labelId:e[3],step:e[4]}});let d=[{"aria-describedby":r=no(e[4].options.text)?null:e[2]},{"aria-labelledby":a=e[4].options.title?e[3]:null},e[1],{open:"true"}],u={};for(let e=0;e<d.length;e+=1)u=function(e,t){for(let n in t)e[n]=t[n];return e}(u,d[e]);return{c(){t=iN("dialog"),c&&c.c(),n=iR(),i5(i.$$.fragment),i$(t,u),iL(t,"shepherd-has-cancel-icon",e[5]),iL(t,"shepherd-has-title",e[6]),iL(t,"shepherd-element",!0)},m(r,a){ij(r,t,a),c&&c.m(t,null),iT(t,n),i6(i,t,null),e[18](t),s=!0,o||(l=iD(t,"keydown",e[7]),o=!0)},p(e,o){let[l]=o;e[4].options.arrow&&e[4].options.attachTo&&e[4].options.attachTo.element&&e[4].options.attachTo.on?c||((c=rT()).c(),c.m(t,n)):c&&(c.d(1),c=null);let h={};4&l&&(h.descriptionId=e[2]),8&l&&(h.labelId=e[3]),16&l&&(h.step=e[4]),i.$set(h),i$(t,u=function(e,t){let n={},i={},r={$$scope:1},a=e.length;for(;a--;){let s=e[a],o=t[a];if(o){for(let e in s)e in o||(i[e]=1);for(let e in o)r[e]||(n[e]=o[e],r[e]=1);e[a]=o}else for(let e in s)r[e]=1}for(let e in i)e in n||(n[e]=void 0);return n}(d,[(!s||20&l&&r!==(r=no(e[4].options.text)?null:e[2]))&&{"aria-describedby":r},(!s||24&l&&a!==(a=e[4].options.title?e[3]:null))&&{"aria-labelledby":a},2&l&&e[1],{open:"true"}])),iL(t,"shepherd-has-cancel-icon",e[5]),iL(t,"shepherd-has-title",e[6]),iL(t,"shepherd-element",!0)},i(e){s||(i0(i.$$.fragment,e),s=!0)},o(e){i1(i.$$.fragment,e),s=!1},d(n){n&&iA(t),c&&c.d(),i3(i),e[18](null),o=!1,l()}}}function rA(e){return e.split(" ").filter(e=>!!e.length)}function rN(e,t,n){let i,r,a,{attachToElement:s,attachTofocusableDialogElements:o,classPrefix:l,element:c,descriptionId:d,focusableAttachToElements:u,firstFocusableAttachToElement:h,lastFocusableAttachToElement:p,firstFocusableDialogElement:f,focusableDialogElements:m,lastFocusableDialogElement:g,labelId:y,step:v,dataStepId:b}=t;iz().$$.on_mount.push(()=>{n(1,b={["data-".concat(l,"shepherd-step-id")]:v.id}),n(13,m=[...c.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')]),n(12,f=m[0]),n(14,g=m[m.length-1]);let e=v._getResolvedAttachToOptions();null!=e&&e.element&&(n(8,s=e.element),n(8,s.tabIndex=0,s),n(9,u=[s,...s.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')]),n(10,h=u[0]),n(11,p=u[u.length-1]),s.addEventListener("keydown",x))}),iz().$$.on_destroy.push(()=>{var e;null==(e=s)||e.removeEventListener("keydown",x)}),iB(()=>{a!==v.options.classes&&(function(e){if(ns(e)){let t=rA(e);t.length&&c.classList.remove(...t)}}(a),function(e){if(ns(e)){let t=rA(e);t.length&&c.classList.add(...t)}}(a=v.options.classes))});let x=e=>{let{tour:t}=v;switch(e.keyCode){case 9:var n,i;if((!u||0===u.length)&&0===m.length){e.preventDefault();break}e.shiftKey?document.activeElement===f||document.activeElement.classList.contains("shepherd-element")?(e.preventDefault(),(null!=(n=p)?n:g).focus()):document.activeElement===h&&(e.preventDefault(),g.focus()):document.activeElement===g?(e.preventDefault(),(null!=(i=h)?i:f).focus()):document.activeElement===p&&(e.preventDefault(),f.focus());break;case 27:t.options.exitOnEsc&&(e.preventDefault(),e.stopPropagation(),v.cancel());break;case 37:t.options.keyboardNavigation&&(e.preventDefault(),e.stopPropagation(),t.back());break;case 39:t.options.keyboardNavigation&&(e.preventDefault(),e.stopPropagation(),t.next())}};return e.$$set=e=>{"attachToElement"in e&&n(8,s=e.attachToElement),"attachTofocusableDialogElements"in e&&n(15,o=e.attachTofocusableDialogElements),"classPrefix"in e&&n(16,l=e.classPrefix),"element"in e&&n(0,c=e.element),"descriptionId"in e&&n(2,d=e.descriptionId),"focusableAttachToElements"in e&&n(9,u=e.focusableAttachToElements),"firstFocusableAttachToElement"in e&&n(10,h=e.firstFocusableAttachToElement),"lastFocusableAttachToElement"in e&&n(11,p=e.lastFocusableAttachToElement),"firstFocusableDialogElement"in e&&n(12,f=e.firstFocusableDialogElement),"focusableDialogElements"in e&&n(13,m=e.focusableDialogElements),"lastFocusableDialogElement"in e&&n(14,g=e.lastFocusableDialogElement),"labelId"in e&&n(3,y=e.labelId),"step"in e&&n(4,v=e.step),"dataStepId"in e&&n(1,b=e.dataStepId)},e.$$.update=()=>{16&e.$$.dirty&&(n(5,i=v.options&&v.options.cancelIcon&&v.options.cancelIcon.enabled),n(6,r=v.options&&v.options.title))},[c,b,d,y,v,i,r,x,s,u,h,p,f,m,g,o,l,()=>c,function(e){iU[e?"unshift":"push"](()=>{n(0,c=e)})}]}class rI extends i4{get getElement(){return this.$$.ctx[17]}constructor(e){super(),i8(this,e,rN,rj,iE,{attachToElement:8,attachTofocusableDialogElements:15,classPrefix:16,element:0,descriptionId:2,focusableAttachToElements:9,firstFocusableAttachToElement:10,lastFocusableAttachToElement:11,firstFocusableDialogElement:12,focusableDialogElements:13,lastFocusableDialogElement:14,labelId:3,step:4,dataStepId:1,getElement:17})}}class rO extends nl{cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){this.cleanup&&this.cleanup(),this.cleanup=null,nr(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){var e;null==(e=this.tour.modal)||e.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveExtraHiglightElements(){return this._resolvedExtraHighlightElements=this.options.extraHighlights?this.options.extraHighlights.flatMap(e=>Array.from(document.querySelectorAll(e))):[],this._resolvedExtraHighlightElements}_resolveAttachToOptions(){return this._resolvedAttachTo=function(e){let t=e.options.attachTo||{},n=Object.assign({},t);if(na(n.element)&&(n.element=n.element.call(e)),ns(n.element)){try{n.element=document.querySelector(n.element)}catch(e){}n.element||console.error("The element for this Shepherd step was not found ".concat(t.element))}return n}(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return null===this._resolvedAttachTo?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return na(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(e){Object.assign(this.options,e),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){let e="".concat(this.id,"-description"),t="".concat(this.id,"-label");return this.shepherdElementComponent=new rI({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:e,labelId:t,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(e){let{element:t}=this._getResolvedAttachToOptions();na(this.options.scrollToHandler)?this.options.scrollToHandler(t):t instanceof Element&&"function"==typeof t.scrollIntoView&&t.scrollIntoView(e)}_getClassOptions(e){let t=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,n=e.classes?e.classes:"",i=t&&t.classes?t.classes:"";return Array.from(new Set([...n.split(" "),...i.split(" ")])).join(" ").trim()}_setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;t=nv({},t||{}),this.options=Object.assign({arrow:!0},t,e,{floatingUIOptions:nv(t.floatingUIOptions||{},e.floatingUIOptions||{})});let{when:n}=this.options;this.options.classes=this._getClassOptions(e),this.destroy(),this.id=this.options.id||"step-".concat(nS()),n&&Object.keys(n).forEach(e=>{this.on(e,n[e],this)})}_setupElements(){no(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&function(e){let{event:t,selector:n}=e.options.advanceOn||{};if(!t)return console.error("advanceOn was defined, but no event name was passed.");{let i=t=>{if(e.isOpen()){let i=e.el&&t.currentTarget===e.el;(!no(n)&&t.currentTarget.matches(n)||i)&&e.tour.next()}},r=null;if(!no(n)&&!(r=document.querySelector(n)))return console.error("No element was found for the selector supplied to advanceOn: ".concat(n));r?(r.addEventListener(t,i),e.on("destroy",()=>r.removeEventListener(t,i))):(document.body.addEventListener(t,i,!0),e.on("destroy",()=>document.body.removeEventListener(t,i,!0)))}}(this),function(e){e.cleanup&&e.cleanup();let t=e._getResolvedAttachToOptions(),n=t.element,i=function(e,t){var n,i,r,a,s,o,l,c,d;let u={strategy:"absolute"};u.middleware=[];let h=!!(d=t).options.arrow&&!!d.el&&d.el.querySelector(".shepherd-arrow"),p=nk(e),f=null==(n=e.on)?void 0:n.includes("auto"),m=(null==e||null==(i=e.on)?void 0:i.includes("-start"))||(null==e||null==(r=e.on)?void 0:r.includes("-end"));if(!p){if(f?u.middleware.push({name:"autoPlacement",options:s={crossAxis:!0,alignment:m?null==e||null==(a=e.on)?void 0:a.split("-").pop():null},async fn(e){var t,n,i,r;let{rects:a,middlewareData:o,placement:l,platform:c,elements:d}=e,u=nR(s,e),{crossAxis:h=!1,alignment:p,allowedPlacements:f=nC,autoAlignment:m=!0}=u,g=nd(u,nq),y=void 0!==p||f===nC?((r=p||null)?[...f.filter(e=>nP(e)===r),...f.filter(e=>nP(e)!==r)]:f.filter(e=>nD(e)===e)).filter(e=>!r||nP(e)===r||!!m&&nB(e)!==e):f,v=await nK(e,g),b=(null==(t=o.autoPlacement)?void 0:t.index)||0,x=y[b];if(null==x)return{};let w=nz(x,a,await (null==c.isRTL?void 0:c.isRTL(d.floating)));if(l!==x)return{reset:{placement:y[0]}};let _=[v[nD(x)],v[w[0]],v[w[1]]],k=[...(null==(n=o.autoPlacement)?void 0:n.overflows)||[],{placement:x,overflows:_}],S=y[b+1];if(S)return{data:{index:b+1,overflows:k},reset:{placement:S}};let C=k.map(e=>{let t=nP(e.placement);return[e.placement,t&&h?e.overflows.slice(0,2).reduce((e,t)=>e+t,0):e.overflows[0],e.overflows]}).sort((e,t)=>e[1]-t[1]),E=(null==(i=C.filter(e=>e[2].slice(0,nP(e[0])?2:3).every(e=>e<=0))[0])?void 0:i[0])||C[0][0];return E!==l?{data:{index:b+1,overflows:k},reset:{placement:E}}:{}}}):u.middleware.push((void 0===o&&(o={}),{name:"flip",options:o,async fn(e){var t,n,i,r,a,s;let{placement:l,middlewareData:c,rects:d,initialPlacement:u,platform:h,elements:p}=e,f=nR(o,e),{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0}=f,w=nd(f,nW);if(null!=(t=c.arrow)&&t.alignmentOffset)return{};let _=nD(l),k=nL(u),S=nD(u)===u,C=await (null==h.isRTL?void 0:h.isRTL(p.floating)),E=y||(S||!x?[nF(u)]:function(e){let t=nF(e);return[nB(e),t,nB(t)]}(u)),T="none"!==b;!y&&T&&E.push(...function(e,t,n,i){let r=nP(e),a=function(e,t,n){let i=["left","right"],r=["right","left"];switch(e){case"top":case"bottom":if(n)return t?r:i;return t?i:r;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(nD(e),"start"===n,i);return r&&(a=a.map(e=>e+"-"+r),t&&(a=a.concat(a.map(nB)))),a}(u,x,b,C));let j=[u,...E],A=await nK(e,w),N=[],I=(null==(n=c.flip)?void 0:n.overflows)||[];if(m&&N.push(A[_]),g){let e=nz(l,d,C);N.push(A[e[0]],A[e[1]])}if(I=[...I,{placement:l,overflows:N}],!N.every(e=>e<=0)){let e=((null==(i=c.flip)?void 0:i.index)||0)+1,t=j[e];if(t){let n="alignment"===g&&k!==nL(t),i=(null==(a=I[0])?void 0:a.overflows[0])>0;if(!n||i)return{data:{index:e,overflows:I},reset:{placement:t}}}let n=null==(r=I.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:r.placement;if(!n)switch(v){case"bestFit":{let e=null==(s=I.filter(e=>{if(T){let t=nL(e.placement);return t===k||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:s[0];e&&(n=e);break}case"initialPlacement":n=u}if(l!==n)return{reset:{placement:n}}}return{}}})),u.middleware.push({name:"shift",options:c={limiter:(void 0===l&&(l={}),{options:l,fn(e){let{x:t,y:n,placement:i,rects:r,middlewareData:a}=e,{offset:s=0,mainAxis:o=!0,crossAxis:c=!0}=nR(l,e),d={x:t,y:n},u=nL(i),h=nM(u),p=d[h],f=d[u],m=nR(s,e),g="number"==typeof m?{mainAxis:m,crossAxis:0}:nc({mainAxis:0,crossAxis:0},m);if(o){let e="y"===h?"height":"width",t=r.reference[h]-r.floating[e]+g.mainAxis,n=r.reference[h]+r.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var y,v;let e="y"===h?"width":"height",t=["top","left"].includes(nD(i)),n=r.reference[u]-r.floating[e]+(t&&(null==(y=a.offset)?void 0:y[u])||0)+(t?0:g.crossAxis),s=r.reference[u]+r.reference[e]+(t?0:(null==(v=a.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);f<n?f=n:f>s&&(f=s)}return{[h]:p,[u]:f}}}),crossAxis:!0},async fn(e){let{x:t,y:n,placement:i}=e,r=nR(c,e),{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=r,l=nd(r,nV),d={x:t,y:n},u=await nK(e,l),h=nL(nD(i)),p=nM(h),f=d[p],m=d[h];if(a){let e="y"===p?"top":"left",t="y"===p?"bottom":"right",n=f+u[e],i=f-u[t];f=nT(n,nE(f,i))}if(s){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",n=m+u[e],i=m-u[t];m=nT(n,nE(m,i))}let g=o.fn(nc({},e,{[p]:f,[h]:m}));return nc({},g,{data:{x:g.x-t,y:g.y-n,enabled:{[p]:a,[h]:s}}})}}),h){let e,n="object"==typeof t.options.arrow?t.options.arrow:{padding:4};u.middleware.push({name:"arrow",options:e={element:h,padding:m?n.padding:0},async fn(t){let{x:n,y:i,placement:r,rects:a,platform:s,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=nR(e,t)||{};if(null==c)return{};let u=nU(d),h={x:n,y:i},p=nM(nL(r)),f=n$(p),m=await s.getDimensions(c),g="y"===p,y=g?"clientHeight":"clientWidth",v=a.reference[f]+a.reference[p]-h[p]-a.floating[f],b=h[p]-a.reference[p],x=await (null==s.getOffsetParent?void 0:s.getOffsetParent(c)),w=x?x[y]:0;w&&await (null==s.isElement?void 0:s.isElement(x))||(w=o.floating[y]||a.floating[f]);let _=w/2-m[f]/2-1,k=nE(u[g?"top":"left"],_),S=nE(u[g?"bottom":"right"],_),C=w-m[f]-S,E=w/2-m[f]/2+(v/2-b/2),T=nT(k,nE(E,C)),j=!l.arrow&&null!=nP(r)&&E!==T&&a.reference[f]/2-(E<k?k:S)-m[f]/2<0,A=j?E<k?E-k:E-C:0;return{[p]:h[p]+A,data:nc({[p]:T,centerOffset:E-T-A},j&&{alignmentOffset:A}),reset:j}}})}f||(u.placement=e.on)}return nv(u,t.options.floatingUIOptions||{})}(t,e),r=nk(t);r&&(n=document.body,e.shepherdElementComponent.getElement().classList.add("shepherd-centered")),e.cleanup=function(e,t,n,i){let r;void 0===i&&(i={});let{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=i,d=is(e),u=a||s?[...d?ii(d):[],...ii(t)]:[];u.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)});let h=d&&l?function(e,t){let n,i=null,r=nX(e);function a(){var e;clearTimeout(n),null==(e=i)||e.disconnect(),i=null}return!function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();let c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:p}=c;if(o||t(),!h||!p)return;let f=nA(u),m=nA(r.clientWidth-(d+h)),g={rootMargin:-f+"px "+-m+"px "+-nA(r.clientHeight-(u+p))+"px "+-nA(d)+"px",threshold:nT(0,nE(1,l))||1},y=!0;function v(t){let i=t[0].intersectionRatio;if(i!==l){if(!y)return s();i?s(!1,i):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==i||ix(c,e.getBoundingClientRect())||s(),y=!1}try{i=new IntersectionObserver(v,nc({},g,{root:r.ownerDocument}))}catch(e){i=new IntersectionObserver(v,g)}i.observe(e)}(!0),a}(d,n):null,p=-1,f=null;o&&(f=new ResizeObserver(e=>{let[i]=e;i&&i.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),n()}),d&&!c&&f.observe(d),f.observe(t));let m=c?id(e):null;return c&&function t(){let i=id(e);m&&!ix(m,i)&&n(),m=i,r=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{a&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=f)||e.disconnect(),f=null,c&&cancelAnimationFrame(r)}}(n,e.el,()=>{var t,a,s,o,l,c;if(!e.el){null==e.cleanup||e.cleanup();return}t=n,a=e,s=i,o=r,((e,t,n)=>{let i=new Map,r=nc({platform:ib},n),a=nc({},r.platform,{_c:i});return nY(e,t,nc({},r,{platform:a}))})(t,a.el,s).then((l=a,c=o,e=>{let{x:t,y:n,placement:i,middlewareData:r}=e;return l.el&&(c?Object.assign(l.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(l.el.style,{position:"absolute",left:"".concat(t,"px"),top:"".concat(n,"px")}),l.el.dataset.popperPlacement=i,function(e,t){let n=e.querySelector(".shepherd-arrow");if(nr(n)&&t.arrow){let{x:e,y:i}=t.arrow;Object.assign(n.style,{left:null!=e?"".concat(e,"px"):"",top:null!=i?"".concat(i,"px"):""})}}(l.el,r)),l})).then(e=>new Promise(t=>{setTimeout(()=>t(e),300)})).then(e=>{null!=e&&e.el&&(e.el.tabIndex=0,e.el.focus({preventScroll:!0}))})}),e.target=t.element}(this)}_show(){var e;this.trigger("before-show"),this._resolveAttachToOptions(),this._resolveExtraHiglightElements(),this._setupElements(),this.tour.modal||this.tour.setupModal(),null==(e=this.tour.modal)||e.setupForStep(this),this._styleTargetElementForStep(this),this.el&&(this.el.hidden=!1),this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el&&(this.el.hidden=!1);let t=this.shepherdElementComponent.getElement(),n=this.target||document.body,i=this._resolvedExtraHighlightElements;n.classList.add("".concat(this.classPrefix,"shepherd-enabled")),n.classList.add("".concat(this.classPrefix,"shepherd-target")),t.classList.add("shepherd-enabled"),null==i||i.forEach(e=>{e.classList.add("".concat(this.classPrefix,"shepherd-enabled")),e.classList.add("".concat(this.classPrefix,"shepherd-target"))}),this.trigger("show")}_styleTargetElementForStep(e){let t=e.target,n=e._resolvedExtraHighlightElements;if(!t)return;let i=e.options.highlightClass;i&&(t.classList.add(i),null==n||n.forEach(e=>e.classList.add(i))),t.classList.remove("shepherd-target-click-disabled"),null==n||n.forEach(e=>e.classList.remove("shepherd-target-click-disabled")),!1===e.options.canClickTarget&&(t.classList.add("shepherd-target-click-disabled"),null==n||n.forEach(e=>e.classList.add("shepherd-target-click-disabled")))}_updateStepTargetOnHide(){let e=this.target||document.body,t=this._resolvedExtraHighlightElements,n=this.options.highlightClass;n&&(e.classList.remove(n),null==t||t.forEach(e=>e.classList.remove(n))),e.classList.remove("shepherd-target-click-disabled","".concat(this.classPrefix,"shepherd-enabled"),"".concat(this.classPrefix,"shepherd-target")),null==t||t.forEach(e=>{e.classList.remove("shepherd-target-click-disabled","".concat(this.classPrefix,"shepherd-enabled"),"".concat(this.classPrefix,"shepherd-target"))})}constructor(e,t={}){return super(),this._resolvedAttachTo=void 0,this._resolvedExtraHighlightElements=void 0,this.classPrefix=void 0,this.el=void 0,this.target=void 0,this.tour=void 0,this.tour=e,this.classPrefix=this.tour.options?n_(this.tour.options.classPrefix):"",this.styles=e.styles,this._resolvedAttachTo=null,nw(this),this._setOptions(t),this}}function rR(e){let t,n,i,r,a;return{c(){t=iI("svg"),iP(n=iI("path"),"d",e[2]),iP(t,"class",i="".concat(e[1]?"shepherd-modal-is-visible":""," shepherd-modal-overlay-container"))},m(i,s){ij(i,t,s),iT(t,n),e[11](t),r||(a=iD(t,"touchmove",e[3]),r=!0)},p(e,r){let[a]=r;4&a&&iP(n,"d",e[2]),2&a&&i!==(i="".concat(e[1]?"shepherd-modal-is-visible":""," shepherd-modal-overlay-container"))&&iP(t,"class",i)},i:iw,o:iw,d(n){n&&iA(t),e[11](null),r=!1,a()}}}function rD(e,t,n){let i,r,{element:a,openingProperties:s}=t,o=!1;function l(){n(4,s=[{width:0,height:0,x:0,y:0,r:0}])}function c(){n(1,o=!1),p()}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;if(o){let l=[o,...c||[]];for(let o of(n(4,s=[]),l)){if(!o||l.indexOf(o)!==l.lastIndexOf(o))continue;let{y:n,height:c}=function(e,t){let n=e.getBoundingClientRect(),i=n.y||n.top,r=n.bottom||i+n.height;if(t){let e=t.getBoundingClientRect(),n=e.y||e.top,a=e.bottom||n+e.height;i=Math.max(i,n),r=Math.min(r,a)}let a=Math.max(r-i,0);return{y:i,height:a}}(o,a),{x:d,width:u,left:h}=o.getBoundingClientRect();l.some(e=>{if(e===o)return!1;let t=e.getBoundingClientRect();return d>=t.left&&d+u<=t.right&&n>=t.top&&n+c<=t.bottom})||s.push({width:u+2*e,height:c+2*e,x:(d||h)+i-e,y:n+r-e,r:t})}}else l()}function u(){n(1,o=!0)}l();let h=e=>{e.preventDefault()};function p(){i&&(cancelAnimationFrame(i),i=void 0),window.removeEventListener("touchmove",h,{passive:!1})}return e.$$set=e=>{"element"in e&&n(0,a=e.element),"openingProperties"in e&&n(4,s=e.openingProperties)},e.$$.update=()=>{16&e.$$.dirty&&n(2,r=function(e){let t="",{innerWidth:n,innerHeight:i}=window;return e.forEach(e=>{let{width:n,height:i,x:r=0,y:a=0,r:s=0}=e,{topLeft:o=0,topRight:l=0,bottomRight:c=0,bottomLeft:d=0}="number"==typeof s?{topLeft:s,topRight:s,bottomRight:s,bottomLeft:s}:s;t+="M".concat(r+o,",").concat(a,"      a").concat(o,",").concat(o,",0,0,0-").concat(o,",").concat(o,"      V").concat(i+a-d,"      a").concat(d,",").concat(d,",0,0,0,").concat(d,",").concat(d,"      H").concat(n+r-c,"      a").concat(c,",").concat(c,",0,0,0,").concat(c,"-").concat(c,"      V").concat(a+l,"      a").concat(l,",").concat(l,",0,0,0-").concat(l,"-").concat(l,"      Z")}),"M".concat(n,",").concat(i,"          H0          V0          H").concat(n,"          V").concat(i,"          Z          ").concat(t).replace(/\s/g,"")}(s))},[a,o,r,e=>{e.stopPropagation()},s,()=>a,l,c,d,function(e){p(),e.tour.options.useModalOverlay?(function(e){let{modalOverlayOpeningPadding:t,modalOverlayOpeningRadius:n,modalOverlayOpeningXOffset:r=0,modalOverlayOpeningYOffset:a=0}=e.options,s=function(e){let t={top:0,left:0};if(!e)return t;let n=e.ownerDocument.defaultView;for(;n!==window.top;){var i,r,a;let e=null==(i=n)?void 0:i.frameElement;if(e){let n=e.getBoundingClientRect();t.top+=n.top+(null!=(r=n.scrollTop)?r:0),t.left+=n.left+(null!=(a=n.scrollLeft)?a:0)}n=n.parent}return t}(e.target),o=function e(t){if(!t)return null;let n=t instanceof HTMLElement&&window.getComputedStyle(t).overflowY;return"hidden"!==n&&"visible"!==n&&t.scrollHeight>=t.clientHeight?t:e(t.parentElement)}(e.target),l=()=>{i=void 0,d(t,n,r+s.left,a+s.top,o,e.target,e._resolvedExtraHighlightElements),i=requestAnimationFrame(l)};l(),window.addEventListener("touchmove",h,{passive:!1})}(e),u()):c()},u,function(e){iU[e?"unshift":"push"](()=>{n(0,a=e)})}]}class rP extends i4{get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}constructor(e){super(),i8(this,e,rD,rR,iE,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}}let rM=new class extends nl{constructor(){super(),this.activeTour=void 0,nw(this)}},r$="undefined"==typeof window;function rL(e){let{active:t,onComplete:n,onSkip:i}=e,{state:r,dispatch:a}=(0,T.useChoresApp)(),s=()=>{a({type:"UPDATE_PARENT_SETTINGS",payload:{onboardingCompleted:!0}})},o=(0,d.useRef)(null),l=(0,d.useRef)(!1),c=(0,d.useRef)({onComplete:n,onSkip:i}),u=(0,d.useRef)({settings:!1,addChild:!1,task:!1}),h=(0,d.useRef)(null);return(0,d.useEffect)(()=>{c.current={onComplete:n,onSkip:i}},[n,i]),(0,d.useEffect)(()=>{if(!t)return;let e=e=>{var t;return!!(null==(t=o.current)?void 0:t.isActive())&&h.current===e&&(o.current.next(),!0)},n=()=>{setTimeout(()=>{var t;(null==(t=o.current)?void 0:t.isActive())&&document.querySelector('[data-tour="approver-form"]')&&e("settings")},800)},i=()=>{var t,i;if(!o.current||!o.current.isActive())return;let r=document.querySelector(".modal-overlay");if(!r){u.current.settings=!1,u.current.addChild=!1,u.current.task=!1;return}let a=(null==r||null==(i=r.querySelector(".modal"))||null==(t=i.querySelector("h2"))?void 0:t.textContent)||"",s=a.includes("Settings")||a.includes("âš™ï¸"),l=a.includes("Add Child"),c=a.includes("Create Task")||a.includes("Edit Task"),d=h.current;if(!d){u.current.settings=s,u.current.addChild=l,u.current.task=c;return}s&&!u.current.settings&&("welcome"===d?o.current&&(o.current.next(),setTimeout(()=>{n()},300)):n()),l&&!u.current.addChild&&("add-child"===d||document.querySelector('[data-tour="child-name-input"]'))&&setTimeout(()=>{var t;(null==(t=o.current)?void 0:t.isActive())&&e("add-child")},500),c&&!u.current.task&&("add-task"===d||document.querySelector('[data-tour="task-title-input"]'))&&setTimeout(()=>{var t;(null==(t=o.current)?void 0:t.isActive())&&e("add-task")},500),u.current.settings=s,u.current.addChild=l,u.current.task=c},r=new MutationObserver(e=>{var t,n,r;if(null==(t=o.current)?void 0:t.isActive()){for(let t of e)for(let e of t.addedNodes)if(e.nodeType===Node.ELEMENT_NODE&&((null==(n=e.classList)?void 0:n.contains("modal-overlay"))||(null==(r=e.querySelector)?void 0:r.call(e,".modal-overlay"))))return void setTimeout(i,100);i()}});r.observe(document.body,{childList:!0,subtree:!0});let a=setInterval(i,200);return i(),()=>{r.disconnect(),clearInterval(a)}},[t]),(0,d.useEffect)(()=>{if(!t){o.current&&(o.current.complete(),o.current=null),l.current=!1;return}if(l.current||o.current)return;o.current&&(o.current.complete(),o.current=null);let e=new rM.Tour({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},classes:"shepherd-theme-custom",scrollTo:{behavior:"smooth",block:"center"},modalOverlayOpeningPadding:4,modalOverlayOpeningRadius:8}});return e.on("show",e=>{var t;h.current=(null==e||null==(t=e.step)?void 0:t.id)||null}),e.addStep({id:"welcome",text:"Welcome! This app helps families manage chores with rewards, timers, and parent approval. Let's get you set up. First, you'll need to create an \"approver\" - this is a parent PIN that lets you approve task completions and other actions.",title:"Welcome to Family Chores",attachTo:{element:"body",on:"auto"},buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"Get Started â†’",action:e.next,classes:"shepherd-button-primary"}]}),e.addStep({id:"settings",text:"Click the Settings button to open the settings panel where you can create your first approver. An approver is a parent who can approve task completions, early completions, and other actions using a 4-digit PIN. The tour will automatically continue once you open Settings.",title:"Step 1: Open Settings",attachTo:{element:'[data-tour="settings-button"]',on:"bottom"},buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:e.back,classes:"shepherd-button-secondary"},{text:"Open Settings â†’",action:()=>{let t=document.querySelector('[data-tour="settings-button"]');if(t){t.click();let n=setInterval(()=>{var t,i,r,a;(null==(a=document.querySelector(".modal-overlay"))||null==(r=a.querySelector(".modal"))||null==(i=r.querySelector("h2"))||null==(t=i.textContent)?void 0:t.includes("Settings"))&&(clearInterval(n),setTimeout(()=>{e.next()},300))},100);setTimeout(()=>clearInterval(n),2e3)}else e.next()},classes:"shepherd-button-primary"}]}),e.addStep({id:"modal-approver-form",text:'Great! Now in the Settings modal, scroll to the "Approvers" section. Enter a handle (like "Dad" or "Mom"), a 4-digit PIN, confirm the PIN, then click "Add Approver". This creates your first parent approver who can approve task completions. The tour will automatically continue once you add an approver.',title:"Step 2: Create Your First Approver",beforeShowPromise:function(){return new Promise(e=>{let t=()=>{document.querySelector('[data-tour="approver-form"]')?e():setTimeout(t,50)};t(),setTimeout(()=>e(),5e3)})},attachTo:{element:'[data-tour="approver-form"]',on:"top"},buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:()=>{var t;let n=null==(t=document.querySelector(".modal-overlay"))?void 0:t.querySelector(".close");n&&n.click(),setTimeout(()=>e.back(),300)},classes:"shepherd-button-secondary"},{text:"Skip Approver Setup â†’",action:()=>{("function"==typeof e.getById?!!e.getById("wallet"):Array.isArray(e.steps)&&e.steps.some(e=>"wallet"===e.id))?e.show("wallet"):(s(),e.complete(),c.current.onComplete())},classes:"shepherd-button-secondary"}]}),e.addStep({id:"add-child",text:'Now let\'s add your first child. Children are the family members who will complete tasks. Each child can earn stars and money rewards. Click the "+ Add Child" button to add a child. The tour will automatically continue once you open the modal.',title:"Step 3: Add Your First Child",attachTo:{element:'[data-tour="add-child-button"]',on:"top"},buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:e.back,classes:"shepherd-button-secondary"},{text:"Open Add Child â†’",action:()=>{var t;let n=null==(t=document.querySelector(".modal-overlay"))?void 0:t.querySelector(".close");n&&n.click(),setTimeout(()=>{let t=document.querySelector('[data-tour="add-child-button"]');if(t){t.click();let n=setInterval(()=>{var t,i,r,a;(null==(a=document.querySelector(".modal-overlay"))||null==(r=a.querySelector(".modal"))||null==(i=r.querySelector("h2"))||null==(t=i.textContent)?void 0:t.includes("Add Child"))&&(clearInterval(n),setTimeout(()=>{e.next()},300))},100);setTimeout(()=>clearInterval(n),2e3)}else e.next()},300)},classes:"shepherd-button-primary"}]}),e.addStep({id:"modal-add-child",text:'In the "Add Child" modal, enter the child\'s name and optionally a blockchain address. Click "Add" when done. You can add multiple children later. Each child will have their own column on the main screen showing their assigned tasks. The tour will automatically continue once you add a child.',title:"Step 4: Enter Child's Name",beforeShowPromise:function(){return new Promise(e=>{let t=()=>{document.querySelector('[data-tour="add-child-modal"]')?e():setTimeout(t,50)};t(),setTimeout(()=>e(),5e3)})},attachTo:{element:'[data-tour="add-child-modal"]',on:"auto"},modalOverlayOpeningPadding:200,buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:()=>{var t;let n=null==(t=document.querySelector(".modal-overlay"))?void 0:t.querySelector(".close");n&&n.click(),setTimeout(()=>e.back(),300)},classes:"shepherd-button-secondary"},{text:"Skip Adding Child â†’",action:()=>{var t;let n=null==(t=document.querySelector(".modal-overlay"))?void 0:t.querySelector(".close");n&&n.click(),("function"==typeof e.getById?!!e.getById("wallet"):Array.isArray(e.steps)&&e.steps.some(e=>"wallet"===e.id))?setTimeout(()=>e.show("wallet"),300):(s(),e.complete(),c.current.onComplete())},classes:"shepherd-button-secondary"}]}),e.addStep({id:"add-task",text:'Now let\'s create your first task! Tasks can be recurring (daily, weekly, etc.) or one-time. You can also add timers with rewards for completing on time. Click "+ Add Chore" to create a task. The tour will automatically continue once you open the task modal.',title:"Step 5: Create Your First Task",attachTo:{element:'[data-tour="add-task-button"]',on:"top"},buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:e.back,classes:"shepherd-button-secondary"},{text:"Open Add Task â†’",action:()=>{let t=document.querySelector('[data-tour="add-task-button"]');if(t){t.click();let n=setInterval(()=>{var t,i,r,a,s,o,l,c;((null==(a=document.querySelector(".modal-overlay"))||null==(r=a.querySelector(".modal"))||null==(i=r.querySelector("h2"))||null==(t=i.textContent)?void 0:t.includes("Create Task"))||(null==(c=document.querySelector(".modal-overlay"))||null==(l=c.querySelector(".modal"))||null==(o=l.querySelector("h2"))||null==(s=o.textContent)?void 0:s.includes("Edit Task")))&&(clearInterval(n),setTimeout(()=>{e.next()},300))},100);setTimeout(()=>clearInterval(n),2e3)}else e.next()},classes:"shepherd-button-primary"}]}),e.addStep({id:"modal-add-task",text:'In the task creation modal, enter a title (like "Take out trash"). You can add an emoji and color. Choose the task type: Recurring (repeats daily/weekly) or One-off (single task). You can also enable timer settings for either type. Set star and money rewards, then click "Create". The tour will automatically continue once you create a task.',title:"Step 6: Create Your Task",beforeShowPromise:function(){return new Promise(e=>{let t=()=>{document.querySelector('[data-tour="task-modal"]')?e():setTimeout(t,50)};t(),setTimeout(()=>e(),5e3)})},attachTo:{element:'[data-tour="task-modal"]',on:"auto"},modalOverlayOpeningPadding:200,buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:()=>{var t;let n=null==(t=document.querySelector(".modal-overlay"))?void 0:t.querySelector(".close");n&&n.click(),setTimeout(()=>e.back(),300)},classes:"shepherd-button-secondary"},{text:"Skip Creating Task â†’",action:()=>{var t;let n=null==(t=document.querySelector(".modal-overlay"))?void 0:t.querySelector(".close");n&&n.click(),setTimeout(()=>e.next(),300)},classes:"shepherd-button-secondary"}]}),e.addStep({id:"explain-assignment",text:"After creating tasks, you can assign them to children by dragging tasks to their columns, or by editing the task. Tasks appear in each child's column and can be marked complete. If parent approval is required, an approver will need to verify completion.",title:"Task Assignment",attachTo:{element:"body",on:"auto"},buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:e.back,classes:"shepherd-button-secondary"},{text:"Next â†’",action:e.next,classes:"shepherd-button-primary"}]}),e.addStep({id:"wallet",text:'Optionally, you can connect a blockchain wallet for payments. This allows you to send cryptocurrency rewards to children. This is completely optional - you can use the app without it. Click "Connect Wallet" if you want to set this up, or skip this step.',title:"Step 7: Connect Wallet (Optional)",attachTo:{element:'[data-tour="wallet-button"]',on:"bottom"},buttons:[{text:"Skip Tour",action:()=>{s(),e.complete(),c.current.onSkip()},classes:"shepherd-button-secondary"},{text:"â† Back",action:e.back,classes:"shepherd-button-secondary"},{text:"Finish",action:()=>{s(),e.complete(),c.current.onComplete()},classes:"shepherd-button-primary"}]}),e.on("complete",()=>{s(),l.current=!1,o.current=null,c.current.onComplete(),h.current=null}),e.on("cancel",()=>{s(),l.current=!1,o.current=null,c.current.onSkip(),h.current=null}),o.current=e,l.current=!0,setTimeout(()=>{o.current===e&&e.start()},300),()=>{o.current===e&&(e.complete(),o.current=null,l.current=!1)}},[t]),(0,d.useEffect)(()=>{if(!t||!o.current||!o.current.isActive())return;let e=o.current.getCurrentStep();if(e)switch(e.id){case"settings":case"modal-approver-form":if(r.parentSettings.pins&&r.parentSettings.pins.length>0){var n;let e=null==(n=document.querySelector(".modal-overlay"))?void 0:n.querySelector(".close");e&&e.click(),setTimeout(()=>{var e;if(null==(e=o.current)?void 0:e.isActive()){let e=o.current.steps.findIndex(e=>"add-child"===e.id);-1!==e?o.current.show(e):o.current.next()}},500)}break;case"add-child":case"modal-add-child":r.children.length>0&&setTimeout(()=>{var e;if(null==(e=o.current)?void 0:e.isActive()){let e=o.current.steps.findIndex(e=>"add-task"===e.id);-1!==e?o.current.show(e):o.current.next()}},1e3);break;case"add-task":case"modal-add-task":r.tasks.length>0&&setTimeout(()=>{var e;(null==(e=o.current)?void 0:e.isActive())&&o.current.next()},1e3)}},[r.parentSettings.pins,r.children.length,r.tasks.length,t]),null}rM.Step=r$?class{constructor(e){}}:rO,rM.Tour=r$?class{constructor(e,t){}}:class extends nl{addStep(e,t){let n=e;return n instanceof rO?n.tour=this:n=new rO(this,n),no(t)?this.steps.push(n):this.steps.splice(t,0,n),n}addSteps(e){return Array.isArray(e)&&e.forEach(e=>{this.addStep(e)}),this}back(){let e=this.steps.indexOf(this.currentStep);this.show(e-1,!1)}async cancel(){if(this.options.confirmCancel){let e=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";(na(this.options.confirmCancel)?await this.options.confirmCancel():window.confirm(e))&&this._done("cancel")}else this._done("cancel")}complete(){this._done("complete")}getById(e){return this.steps.find(t=>t.id===e)}getCurrentStep(){return this.currentStep}hide(){let e=this.getCurrentStep();if(e)return e.hide()}isActive(){return rM.activeTour===this}next(){let e=this.steps.indexOf(this.currentStep);e===this.steps.length-1?this.complete():this.show(e+1,!0)}removeStep(e){let t=this.getCurrentStep();this.steps.some((t,n)=>{if(t.id===e)return t.isOpen()&&t.hide(),t.destroy(),this.steps.splice(n,1),!0}),t&&t.id===e&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=ns(e)?this.getById(e):this.steps[e];n&&(this._updateStateBeforeShow(),na(n.options.showOn)&&!n.options.showOn()?this._skipStep(n,t):(this.currentStep=n,this.trigger("show",{step:n,previous:this.currentStep}),n.show()))}async start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this.setupModal(),this._setupActiveTour(),this.next()}_done(e){let t=this.steps.indexOf(this.currentStep);Array.isArray(this.steps)&&this.steps.forEach(e=>e.destroy());if(this){let{steps:e}=this;e.forEach(e=>{e.options&&!1===e.options.canClickTarget&&e.options.attachTo&&(nr(e.target)&&e.target.classList.remove("shepherd-target-click-disabled"),e._resolvedExtraHighlightElements&&e._resolvedExtraHighlightElements.forEach(e=>{nr(e)&&e.classList.remove("shepherd-target-click-disabled")}))})}if(this.trigger(e,{index:t}),rM.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),("cancel"===e||"complete"===e)&&this.modal){let e=document.querySelector(".shepherd-modal-overlay-container");e&&(e.remove(),this.modal=null)}nr(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),rM.activeTour=this}setupModal(){this.modal=new rP({target:this.options.modalContainer||document.body,props:{styles:this.styles}})}_skipStep(e,t){let n=this.steps.indexOf(e);n===this.steps.length-1?this.complete():this.show(t?n+1:n-1,t)}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(e){let t=this.options.tourName||"tour",n=e||nS();this.id="".concat(t,"--").concat(n)}constructor(e={}){return super(),this.trackedEvents=["active","cancel","complete","show"],this.classPrefix=void 0,this.currentStep=void 0,this.focusedElBeforeOpen=void 0,this.id=void 0,this.modal=void 0,this.options=void 0,this.steps=void 0,nw(this),this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},e),this.classPrefix=n_(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(e=>{(e=>{this.on(e,t=>{(t=t||{}).tour=this,rM.trigger(e,t)})})(e)}),this._setTourID(e.id),this}};let{chains:rz,publicClient:rB}=(0,h.configureChains)([p.mainnet,m,w],[function(e){return e.rpcUrls.public.http[0]?{chain:e,rpcUrls:e.rpcUrls.public}:null}]),rF=(0,u.createConfig)({autoConnect:!0,connectors:[new _.InjectedConnector({chains:rz})],publicClient:rB});function rU(e){let{children:t}=e,[n,i]=(0,d.useState)(!1),[r,a]=(0,d.useState)(!1),[s,o]=(0,d.useState)(!1),[l,h]=(0,d.useState)(null),[p,f]=(0,d.useState)(!1),[m,g]=(0,d.useState)(null),[y,v]=(0,d.useState)(!1),[b,x]=(0,d.useState)(!1),[w,_]=(0,d.useState)(!1),[S,E]=(0,d.useState)(null),[j,N]=(0,d.useState)(null),[R,D]=(0,d.useState)(null),[P,M]=(0,d.useState)(!1),{state:$,dispatch:L}=(0,T.useChoresApp)();d.default.useEffect(()=>{if(!0===$.parentSettings.onboardingCompleted)return void M(!1);$.parentSettings.pins&&$.parentSettings.pins.length>0||M(!0)},[$.parentSettings.onboardingCompleted,$.parentSettings.pins]);let z=()=>{n&&i(!1),y&&v(!1),x(!0)},B=()=>{n&&i(!1),v(!0)},[F,U]=d.default.useState(!1),[H,q]=d.default.useState(null);return(0,c.jsx)(u.WagmiConfig,{config:rF,children:(0,c.jsx)(k.ModalControlContext.Provider,{value:{openTaskEditModal:(e,t,n)=>{let i=String(e),r=$.tasks.find(e=>e.id===i);r&&(E(r),N(t||null),D(n||null),_(!0))},openAddTaskModal:e=>{h(e),x(!0)},openEditChildModal:e=>{g(e),f(!0)},openAddChildModal:B,openAddChoreModal:z,openEditChoreModal:()=>{},openOneOffTaskModal:e=>{h(e),a(!0)}},children:(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)(C,{onSettingsClick:()=>{y&&v(!1),b&&x(!1),w&&_(!1),i(!0)},onSyncClick:()=>o(!0)}),(0,c.jsx)(I,{open:n,onClose:()=>i(!1)}),(0,c.jsx)(nn,{open:b,onClose:()=>x(!1)}),(0,c.jsx)(nn,{open:w,onClose:()=>{_(!1),E(null),N(null),D(null)},initialTask:S,editOption:j,editInstanceId:R}),(0,c.jsx)(t7,{open:y,onClose:()=>v(!1),onAdd:e=>{L({type:"SET_STATE",payload:{...$,children:[...$.children,{id:$.children.length>0?Math.max(...$.children.map(e=>e.id))+1:1,name:e.name,stars:0,money:0,blockchainAddress:e.blockchainAddress}]}})}}),(0,c.jsx)(t9,{open:p,onClose:()=>f(!1),child:$.children.find(e=>e.id===m)||null,onSave:e=>{L({type:"SET_STATE",payload:{...$,children:$.children.map(t=>t.id===e.id?{...t,...e}:t)}}),f(!1)},onDelete:e=>{q(e),U(!0)}}),(0,c.jsx)(O,{open:r,onClose:()=>a(!1),childId:l||void 0}),(0,c.jsx)(t4,{open:s,onClose:()=>o(!1)}),(0,c.jsx)(rL,{active:P,onComplete:()=>{M(!1)},onSkip:()=>{M(!1)}}),(0,c.jsx)(A.default,{open:F,onClose:()=>{U(!1),q(null)},onConfirm:()=>{null!==H&&(L({type:"SET_STATE",payload:{...$,children:$.children.filter(e=>e.id!==H)}}),q(null),f(!1))},title:"Delete Child",message:"Are you sure you want to delete this child? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmButtonClass:"btn btn-danger"}),(0,c.jsx)("div",{className:"layout-content",children:t}),(0,c.jsxs)("div",{style:{position:"fixed",bottom:10,right:10,zIndex:2e3,pointerEvents:"auto"},children:[(0,c.jsx)("button",{className:"btn btn-primary",onClick:B,style:{marginRight:4,pointerEvents:"auto"},"data-tour":"add-child-button",children:"+ Add Child"}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:z,style:{pointerEvents:"auto"},"data-tour":"add-task-button",children:"+ Add Chore"})]})]})})})}function rH(e){let{Component:t,pageProps:n}=e;return(0,c.jsx)(T.ChoresAppProvider,{children:(0,c.jsx)(rU,{children:(0,c.jsx)(t,{...n})})})}},68146,(e,t,n)=>{let i="/_app";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>e.r(3115)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([i])})}]);
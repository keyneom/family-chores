(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89854,(e,t,a)=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},67928,(e,t,a)=>{let n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];a.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},a.getSymbolTotalCodewords=function(e){return r[e]},a.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},a.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');n=e},a.isKanjiModeEnabled=function(){return void 0!==n},a.toSJIS=function(e){return n(e)}},50715,(e,t,a)=>{a.L={bit:1},a.M={bit:0},a.Q={bit:3},a.H={bit:2},a.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},a.from=function(e,t){if(a.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return a.L;case"m":case"medium":return a.M;case"q":case"quartile":return a.Q;case"h":case"high":return a.H;default:throw Error("Unknown EC Level: "+e)}}catch(e){return t}}},83703,(e,t,a)=>{function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(let a=0;a<t;a++)this.putBit((e>>>t-a-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=n},49307,(e,t,a)=>{function n(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}n.prototype.set=function(e,t,a,n){let r=e*this.size+t;this.data[r]=a,n&&(this.reservedBit[r]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,a){this.data[e*this.size+t]^=a},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=n},88487,(e,t,a)=>{let n=e.r(67928).getSymbolSize;a.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,a=n(e),r=145===a?26:2*Math.ceil((a-13)/(2*t-2)),i=[a-7];for(let e=1;e<t-1;e++)i[e]=i[e-1]-r;return i.push(6),i.reverse()},a.getPositions=function(e){let t=[],n=a.getRowColCoords(e),r=n.length;for(let e=0;e<r;e++)for(let a=0;a<r;a++)(0!==e||0!==a)&&(0!==e||a!==r-1)&&(e!==r-1||0!==a)&&t.push([n[e],n[a]]);return t}},19315,(e,t,a)=>{let n=e.r(67928).getSymbolSize;a.getPositions=function(e){let t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},500,(e,t,a)=>{a.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let n={N1:3,N2:3,N3:40,N4:10};a.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},a.from=function(e){return a.isValid(e)?parseInt(e,10):void 0},a.getPenaltyN1=function(e){let t=e.size,a=0,r=0,i=0,s=null,o=null;for(let l=0;l<t;l++){r=i=0,s=o=null;for(let d=0;d<t;d++){let t=e.get(l,d);t===s?r++:(r>=5&&(a+=n.N1+(r-5)),s=t,r=1),(t=e.get(d,l))===o?i++:(i>=5&&(a+=n.N1+(i-5)),o=t,i=1)}r>=5&&(a+=n.N1+(r-5)),i>=5&&(a+=n.N1+(i-5))}return a},a.getPenaltyN2=function(e){let t=e.size,a=0;for(let n=0;n<t-1;n++)for(let r=0;r<t-1;r++){let t=e.get(n,r)+e.get(n,r+1)+e.get(n+1,r)+e.get(n+1,r+1);(4===t||0===t)&&a++}return a*n.N2},a.getPenaltyN3=function(e){let t=e.size,a=0,r=0,i=0;for(let n=0;n<t;n++){r=i=0;for(let s=0;s<t;s++)r=r<<1&2047|e.get(n,s),s>=10&&(1488===r||93===r)&&a++,i=i<<1&2047|e.get(s,n),s>=10&&(1488===i||93===i)&&a++}return a*n.N3},a.getPenaltyN4=function(e){let t=0,a=e.data.length;for(let n=0;n<a;n++)t+=e.data[n];return Math.abs(Math.ceil(100*t/a/5)-10)*n.N4},a.applyMask=function(e,t){let n=t.size;for(let r=0;r<n;r++)for(let i=0;i<n;i++)t.isReserved(i,r)||t.xor(i,r,function(e,t,n){switch(e){case a.Patterns.PATTERN000:return(t+n)%2==0;case a.Patterns.PATTERN001:return t%2==0;case a.Patterns.PATTERN010:return n%3==0;case a.Patterns.PATTERN011:return(t+n)%3==0;case a.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case a.Patterns.PATTERN101:return t*n%2+t*n%3==0;case a.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case a.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,i,r))},a.getBestMask=function(e,t){let n=Object.keys(a.Patterns).length,r=0,i=1/0;for(let s=0;s<n;s++){t(s),a.applyMask(s,e);let n=a.getPenaltyN1(e)+a.getPenaltyN2(e)+a.getPenaltyN3(e)+a.getPenaltyN4(e);a.applyMask(s,e),n<i&&(i=n,r=s)}return r}},35188,(e,t,a)=>{let n=e.r(50715),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];a.getBlocksCount=function(e,t){switch(t){case n.L:return r[(e-1)*4+0];case n.M:return r[(e-1)*4+1];case n.Q:return r[(e-1)*4+2];case n.H:return r[(e-1)*4+3];default:return}},a.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return i[(e-1)*4+0];case n.M:return i[(e-1)*4+1];case n.Q:return i[(e-1)*4+2];case n.H:return i[(e-1)*4+3];default:return}}},55341,(e,t,a)=>{let n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),a.log=function(e){if(e<1)throw Error("log("+e+")");return r[e]},a.exp=function(e){return n[e]},a.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},9256,(e,t,a)=>{let n=e.r(55341);a.mul=function(e,t){let a=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)a[r+i]^=n.mul(e[r],t[i]);return a},a.mod=function(e,t){let a=new Uint8Array(e);for(;a.length-t.length>=0;){let e=a[0];for(let r=0;r<t.length;r++)a[r]^=n.mul(t[r],e);let r=0;for(;r<a.length&&0===a[r];)r++;a=a.slice(r)}return a},a.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=a.mul(t,new Uint8Array([1,n.exp(r)]));return t}},72976,(e,t,a)=>{let n=e.r(9256);function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let a=n.mod(t,this.genPoly),r=this.degree-a.length;if(r>0){let e=new Uint8Array(this.degree);return e.set(a,r),e}return a},t.exports=r},76045,(e,t,a)=>{a.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},59774,(e,t,a)=>{let n="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",i="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";a.KANJI=RegExp(r,"g"),a.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),a.BYTE=RegExp(i,"g"),a.NUMERIC=RegExp(n,"g"),a.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let s=RegExp("^"+r+"$"),o=RegExp("^"+n+"$"),l=RegExp("^[A-Z0-9 $%*+\\-./:]+$");a.testKanji=function(e){return s.test(e)},a.testNumeric=function(e){return o.test(e)},a.testAlphanumeric=function(e){return l.test(e)}},88023,(e,t,a)=>{let n=e.r(76045),r=e.r(59774);a.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},a.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},a.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},a.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},a.MIXED={bit:-1},a.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!n.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},a.getBestModeForData=function(e){return r.testNumeric(e)?a.NUMERIC:r.testAlphanumeric(e)?a.ALPHANUMERIC:r.testKanji(e)?a.KANJI:a.BYTE},a.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},a.isValid=function(e){return e&&e.bit&&e.ccBits},a.from=function(e,t){if(a.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return a.NUMERIC;case"alphanumeric":return a.ALPHANUMERIC;case"kanji":return a.KANJI;case"byte":return a.BYTE;default:throw Error("Unknown mode: "+e)}}catch(e){return t}}},97527,(e,t,a)=>{let n=e.r(67928),r=e.r(35188),i=e.r(50715),s=e.r(88023),o=e.r(76045),l=n.getBCHDigit(7973);function d(e,t){return s.getCharCountIndicator(e,t)+4}a.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},a.getCapacity=function(e,t,a){if(!o.isValid(e))throw Error("Invalid QR Code version");void 0===a&&(a=s.BYTE);let i=(n.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t))*8;if(a===s.MIXED)return i;let l=i-d(a,e);switch(a){case s.NUMERIC:return Math.floor(l/10*3);case s.ALPHANUMERIC:return Math.floor(l/11*2);case s.KANJI:return Math.floor(l/13);case s.BYTE:default:return Math.floor(l/8)}},a.getBestVersionForData=function(e,t){let n,r=i.from(t,i.M);if(Array.isArray(e)){if(e.length>1){for(let t=1;t<=40;t++)if(function(e,t){let a=0;return e.forEach(function(e){let n=d(e.mode,t);a+=n+e.getBitsLength()}),a}(e,t)<=a.getCapacity(t,r,s.MIXED))return t;return}if(0===e.length)return 1;n=e[0]}else n=e;return function(e,t,n){for(let r=1;r<=40;r++)if(t<=a.getCapacity(r,n,e))return r}(n.mode,n.getLength(),r)},a.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-l>=0;)t^=7973<<n.getBCHDigit(t)-l;return e<<12|t}},13693,(e,t,a)=>{let n=e.r(67928),r=n.getBCHDigit(1335);a.getEncodedBits=function(e,t){let a=e.bit<<3|t,i=a<<10;for(;n.getBCHDigit(i)-r>=0;)i^=1335<<n.getBCHDigit(i)-r;return(a<<10|i)^21522}},69092,(e,t,a)=>{let n=e.r(88023);function r(e){this.mode=n.NUMERIC,this.data=e.toString()}r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t,a;for(t=0;t+3<=this.data.length;t+=3)a=parseInt(this.data.substr(t,3),10),e.put(a,10);let n=this.data.length-t;n>0&&(a=parseInt(this.data.substr(t),10),e.put(a,3*n+1))},t.exports=r},69579,(e,t,a)=>{let n=e.r(88023),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(e){this.mode=n.ALPHANUMERIC,this.data=e}i.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let a=45*r.indexOf(this.data[t]);a+=r.indexOf(this.data[t+1]),e.put(a,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},t.exports=i},48541,(e,t,a)=>{let n=e.r(88023);function r(e){this.mode=n.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}r.getBitsLength=function(e){return 8*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let t=0,a=this.data.length;t<a;t++)e.put(this.data[t],8)},t.exports=r},99490,(e,t,a)=>{let n=e.r(88023),r=e.r(67928);function i(e){this.mode=n.KANJI,this.data=e}i.getBitsLength=function(e){return 13*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let a=r.toSJIS(this.data[t]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");a=(a>>>8&255)*192+(255&a),e.put(a,13)}},t.exports=i},28488,(e,t,a)=>{"use strict";var n={single_source_shortest_paths:function(e,t,a){var r,i,s,o,l,d,c,h={},u={};u[t]=0;var p=n.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(s in i=(r=p.pop()).value,o=r.cost,l=e[i]||{})l.hasOwnProperty(s)&&(d=o+l[s],c=u[s],(void 0===u[s]||c>d)&&(u[s]=d,p.push(s,d),h[s]=i));if(void 0!==a&&void 0===u[a])throw Error("Could not find a path from "+t+" to "+a+".");return h},extract_shortest_path_from_predecessor_list:function(e,t){for(var a=[],n=t;n;)a.push(n),e[n],n=e[n];return a.reverse(),a},find_path:function(e,t,a){var r=n.single_source_shortest_paths(e,t,a);return n.extract_shortest_path_from_predecessor_list(r,a)},PriorityQueue:{make:function(e){var t,a=n.PriorityQueue,r={};for(t in e=e||{},a)a.hasOwnProperty(t)&&(r[t]=a[t]);return r.queue=[],r.sorter=e.sorter||a.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=n},96540,(e,t,a)=>{let n=e.r(88023),r=e.r(69092),i=e.r(69579),s=e.r(48541),o=e.r(99490),l=e.r(59774),d=e.r(67928),c=e.r(28488);function h(e){return unescape(encodeURIComponent(e)).length}function u(e,t,a){let n,r=[];for(;null!==(n=e.exec(a));)r.push({data:n[0],index:n.index,mode:t,length:n[0].length});return r}function p(e){let t,a,r=u(l.NUMERIC,n.NUMERIC,e),i=u(l.ALPHANUMERIC,n.ALPHANUMERIC,e);return d.isKanjiModeEnabled()?(t=u(l.BYTE,n.BYTE,e),a=u(l.KANJI,n.KANJI,e)):(t=u(l.BYTE_KANJI,n.BYTE,e),a=[]),r.concat(i,t,a).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function m(e,t){switch(t){case n.NUMERIC:return r.getBitsLength(e);case n.ALPHANUMERIC:return i.getBitsLength(e);case n.KANJI:return o.getBitsLength(e);case n.BYTE:return s.getBitsLength(e)}}function g(e,t){let a,l=n.getBestModeForData(e);if((a=n.from(t,l))!==n.BYTE&&a.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+n.toString(a)+".\n Suggested mode is: "+n.toString(l));switch(a===n.KANJI&&!d.isKanjiModeEnabled()&&(a=n.BYTE),a){case n.NUMERIC:return new r(e);case n.ALPHANUMERIC:return new i(e);case n.KANJI:return new o(e);case n.BYTE:return new s(e)}}a.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},a.fromString=function(e,t){let r=function(e,t){let a={},r={start:{}},i=["start"];for(let s=0;s<e.length;s++){let o=e[s],l=[];for(let e=0;e<o.length;e++){let d=o[e],c=""+s+e;l.push(c),a[c]={node:d,lastCount:0},r[c]={};for(let e=0;e<i.length;e++){let s=i[e];a[s]&&a[s].node.mode===d.mode?(r[s][c]=m(a[s].lastCount+d.length,d.mode)-m(a[s].lastCount,d.mode),a[s].lastCount+=d.length):(a[s]&&(a[s].lastCount=d.length),r[s][c]=m(d.length,d.mode)+4+n.getCharCountIndicator(d.mode,t))}}i=l}for(let e=0;e<i.length;e++)r[i[e]].end=0;return{map:r,table:a}}(function(e){let t=[];for(let a=0;a<e.length;a++){let r=e[a];switch(r.mode){case n.NUMERIC:t.push([r,{data:r.data,mode:n.ALPHANUMERIC,length:r.length},{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.ALPHANUMERIC:t.push([r,{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.KANJI:t.push([r,{data:r.data,mode:n.BYTE,length:h(r.data)}]);break;case n.BYTE:t.push([{data:r.data,mode:n.BYTE,length:h(r.data)}])}}return t}(p(e,d.isKanjiModeEnabled())),t),i=c.find_path(r.map,"start","end"),s=[];for(let e=1;e<i.length-1;e++)s.push(r.table[i[e]].node);return a.fromArray(s.reduce(function(e,t){let a=e.length-1>=0?e[e.length-1]:null;return a&&a.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},a.rawSplit=function(e){return a.fromArray(p(e,d.isKanjiModeEnabled()))}},4054,(e,t,a)=>{let n=e.r(67928),r=e.r(50715),i=e.r(83703),s=e.r(49307),o=e.r(88487),l=e.r(19315),d=e.r(500),c=e.r(35188),h=e.r(72976),u=e.r(97527),p=e.r(13693),m=e.r(88023),g=e.r(96540);function f(e,t,a){let n,r,i=e.size,s=p.getEncodedBits(t,a);for(n=0;n<15;n++)r=(s>>n&1)==1,n<6?e.set(n,8,r,!0):n<8?e.set(n+1,8,r,!0):e.set(i-15+n,8,r,!0),n<8?e.set(8,i-n-1,r,!0):n<9?e.set(8,15-n-1+1,r,!0):e.set(8,15-n-1,r,!0);e.set(i-8,8,1,!0)}a.create=function(e,t){let a,p;if(void 0===e||""===e)throw Error("No input text");let _=r.M;return void 0!==t&&(_=r.from(t.errorCorrectionLevel,r.M),a=u.from(t.version),p=d.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,a,r){let p;if(Array.isArray(e))p=g.fromArray(e);else if("string"==typeof e){let n=t;if(!n){let t=g.rawSplit(e);n=u.getBestVersionForData(t,a)}p=g.fromString(e,n||40)}else throw Error("Invalid data");let _=u.getBestVersionForData(p,a);if(!_)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<_)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+_+".\n")}else t=_;let v=function(e,t,a){let r=new i;a.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(r)});let s=(n.getSymbolTotalCodewords(e)-c.getTotalCodewordsCount(e,t))*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);let o=(s-r.getLengthInBits())/8;for(let e=0;e<o;e++)r.put(e%2?17:236,8);return function(e,t,a){let r,i,s=n.getSymbolTotalCodewords(t),o=s-c.getTotalCodewordsCount(t,a),l=c.getBlocksCount(t,a),d=s%l,u=l-d,p=Math.floor(s/l),m=Math.floor(o/l),g=m+1,f=p-m,_=new h(f),v=0,y=Array(l),b=Array(l),w=0,x=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<u?m:g;y[e]=x.slice(v,v+t),b[e]=_.encode(y[e]),v+=t,w=Math.max(w,t)}let k=new Uint8Array(s),S=0;for(r=0;r<w;r++)for(i=0;i<l;i++)r<y[i].length&&(k[S++]=y[i][r]);for(r=0;r<f;r++)for(i=0;i<l;i++)k[S++]=b[i][r];return k}(r,e,t)}(t,a,p),y=new s(n.getSymbolSize(t));!function(e,t){let a=e.size,n=l.getPositions(t);for(let t=0;t<n.length;t++){let r=n[t][0],i=n[t][1];for(let t=-1;t<=7;t++)if(!(r+t<=-1)&&!(a<=r+t))for(let n=-1;n<=7;n++)i+n<=-1||a<=i+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(r+t,i+n,!0,!0):e.set(r+t,i+n,!1,!0))}}(y,t);let b=y.size;for(let e=8;e<b-8;e++){let t=e%2==0;y.set(e,6,t,!0),y.set(6,e,t,!0)}return!function(e,t){let a=o.getPositions(t);for(let t=0;t<a.length;t++){let n=a[t][0],r=a[t][1];for(let t=-2;t<=2;t++)for(let a=-2;a<=2;a++)-2===t||2===t||-2===a||2===a||0===t&&0===a?e.set(n+t,r+a,!0,!0):e.set(n+t,r+a,!1,!0)}}(y,t),f(y,a,0),t>=7&&function(e,t){let a,n,r,i=e.size,s=u.getEncodedBits(t);for(let t=0;t<18;t++)a=Math.floor(t/3),n=t%3+i-8-3,r=(s>>t&1)==1,e.set(a,n,r,!0),e.set(n,a,r,!0)}(y,t),!function(e,t){let a=e.size,n=-1,r=a-1,i=7,s=0;for(let o=a-1;o>0;o-=2)for(6===o&&o--;;){for(let a=0;a<2;a++)if(!e.isReserved(r,o-a)){let n=!1;s<t.length&&(n=(t[s]>>>i&1)==1),e.set(r,o-a,n),-1==--i&&(s++,i=7)}if((r+=n)<0||a<=r){r-=n,n=-n;break}}}(y,v),isNaN(r)&&(r=d.getBestMask(y,f.bind(null,y,a))),d.applyMask(r,y),f(y,a,r),{modules:y,version:t,errorCorrectionLevel:a,maskPattern:r,segments:p}}(e,a,_,p)}},67683,(e,t,a)=>{function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let a=parseInt(t.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:255&a,hex:"#"+t.slice(0,6).join("")}}a.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,a=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:a,scale:a?4:r,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},a.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},a.getImageWidth=function(e,t){let n=a.getScale(e,t);return Math.floor((e+2*t.margin)*n)},a.qrToImageData=function(e,t,n){let r=t.modules.size,i=t.modules.data,s=a.getScale(r,n),o=Math.floor((r+2*n.margin)*s),l=n.margin*s,d=[n.color.light,n.color.dark];for(let t=0;t<o;t++)for(let a=0;a<o;a++){let c=(t*o+a)*4,h=n.color.light;t>=l&&a>=l&&t<o-l&&a<o-l&&(h=d[+!!i[Math.floor((t-l)/s)*r+Math.floor((a-l)/s)]]),e[c++]=h.r,e[c++]=h.g,e[c++]=h.b,e[c]=h.a}}},22556,(e,t,a)=>{let n=e.r(67683);a.render=function(e,t,a){var r;let i=a,s=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(s=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),i=n.getOptions(i);let o=n.getImageWidth(e.modules.size,i),l=s.getContext("2d"),d=l.createImageData(o,o);return n.qrToImageData(d.data,e,i),r=s,l.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=o,r.width=o,r.style.height=o+"px",r.style.width=o+"px",l.putImageData(d,0,0),s},a.renderToDataURL=function(e,t,n){let r=n;void 0!==r||t&&t.getContext||(r=t,t=void 0),r||(r={});let i=a.render(e,t,r),s=r.type||"image/png",o=r.rendererOpts||{};return i.toDataURL(s,o.quality)}},69801,(e,t,a)=>{let n=e.r(67683);function r(e,t){let a=e.a/255,n=t+'="'+e.hex+'"';return a<1?n+" "+t+'-opacity="'+a.toFixed(2).slice(1)+'"':n}function i(e,t,a){let n=e+t;return void 0!==a&&(n+=" "+a),n}a.render=function(e,t,a){let s=n.getOptions(t),o=e.modules.size,l=e.modules.data,d=o+2*s.margin,c=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",h="<path "+r(s.color.dark,"stroke")+' d="'+function(e,t,a){let n="",r=0,s=!1,o=0;for(let l=0;l<e.length;l++){let d=Math.floor(l%t),c=Math.floor(l/t);d||s||(s=!0),e[l]?(o++,l>0&&d>0&&e[l-1]||(n+=s?i("M",d+a,.5+c+a):i("m",r,0),r=0,s=!1),d+1<t&&e[l+1]||(n+=i("h",o),o=0)):r++}return n}(l,o,s.margin)+'"/>',u='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+('viewBox="0 0 '+d+" ")+d+'" shape-rendering="crispEdges">'+c+h+"</svg>\n";return"function"==typeof a&&a(null,u),u}},11797,(e,t,a)=>{let n=e.r(89854),r=e.r(4054),i=e.r(22556),s=e.r(69801);function o(e,t,a,i,s){let o=[].slice.call(arguments,1),l=o.length,d="function"==typeof o[l-1];if(!d&&!n())throw Error("Callback required as last argument");if(d){if(l<2)throw Error("Too few arguments provided");2===l?(s=a,a=t,t=i=void 0):3===l&&(t.getContext&&void 0===s?(s=i,i=void 0):(s=i,i=a,a=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(a=t,t=i=void 0):2!==l||t.getContext||(i=a,a=t,t=void 0),new Promise(function(n,s){try{let s=r.create(a,i);n(e(s,t,i))}catch(e){s(e)}})}try{let n=r.create(a,i);s(null,e(n,t,i))}catch(e){s(e)}}a.create=r.create,a.toCanvas=o.bind(null,i.render),a.toDataURL=o.bind(null,i.renderToDataURL),a.toString=o.bind(null,function(e,t,a){return s.render(e,a)})},3115,e=>{"use strict";let t,a,n,r,i;e.s(["default",()=>an],3115);var s=e.i(91398),o=e.i(91788),l=e.i(51575),d=e.i(51196),c=e.i(75732),h=e.i(60499);let u=(0,h.defineChain)({id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}});var p=e.i(24076),m=e.i(98938),g=e.i(82690),f=e.i(87255);let _={block:(0,m.defineBlock)({format(e){var t;return{transactions:null==(t=e.transactions)?void 0:t.map(e=>{if("string"==typeof e)return e;let t=(0,g.formatTransaction)(e);return"0x7e"===t.typeHex&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?(0,p.hexToBigInt)(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}),stateRoot:e.stateRoot}}}),transaction:(0,g.defineTransaction)({format(e){let t={};return"0x7e"===e.type&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?(0,p.hexToBigInt)(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:(0,f.defineTransactionReceipt)({format:e=>({l1GasPrice:e.l1GasPrice?(0,p.hexToBigInt)(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?(0,p.hexToBigInt)(e.l1GasUsed):null,l1Fee:e.l1Fee?(0,p.hexToBigInt)(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null})})},v=(0,h.defineChain)({id:8453,network:"base",name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://base-mainnet.g.alchemy.com/v2"],webSocket:["wss://base-mainnet.g.alchemy.com/v2"]},infura:{http:["https://base-mainnet.infura.io/v3"],webSocket:["wss://base-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.base.org"]},public:{http:["https://mainnet.base.org"]}},blockExplorers:{blockscout:{name:"Basescout",url:"https://base.blockscout.com"},default:{name:"Basescan",url:"https://basescan.org"},etherscan:{name:"Basescan",url:"https://basescan.org"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022}}},{formatters:_});var y=e.i(8430),b=e.i(85134);function w(){let[e,t]=(0,o.useState)("");return(0,o.useEffect)(()=>{t(new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))},[]),(0,s.jsx)("span",{id:"currentDate",children:e})}function x(e){let{onSettingsClick:t,onSyncClick:a}=e,{address:n,isConnected:r}=(0,l.useAccount)(),{connectAsync:i}=(0,l.useConnect)(),{disconnect:d}=(0,l.useDisconnect)(),[c,h]=o.default.useState(null),u=async()=>{h(null);try{await i({connector:new y.InjectedConnector})}catch(e){if(function(e){var t;if(!e)return!1;let a=String(null!=(t=e.message)?t:String(null!=e?e:"")).toLowerCase();return!!(a.includes("user rejected")||a.includes("user rejected the request")||"string"==typeof e.name&&e.name.toLowerCase().includes("userrejected"))}(e))return void h("Connection request rejected by wallet. Please approve the connection in your wallet.");console.error("Connect failed",e),h(String((null==e?void 0:e.message)||String(e)))}};return(0,s.jsxs)("header",{children:[(0,s.jsx)("h1",{children:"ðŸ  Family Chores"}),(0,s.jsxs)("div",{className:"header-controls",children:[(0,s.jsx)("div",{className:"date-display",children:(0,s.jsx)(w,{})}),(0,s.jsx)("button",{id:"settingsBtn",className:"btn btn-primary",onClick:t,children:"âš™ï¸ Settings"}),(0,s.jsx)("button",{id:"syncBtn",className:"btn btn-secondary",onClick:a,children:"ðŸ“± Sync"}),(0,s.jsxs)("div",{style:{marginLeft:12},children:[r?(0,s.jsx)("button",{className:"btn btn-wallet",onClick:()=>d(),title:n||"",children:n?"".concat(String(n).slice(0,6),"...").concat(String(n).slice(-4)):"Wallet"}):(0,s.jsx)("button",{className:"btn btn-wallet",onClick:u,children:"Connect Wallet"}),c&&(0,s.jsx)("div",{style:{color:"#c00",fontSize:"0.8rem",marginTop:4},children:c})]})]})]})}var k=e.i(66402);function S(t){let{open:a,onClose:n}=t,{state:r,dispatch:i}=(0,k.useChoresApp)(),[l,d]=(0,o.useState)(""),[c,h]=(0,o.useState)(""),[u,p]=(0,o.useState)(""),[m,g]=(0,o.useState)(""),[f,_]=(0,o.useState)("#FFB6C1"),[v,y]=(0,o.useState)(1),[b,w]=(0,o.useState)(.5),[x,S]=(0,o.useState)("daily"),[j,C]=(0,o.useState)([]),[E,N]=(0,o.useState)(""),[A,T]=(0,o.useState)(""),[R,P]=(0,o.useState)(""),[z,M]=(0,o.useState)(""),[D,I]=(0,o.useState)(""),[O,B]=(0,o.useState)(!1),[L,U]=(0,o.useState)(null);if(!a)return null;let F=async()=>{if(!E.trim())return alert("Enter a handle");if(A!==R)return alert("PINs do not match");if(!/^[0-9]{4}$/.test(A))return alert("PIN must be 4 digits");let t=r.parentSettings.pins||[],a=async()=>{try{let{genSalt:a,hashPin:n}=await e.A(90504),r=await a(),s=await n(A,r),o=[...t.filter(e=>e.handle!==E.trim()),{handle:E.trim(),pinHash:s,salt:r}];i({type:"UPDATE_PARENT_SETTINGS",payload:{pins:o}}),N(""),T(""),P(""),alert("Approver added")}catch(e){console.error("pin add error",e),alert("Failed to add approver")}};if(t.length>0){if(!z)return alert("Select an existing approver to authorize this change");if(!/^[0-9]{4}$/.test(D))return alert("Enter current approver PIN (4 digits)");try{let{hashPin:n}=await e.A(90504),s=t.find(e=>e.handle===z);if(!s)return alert("Selected approver not found");if(await n(D,s.salt)!==s.pinHash)return alert("Existing approver PIN is incorrect");await a(),L&&(i({type:"UPDATE_PARENT_SETTINGS",payload:{approvals:{...r.parentSettings.approvals,[L]:!0}}}),U(null))}catch(e){console.error("verify error",e),alert("Verification failed")}}else await a(),L&&(i({type:"UPDATE_PARENT_SETTINGS",payload:{approvals:{...r.parentSettings.approvals,[L]:!0}}}),U(null))},H=(e,t)=>{let a=r.parentSettings.pins||[];if(t&&0===a.length){U(e),B(!0);return}i({type:"UPDATE_PARENT_SETTINGS",payload:{approvals:{...r.parentSettings.approvals,[e]:t}}})};return(0,s.jsx)("div",{className:"modal",style:{display:"block"},children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:"âš™ï¸ Settings"}),(0,s.jsx)("span",{className:"close",onClick:n,children:"Ã—"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsxs)("div",{className:"settings-section",children:[(0,s.jsx)("h3",{children:"ðŸ”’ Parent Settings"}),(0,s.jsxs)("div",{className:"parent-settings",children:[(0,s.jsxs)("div",{className:"approval-settings",children:[(0,s.jsx)("h4",{children:"Require Parent Approval For:"}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:r.parentSettings.approvals.taskMove,onChange:e=>H("taskMove",e.target.checked)})," Moving tasks between children"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:r.parentSettings.approvals.earlyComplete,onChange:e=>H("earlyComplete",e.target.checked)})," Completing tasks early"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:r.parentSettings.approvals.taskComplete,onChange:e=>H("taskComplete",e.target.checked)})," Marking any task complete"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:r.parentSettings.approvals.editTasks,onChange:e=>H("editTasks",e.target.checked)})," Editing tasks and children"]})]}),(0,s.jsxs)("div",{className:"approver-list",style:{marginTop:12},children:[(0,s.jsx)("h4",{children:"Approvers"}),r.parentSettings.pins&&0!==r.parentSettings.pins.length?r.parentSettings.pins.map(e=>(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[(0,s.jsx)("div",{children:e.handle}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>{var t;return t=e.handle,void(confirm("Remove approver ".concat(t,"?"))&&i({type:"UPDATE_PARENT_SETTINGS",payload:{pins:(r.parentSettings.pins||[]).filter(e=>e.handle!==t)}}))},children:"Remove"})})]},e.handle)):(0,s.jsx)("div",{className:"empty-state",children:"No approvers defined. Add one below."}),(0,s.jsxs)("div",{style:{marginTop:8},children:[(0,s.jsx)("input",{placeholder:"Handle (e.g. Dad)",value:E,onChange:e=>N(e.target.value)}),(0,s.jsx)("input",{placeholder:"PIN",type:"password",maxLength:4,style:{marginLeft:8},value:A,onChange:e=>T(e.target.value)}),(0,s.jsx)("input",{placeholder:"Confirm",type:"password",maxLength:4,style:{marginLeft:8},value:R,onChange:e=>P(e.target.value)}),(0,s.jsx)("button",{className:"btn btn-secondary",style:{marginLeft:8},onClick:F,children:"Add Approver"})]})]})]}),O&&(0,s.jsx)("div",{className:"modal",style:{display:"block"},children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h3",{children:"Add Approver"}),(0,s.jsx)("span",{className:"close",onClick:()=>B(!1),children:"Ã—"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsx)("div",{style:{marginBottom:8},children:"No approvers found â€” create the first approver to enable approval flows."}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,s.jsx)("input",{placeholder:"Handle (e.g. Parent)",value:E,onChange:e=>N(e.target.value)}),(0,s.jsx)("input",{placeholder:"PIN",type:"password",maxLength:4,value:A,onChange:e=>T(e.target.value)}),(0,s.jsx)("input",{placeholder:"Confirm",type:"password",maxLength:4,value:R,onChange:e=>P(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:async()=>{await F(),B(!1)},children:"Create Approver"}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>B(!1),children:"Cancel"})]})]})})]}),r.parentSettings.pins&&r.parentSettings.pins.length>0&&(0,s.jsxs)("div",{style:{marginTop:8},children:[(0,s.jsx)("div",{style:{marginBottom:6},children:"To add a new approver, enter an existing approver handle and PIN to authorize this change."}),(0,s.jsxs)("select",{value:z,onChange:e=>M(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"-- Select approver --"}),r.parentSettings.pins.map(e=>(0,s.jsx)("option",{value:e.handle,children:e.handle},e.handle))]}),(0,s.jsx)("input",{type:"password",placeholder:"Existing approver PIN",maxLength:4,style:{marginLeft:8},value:D,onChange:e=>I(e.target.value)})]}),(0,s.jsxs)("div",{className:"settings-section",children:[(0,s.jsx)("h3",{children:"ðŸ‘¥ Children"}),(0,s.jsx)("div",{children:0===r.children.length?(0,s.jsx)("div",{className:"empty-state",children:"No children added yet. Add your first child below."}):r.children.map(e=>(0,s.jsxs)("div",{className:"child-item",children:[(0,s.jsxs)("div",{className:"child-info",children:[(0,s.jsx)("span",{className:"child-name",children:e.name}),(0,s.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:e.blockchainAddress||(0,s.jsx)("em",{children:"No address"})})]}),(0,s.jsx)("div",{className:"child-actions",children:(0,s.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>{i({type:"DELETE_CHILD",payload:e.id})},children:"Delete"})})]},e.id))}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("input",{type:"text",placeholder:"Child name",value:l,onChange:e=>d(e.target.value)}),(0,s.jsx)("input",{type:"text",placeholder:"Blockchain address / ENS (optional)",value:c,onChange:e=>h(e.target.value),style:{marginLeft:8}}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{l.trim()&&(i({type:"ADD_CHILD",payload:{id:Date.now(),name:l.trim(),stars:0,money:0,blockchainAddress:c||void 0}}),d(""),h(""))},children:"Add Child"})]})]}),(0,s.jsxs)("div",{className:"settings-section",children:[(0,s.jsx)("h3",{children:"ðŸ“ Chores"}),(0,s.jsx)("div",{children:r.choreTemplates&&0!==r.choreTemplates.length?r.choreTemplates.map(e=>(0,s.jsxs)("div",{className:"chore-item",children:[(0,s.jsxs)("div",{className:"chore-info",children:[(0,s.jsxs)("span",{children:[e.emoji," ",e.name]}),(0,s.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["â­ ",e.stars," | ðŸ’° $",e.money," | ",e.recurrence]})]}),(0,s.jsx)("div",{className:"chore-actions",children:(0,s.jsx)("button",{className:"btn btn-small btn-danger",onClick:()=>{i({type:"DELETE_CHORE_TEMPLATE",payload:e.id})},children:"Delete"})})]},e.id)):(0,s.jsx)("div",{className:"empty-state",children:"No chore templates created yet. Add your first chore below."})}),(0,s.jsxs)("div",{className:"add-chore-form",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("input",{type:"text",placeholder:"Chore name",value:u,onChange:e=>p(e.target.value)}),(0,s.jsx)("input",{type:"text",placeholder:"Emoji",maxLength:2,value:m,onChange:e=>g(e.target.value)}),(0,s.jsx)("input",{type:"color",value:f,onChange:e=>_(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("input",{type:"number",placeholder:"Stars",min:1,max:5,value:v,onChange:e=>y(Number(e.target.value))}),(0,s.jsx)("input",{type:"number",placeholder:"Money ($)",min:0,step:.25,value:b,onChange:e=>w(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"recurrence-group",children:[(0,s.jsx)("label",{htmlFor:"choreRecurrence",children:"Repeat:"}),(0,s.jsxs)("select",{id:"choreRecurrence",value:x,onChange:e=>S(e.target.value),children:[(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"}),(0,s.jsx)("option",{value:"monthly",children:"Monthly"}),(0,s.jsx)("option",{value:"weekdays",children:"Weekdays Only"}),(0,s.jsx)("option",{value:"weekends",children:"Weekends Only"}),(0,s.jsx)("option",{value:"custom-days",children:"Specific Days"})]})]}),"custom-days"===x&&(0,s.jsxs)("div",{className:"custom-days",children:[(0,s.jsx)("label",{children:"Select days:"}),(0,s.jsx)("div",{className:"days-checkboxes",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:j.includes(t),onChange:e=>{e.target.checked?C([...j,t]):C(j.filter(e=>e!==t))}}),e]},t))})]}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{u.trim()&&(i({type:"ADD_CHORE_TEMPLATE",payload:{id:Date.now(),name:u.trim(),emoji:m||"ðŸ“",color:f,stars:v,money:b,recurrence:x,customDays:"custom-days"===x?j:void 0}}),p(""),g(""),_("#FFB6C1"),y(1),w(.5),S("daily"),C([]))},children:"Add Chore"})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{n()},children:"Save Settings"}),(0,s.jsx)("button",{className:"btn btn-danger",onClick:()=>{confirm("Are you sure you want to reset all data? This cannot be undone.")&&i({type:"RESET_ALL_DATA"})},children:"Reset All Data"})]})]})})}function j(e){let{open:t,onClose:a,task:n,onSave:r}=e,[i,l]=o.default.useState(""),[d,c]=o.default.useState(""),[h,u]=o.default.useState("#cccccc"),[p,m]=o.default.useState(1),[g,f]=o.default.useState(0),[_,v]=o.default.useState("daily"),[y,b]=o.default.useState([]),[w,x]=o.default.useState(!1),[k,S]=o.default.useState(5),[j,C]=o.default.useState(50),[E,N]=o.default.useState(!1);return(o.default.useEffect(()=>{n&&(l(n.name),c(n.emoji),u(n.color),m(n.starReward),f(n.moneyReward),v(n.recurrence),b(n.customDays),x(!!n.timed),S(n.allowedSeconds?Math.round(n.allowedSeconds/60):5),C(n.latePenaltyPercent?Math.round(100*n.latePenaltyPercent):50),N(!!n.autoApproveOnStop))},[n]),t&&n)?(0,s.jsx)("div",{className:"modal",style:{display:t?"block":"none"},children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:"âœï¸ Edit Task"}),(0,s.jsx)("span",{className:"close",onClick:a,children:"Ã—"})]}),(0,s.jsxs)("form",{className:"modal-body",onSubmit:e=>{e.preventDefault(),r({...n,name:i,emoji:d,color:h,starReward:p,moneyReward:g,recurrence:_,customDays:y,timed:w,allowedSeconds:Math.round(60*k),latePenaltyPercent:j/100,autoApproveOnStop:E})},children:[(0,s.jsxs)("label",{children:["Name:",(0,s.jsx)("input",{value:i,onChange:e=>l(e.target.value),required:!0})]}),(0,s.jsxs)("label",{children:["Emoji:",(0,s.jsx)("input",{value:d,onChange:e=>c(e.target.value),maxLength:2,required:!0})]}),(0,s.jsxs)("label",{children:["Color:",(0,s.jsx)("input",{type:"color",value:h,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("label",{children:["Star Reward:",(0,s.jsx)("input",{type:"number",value:p,min:0,onChange:e=>m(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Money Reward:",(0,s.jsx)("input",{type:"number",value:g,min:0,step:.01,onChange:e=>f(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Timed Task:",(0,s.jsx)("input",{type:"checkbox",checked:w,onChange:e=>x(e.target.checked)})]}),w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{children:["Allowed Minutes:",(0,s.jsx)("input",{type:"number",value:k,min:1,onChange:e=>S(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Late Penalty (% of reward when late):",(0,s.jsx)("input",{type:"number",value:j,min:-200,max:200,onChange:e=>C(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Auto-approve on Stop:",(0,s.jsx)("input",{type:"checkbox",checked:E,onChange:e=>N(e.target.checked)})]})]}),(0,s.jsxs)("label",{children:["Recurrence:",(0,s.jsxs)("select",{value:_,onChange:e=>v(e.target.value),children:[(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"}),(0,s.jsx)("option",{value:"monthly",children:"Monthly"}),(0,s.jsx)("option",{value:"weekdays",children:"Weekdays Only"}),(0,s.jsx)("option",{value:"weekends",children:"Weekends Only"}),(0,s.jsx)("option",{value:"custom-days",children:"Specific Days"})]})]}),"custom-days"===_&&(0,s.jsxs)("div",{className:"custom-days",children:[(0,s.jsx)("label",{children:"Select days:"}),(0,s.jsx)("div",{className:"days-checkboxes",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:y.includes(t),onChange:e=>{e.target.checked?b([...y,t]):b(y.filter(e=>e!==t))}}),e]},t))})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Save"}),(0,s.jsx)("button",{className:"btn",type:"button",onClick:a,children:"Cancel"})]})]})]})}):null}function C(e){let{open:t,onClose:a,onAdd:n}=e,[r,i]=(0,o.useState)(""),[l,d]=(0,o.useState)(""),[c,h]=(0,o.useState)("#cccccc"),[u,p]=(0,o.useState)(1),[m,g]=(0,o.useState)(0);return t?(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h2",{children:"Add Task"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n({name:r,emoji:l,color:c,starReward:u,moneyReward:m}),i(""),d(""),h("#cccccc"),p(1),g(0),a()},children:[(0,s.jsxs)("label",{children:["Name:",(0,s.jsx)("input",{value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,s.jsxs)("label",{children:["Emoji:",(0,s.jsx)("input",{value:l,onChange:e=>d(e.target.value),maxLength:2,required:!0})]}),(0,s.jsxs)("label",{children:["Color:",(0,s.jsx)("input",{type:"color",value:c,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("label",{children:["Star Reward:",(0,s.jsx)("input",{type:"number",value:u,min:0,onChange:e=>p(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Money Reward:",(0,s.jsx)("input",{type:"number",value:m,min:0,step:.01,onChange:e=>g(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{type:"submit",children:"Add"}),(0,s.jsx)("button",{type:"button",onClick:a,children:"Cancel"})]})]})]})}):null}var E=e.i(55824);function N(e){let{open:t,onClose:a,childId:n}=e,{dispatch:r}=(0,k.useChoresApp)(),[i,l]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[h,u]=(0,o.useState)("#FFB6C1"),[p,m]=(0,o.useState)(1),[g,f]=(0,o.useState)(.5),[_,v]=(0,o.useState)(new Date().toISOString().split("T")[0]),[y,b]=(0,o.useState)("any-child");return t?(0,s.jsx)("div",{className:"modal",style:{display:"block"},children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:"âž• Add One-off Task"}),(0,s.jsx)("span",{className:"close",onClick:a,children:"Ã—"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{children:"Task Name:"}),(0,s.jsx)("input",{type:"text",placeholder:"Task name",value:i,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{children:"Emoji:"}),(0,s.jsx)("input",{type:"text",placeholder:"Emoji",maxLength:2,value:d,onChange:e=>c(e.target.value)}),(0,s.jsx)("label",{children:"Color:"}),(0,s.jsx)("input",{type:"color",value:h,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{children:"Star Reward:"}),(0,s.jsx)("input",{type:"number",min:1,max:5,value:p,onChange:e=>m(Number(e.target.value))}),(0,s.jsx)("label",{children:"Money Reward:"}),(0,s.jsx)("input",{type:"number",min:0,step:.25,value:g,onChange:e=>f(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{children:"Date:"}),(0,s.jsx)("input",{type:"date",value:_,onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("label",{children:"Task Type:"}),(0,s.jsxs)("select",{value:y,onChange:e=>b(e.target.value),children:[(0,s.jsx)("option",{value:"any-child",children:"Any child can complete"}),(0,s.jsx)("option",{value:"first-come",children:"First child to claim gets it"}),(0,s.jsx)("option",{value:"all-children",children:"Each child can complete once"})]})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!i.trim())return;let e={id:Date.now(),name:i.trim(),emoji:d||"ðŸ“",color:h,starReward:p,moneyReward:g,date:_,type:y,assignedTo:"any-child"===y&&n?n:void 0};r({type:"ADD_ONE_OFF_TASK",payload:{date:_,task:e}}),l(""),c(""),u("#FFB6C1"),m(1),f(.5),v(new Date().toISOString().split("T")[0]),b("any-child"),a()},children:"Add Task"}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:a,children:"Cancel"})]})]})}):null}var A=e.i(11797);class T{static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await T.listCameras(!1)).length}catch(e){return!1}}static async listCameras(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind),a;try{e&&(await t()).every(e=>!e.label)&&(a=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(e){}try{return(await t()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":"Camera ".concat(t+1))}))}finally{a&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),T._stopVideoStream(a))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(e){return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),T._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),T._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?T._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(T._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(t(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,a,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s,o=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(s=t.scanRegion,a=t.qrEngine,n=t.canvas,r=t.disallowCanvasResizing||!1,i=t.alsoTryWithoutScanRegion||!1,o=!0):t||a||n||r||i?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!a;try{let l,d,c;if([a,l]=await Promise.all([a||T.createQrEngine(),T._loadImage(e)]),[n,d]=T._drawToCanvas(l,s,n,r),a instanceof Worker){let e=a;t||T._postWorkerMessageSync(e,"inversionMode","both"),c=await new Promise((t,a)=>{let r,i,o,l=-1;i=n=>{n.data.id===l&&(e.removeEventListener("message",i),e.removeEventListener("error",o),clearTimeout(r),null!==n.data.data?t({data:n.data.data,cornerPoints:T._convertPoints(n.data.cornerPoints,s)}):a(T.NO_QR_CODE_FOUND))},o=t=>{e.removeEventListener("message",i),e.removeEventListener("error",o),clearTimeout(r),a("Scanner error: "+(t?t.message||t:"Unknown Error"))},e.addEventListener("message",i),e.addEventListener("error",o),r=setTimeout(()=>o("timeout"),1e4);let c=d.getImageData(0,0,n.width,n.height);l=T._postWorkerMessageSync(e,"decode",c,[c.data.buffer])})}else c=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[t]=await a.detect(n);if(!t)throw T.NO_QR_CODE_FOUND;return{data:t.rawValue,cornerPoints:T._convertPoints(t.cornerPoints,s)}}catch(a){if(t=a.message||a,/not implemented|service unavailable/.test(t))return T._disableBarcodeDetector=!0,T.scanImage(e,{scanRegion:s,canvas:n,disallowCanvasResizing:r,alsoTryWithoutScanRegion:i});throw"Scanner error: ".concat(t)}})()]);return o?c:c.data}catch(l){if(!s||!i)throw l;let t=await T.scanImage(e,{qrEngine:a,canvas:n,disallowCanvasResizing:r});return o?t:t.data}finally{t||T._postWorkerMessage(a,"close")}}setGrayscaleWeights(e,t,a){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];T._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:a,useIntegerApproximation:n})}setInversionMode(e){T._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(t){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>e.A(5630).then(e=>e.createWorker()),!(!T._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return t();let a=navigator.userAgentData;return a&&a.brands.some(e=>{let{brand:t}=e;return/Chromium/i.test(t)})&&/mac ?OS/i.test(a.platform)&&await a.getHighEntropyValues(["architecture","platformVersion"]).then(e=>{let{architecture:t,platformVersion:a}=e;return/arm/i.test(t||"arm")&&13<=parseInt(a||"13")}).catch(()=>!0)?t():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,a=e.videoHeight,n=e.offsetWidth,r=e.offsetHeight,i=e.offsetLeft,s=e.offsetTop,o=window.getComputedStyle(e),l=o.objectFit,d=t/a,c=n/r;switch(l){case"none":var h=t,u=a;break;case"fill":h=n,u=r;break;default:("cover"===l?d>c:d<c)?h=(u=r)*d:u=(h=n)/d,"scale-down"===l&&(h=Math.min(h,t),u=Math.min(u,a))}var[p,m]=o.objectPosition.split(" ").map((e,t)=>{let a=parseFloat(e);return e.endsWith("%")?(t?r-u:n-h)*a/100:a});o=this._scanRegion.width||t,c=this._scanRegion.height||a,l=this._scanRegion.x||0;var g=this._scanRegion.y||0;(d=this.$overlay.style).width="".concat(o/t*h,"px"),d.height="".concat(c/a*u,"px"),d.top="".concat(s+m+g/a*u,"px"),a=/scaleX\(-1\)/.test(e.style.transform),d.left="".concat(i+(a?n-p-h:p)+(a?t-l-o:l)/t*h,"px"),d.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let a=t.x||0,n=t.y||0,r=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;for(let i of(t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1,e))i.x=i.x*r+a,i.y=i.y*t+n;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(a=>setTimeout(a,t-e)),this._lastScanTimestamp=Date.now();try{var a=await T.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(e){if(!this._active)return;this._onDecodeError(e)}!T._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=T.createQrEngine()),a?(this._onDecode?this._onDecode(a):this._legacyOnDecode&&this._legacyOnDecode(a.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox","".concat(this._scanRegion.x||0," ")+"".concat(this._scanRegion.y||0," ")+"".concat(this._scanRegion.width||this.$video.videoWidth," ")+"".concat(this._scanRegion.height||this.$video.videoHeight)),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",a.cornerPoints.map(e=>{let{x:t,y:a}=e;return"".concat(t,",").concat(a)}).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==T.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}];for(let a of[...t.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}})),...t])try{let e=await navigator.mediaDevices.getUserMedia({video:a,audio:!1}),t=this._getFacingMode(e)||(a.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment");return{stream:e,facingMode:t}}catch(e){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a=a||document.createElement("canvas");let r=t&&t.x?t.x:0,i=t&&t.y?t.y:0,s=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return n||(n=t&&t.downScaledWidth?t.downScaledWidth:s,t=t&&t.downScaledHeight?t.downScaledHeight:o,a.width!==n&&(a.width=n),a.height!==t&&(a.height=t)),(t=a.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,r,i,s,o,0,0,a.width,a.height),[a,t]}static async _loadImage(e){if(e instanceof Image)return await T._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await T._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((t,a)=>{let n=r=>{e.removeEventListener("load",n),e.removeEventListener("error",n),r instanceof ErrorEvent?a("Image load error"):t()};e.addEventListener("load",n),e.addEventListener("error",n)})}static async _postWorkerMessage(e,t,a,n){return T._postWorkerMessageSync(await e,t,a,n)}static _postWorkerMessageSync(e,t,a,n){if(!(e instanceof Worker))return -1;let r=T._workerMessageId++;return e.postMessage({id:r,type:t,data:a},n),r}constructor(e,t,a,n,r){this._legacyCanvasSize=T.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),a&&"object"==typeof a?this._onDecode=t:(a||n||r?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t="object"==typeof a?a:{},this._onDecodeError=t.onDecodeError||("function"==typeof a?a:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||("function"==typeof n?n:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||r||this._preferredCamera,this._legacyCanvasSize="number"==typeof a?a:"number"==typeof n?n:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let i=!1;if(e.hidden&&(e.hidden=!1,i=!0),document.body.contains(e)||(document.body.appendChild(e),i=!0),a=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(n=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),(r=this.$overlay.style).position="absolute",r.display="none",r.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!n&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(e){}a.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let t=window.getComputedStyle(e);"none"===t.display&&(e.style.setProperty("display","block","important"),i=!0),"visible"!==t.visibility&&(e.style.setProperty("visibility","visible","important"),i=!0),i&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=T.createQrEngine()}}function R(e){let t=e.length;for(;--t>=0;)e[t]=0}T.DEFAULT_CANVAS_SIZE=400,T.NO_QR_CODE_FOUND="No QR code found",T._disableBarcodeDetector=!1,T._workerMessageId=0;let P=573,z=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),M=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=Array(576);R(O);let B=Array(60);R(B);let L=Array(512);R(L);let U=Array(256);R(U);let F=Array(29);R(F);let H=Array(30);function $(e,t,a,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}function Z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}R(H);let q=e=>e<256?L[e]:L[256+(e>>>7)],W=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},V=(e,t,a)=>{e.bi_valid>16-a?(e.bi_buf|=t<<e.bi_valid&65535,W(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=a-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=a)},K=(e,t,a)=>{V(e,a[2*t],a[2*t+1])},Q=(e,t)=>{let a=0;do a|=1&e,e>>>=1,a<<=1;while(--t>0)return a>>>1},Y=(e,t,a)=>{let n,r,i=Array(16),s=0;for(n=1;n<=15;n++)s=s+a[n-1]<<1,i[n]=s;for(r=0;r<=t;r++){let t=e[2*r+1];0!==t&&(e[2*r]=Q(i[t]++,t))}},J=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},G=e=>{e.bi_valid>8?W(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},X=(e,t,a,n)=>{let r=2*t,i=2*a;return e[r]<e[i]||e[r]===e[i]&&n[t]<=n[a]},ee=(e,t,a)=>{let n=e.heap[a],r=a<<1;for(;r<=e.heap_len&&(r<e.heap_len&&X(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!X(t,n,e.heap[r],e.depth));)e.heap[a]=e.heap[r],a=r,r<<=1;e.heap[a]=n},et=(e,t,a)=>{let n,r,i,s,o=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+o++])+((255&e.pending_buf[e.sym_buf+o++])<<8),r=e.pending_buf[e.sym_buf+o++],0===n?K(e,r,t):(K(e,(i=U[r])+256+1,t),0!==(s=z[i])&&V(e,r-=F[i],s),K(e,i=q(--n),a),0!==(s=M[i])&&V(e,n-=H[i],s));while(o<e.sym_next)K(e,256,t)},ea=(e,t)=>{let a,n,r,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,d=-1;for(a=0,e.heap_len=0,e.heap_max=P;a<l;a++)0!==i[2*a]?(e.heap[++e.heap_len]=d=a,e.depth[a]=0):i[2*a+1]=0;for(;e.heap_len<2;)i[2*(r=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[r]=0,e.opt_len--,o&&(e.static_len-=s[2*r+1]);for(t.max_code=d,a=e.heap_len>>1;a>=1;a--)ee(e,i,a);r=l;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ee(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=n,i[2*r]=i[2*a]+i[2*n],e.depth[r]=(e.depth[a]>=e.depth[n]?e.depth[a]:e.depth[n])+1,i[2*a+1]=i[2*n+1]=r,e.heap[1]=r++,ee(e,i,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let a,n,r,i,s,o,l=t.dyn_tree,d=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,a=e.heap_max+1;a<P;a++)(i=l[2*l[2*(n=e.heap[a])+1]+1]+1)>m&&(i=m,g++),l[2*n+1]=i,!(n>d)&&(e.bl_count[i]++,s=0,n>=p&&(s=u[n-p]),o=l[2*n],e.opt_len+=o*(i+s),h&&(e.static_len+=o*(c[2*n+1]+s)));if(0!==g){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,g-=2}while(g>0)for(i=m;0!==i;i--)for(n=e.bl_count[i];0!==n;)!((r=e.heap[--a])>d)&&(l[2*r+1]!==i&&(e.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),n--)}})(e,t),Y(i,d,e.bl_count)},en=(e,t,a)=>{let n,r,i=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),t[(a+1)*2+1]=65535,n=0;n<=a;n++)r=s,s=t[(n+1)*2+1],++o<l&&r===s||(o<d?e.bl_tree[2*r]+=o:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4))},er=(e,t,a)=>{let n,r,i=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),n=0;n<=a;n++)if(r=s,s=t[(n+1)*2+1],!(++o<l)||r!==s){if(o<d)do K(e,r,e.bl_tree);while(0!=--o)else 0!==r?(r!==i&&(K(e,r,e.bl_tree),o--),K(e,16,e.bl_tree),V(e,o-3,2)):o<=10?(K(e,17,e.bl_tree),V(e,o-3,3)):(K(e,18,e.bl_tree),V(e,o-11,7));o=0,i=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4)}},ei=!1,es=(e,t,a,n)=>{V(e,0+ +!!n,3),G(e),W(e,a),W(e,~a),a&&e.pending_buf.set(e.window.subarray(t,t+a),e.pending),e.pending+=a};var eo={_tr_init:e=>{ei||((()=>{let e,r,i,s,o,l=Array(16);for(s=0,i=0;s<28;s++)for(e=0,F[s]=i;e<1<<z[s];e++)U[i++]=s;for(U[i-1]=s,o=0,s=0;s<16;s++)for(e=0,H[s]=o;e<1<<M[s];e++)L[o++]=s;for(o>>=7;s<30;s++)for(e=0,H[s]=o<<7;e<1<<M[s]-7;e++)L[256+o++]=s;for(r=0;r<=15;r++)l[r]=0;for(e=0;e<=143;)O[2*e+1]=8,e++,l[8]++;for(;e<=255;)O[2*e+1]=9,e++,l[9]++;for(;e<=279;)O[2*e+1]=7,e++,l[7]++;for(;e<=287;)O[2*e+1]=8,e++,l[8]++;for(Y(O,287,l),e=0;e<30;e++)B[2*e+1]=5,B[2*e]=Q(e,5);t=new $(O,z,257,286,15),a=new $(B,M,0,30,15),n=new $([],D,0,19,7)})(),ei=!0),e.l_desc=new Z(e.dyn_ltree,t),e.d_desc=new Z(e.dyn_dtree,a),e.bl_desc=new Z(e.bl_tree,n),e.bi_buf=0,e.bi_valid=0,J(e)},_tr_stored_block:es,_tr_flush_block:(e,t,a,n)=>{let r,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,a=0xf3ffc07f;for(t=0;t<=31;t++,a>>>=1)if(1&a&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),ea(e,e.l_desc),ea(e,e.d_desc),s=(e=>{let t;for(en(e,e.dyn_ltree,e.l_desc.max_code),en(e,e.dyn_dtree,e.d_desc.max_code),ea(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*I[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=r&&(r=i)):r=i=a+5,a+4<=r&&-1!==t?es(e,t,a,n):4===e.strategy||i===r?(V(e,2+ +!!n,3),et(e,O,B)):(V(e,4+ +!!n,3),((e,t,a,n)=>{let r;for(V(e,t-257,5),V(e,a-1,5),V(e,n-4,4),r=0;r<n;r++)V(e,e.bl_tree[2*I[r]+1],3);er(e,e.dyn_ltree,t-1),er(e,e.dyn_dtree,a-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),et(e,e.dyn_ltree,e.dyn_dtree)),J(e),n&&G(e)},_tr_tally:(e,t,a)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=a,0===t?e.dyn_ltree[2*a]++:(e.matches++,t--,e.dyn_ltree[(U[a]+256+1)*2]++,e.dyn_dtree[2*q(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{V(e,2,3),K(e,256,O),(e=>{16===e.bi_valid?(W(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},el=(e,t,a,n)=>{let r=65535&e,i=e>>>16&65535,s=0;for(;0!==a;){s=a>2e3?2e3:a,a-=s;do i=i+(r=r+t[n++]|0)|0;while(--s)r%=65521,i%=65521}return r|i<<16};let ed=new Uint32Array((()=>{let e,t=[];for(var a=0;a<256;a++){e=a;for(var n=0;n<8;n++)e=1&e?0xedb88320^e>>>1:e>>>1;t[a]=e}return t})());var ec=(e,t,a,n)=>{let r=n+a;e^=-1;for(let a=n;a<r;a++)e=e>>>8^ed[(e^t[a])&255];return -1^e},eh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:ep,_tr_stored_block:em,_tr_flush_block:eg,_tr_tally:ef,_tr_align:e_}=eo,{Z_NO_FLUSH:ev,Z_PARTIAL_FLUSH:ey,Z_FULL_FLUSH:eb,Z_FINISH:ew,Z_BLOCK:ex,Z_OK:ek,Z_STREAM_END:eS,Z_STREAM_ERROR:ej,Z_DATA_ERROR:eC,Z_BUF_ERROR:eE,Z_DEFAULT_COMPRESSION:eN,Z_FILTERED:eA,Z_HUFFMAN_ONLY:eT,Z_RLE:eR,Z_FIXED:eP,Z_DEFAULT_STRATEGY:ez,Z_UNKNOWN:eM,Z_DEFLATED:eD}=eu,eI=573,eO=(e,t)=>(e.msg=eh[t],t),eB=e=>2*e-9*(e>4),eL=e=>{let t=e.length;for(;--t>=0;)e[t]=0},eU=e=>{let t,a,n,r=e.w_size;n=t=e.hash_size;do a=e.head[--n],e.head[n]=a>=r?a-r:0;while(--t)n=t=r;do a=e.prev[--n],e.prev[n]=a>=r?a-r:0;while(--t)},eF=(e,t,a)=>(t<<e.hash_shift^a)&e.hash_mask,eH=e=>{let t=e.state,a=t.pending;a>e.avail_out&&(a=e.avail_out),0!==a&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+a),e.next_out),e.next_out+=a,t.pending_out+=a,e.total_out+=a,e.avail_out-=a,t.pending-=a,0===t.pending&&(t.pending_out=0))},e$=(e,t)=>{eg(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,eH(e.strm)},eZ=(e,t)=>{e.pending_buf[e.pending++]=t},eq=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eW=(e,t,a,n)=>{let r=e.avail_in;return(r>n&&(r=n),0===r)?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),a),1===e.state.wrap?e.adler=el(e.adler,t,r,a):2===e.state.wrap&&(e.adler=ec(e.adler,t,r,a)),e.next_in+=r,e.total_in+=r,r)},eV=(e,t)=>{let a,n,r=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,d=e.window,c=e.w_mask,h=e.prev,u=e.strstart+258,p=d[i+s-1],m=d[i+s];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(d[(a=t)+s]!==m||d[a+s-1]!==p||d[a]!==d[i]||d[++a]!==d[i+1])continue;i+=2,a++;do;while(d[++i]===d[++a]&&d[++i]===d[++a]&&d[++i]===d[++a]&&d[++i]===d[++a]&&d[++i]===d[++a]&&d[++i]===d[++a]&&d[++i]===d[++a]&&d[++i]===d[++a]&&i<u)if(n=258-(u-i),i=u-258,n>s){if(e.match_start=t,s=n,n>=o)break;p=d[i+s-1],m=d[i+s]}}while((t=h[t&c])>l&&0!=--r)return s<=e.lookahead?s:e.lookahead},eK=e=>{let t,a,n,r=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-262)&&(e.window.set(e.window.subarray(r,r+r-a),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),eU(e),a+=r),0===e.strm.avail_in)break;if(t=eW(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=eF(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=eF(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eQ=(e,t)=>{let a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,r,i,s=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==ew||t===ev||n!==r+e.strm.avail_in)))break;s=+(t===ew&&n===r+e.strm.avail_in),em(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,eH(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(eW(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s)return((o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s)?4:t!==ev&&t!==ew&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(eW(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,a=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=a||(r||t===ew)&&t!==ev&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=+(t===ew&&0===e.strm.avail_in&&n===r),em(e,e.block_start,n,s),e.block_start+=n,eH(e.strm)),s?3:1)},eY=(e,t)=>{let a,n;for(;;){if(e.lookahead<262){if(eK(e),e.lookahead<262&&t===ev)return 1;if(0===e.lookahead)break}if(a=0,e.lookahead>=3&&(e.ins_h=eF(e,e.ins_h,e.window[e.strstart+3-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==a&&e.strstart-a<=e.w_size-262&&(e.match_length=eV(e,a)),e.match_length>=3)if(n=ef(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=eF(e,e.ins_h,e.window[e.strstart+3-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eF(e,e.ins_h,e.window[e.strstart+1]);else n=ef(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(e$(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===ew)?(e$(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(e$(e,!1),0===e.strm.avail_out)?1:2},eJ=(e,t)=>{let a,n,r;for(;;){if(e.lookahead<262){if(eK(e),e.lookahead<262&&t===ev)return 1;if(0===e.lookahead)break}if(a=0,e.lookahead>=3&&(e.ins_h=eF(e,e.ins_h,e.window[e.strstart+3-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==a&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-262&&(e.match_length=eV(e,a),e.match_length<=5&&(e.strategy===eA||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=ef(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=eF(e,e.ins_h,e.window[e.strstart+3-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,n&&(e$(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=ef(e,0,e.window[e.strstart-1]))&&e$(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=ef(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ew)?(e$(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(e$(e,!1),0===e.strm.avail_out)?1:2};function eG(e,t,a,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=a,this.max_chain=n,this.func=r}let eX=[new eG(0,0,0,0,eQ),new eG(4,4,8,4,eY),new eG(4,5,16,8,eY),new eG(4,6,32,32,eY),new eG(4,4,16,16,eJ),new eG(8,16,32,32,eJ),new eG(8,16,128,128,eJ),new eG(8,32,128,256,eJ),new eG(32,128,258,1024,eJ),new eG(32,258,258,4096,eJ)];function e0(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eD,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eI),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),eL(this.dyn_ltree),eL(this.dyn_dtree),eL(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),eL(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),eL(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let e1=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1};var e2={deflateInit2:(e,t,a,n,r,i)=>{if(!e)return ej;let s=1;if(t===eN&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==eD||n<8||n>15||t<0||t>9||i<0||i>eP||8===n&&1!==s)return eO(e,ej);8===n&&(n=9);let o=new e0;return e.state=o,o.strm=e,o.status=42,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=i,o.method=a,(e=>{let t=(e=>{if(e1(e))return eO(e,ej);e.total_in=e.total_out=0,e.data_type=eM;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,ep(t),ek})(e);return t===ek&&(e=>{e.window_size=2*e.w_size,eL(e.head),e.max_lazy_match=eX[e.level].max_lazy,e.good_match=eX[e.level].good_length,e.nice_match=eX[e.level].nice_length,e.max_chain_length=eX[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t})(e)},deflateSetHeader:(e,t)=>e1(e)||2!==e.state.wrap?ej:(e.state.gzhead=t,ek),deflate:(e,t)=>{if(e1(e)||t>ex||t<0)return e?eO(e,ej):ej;let a=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===a.status&&t!==ew)return eO(e,0===e.avail_out?eE:ej);let n=a.last_flush;if(a.last_flush=t,0!==a.pending){if(eH(e),0===e.avail_out)return a.last_flush=-1,ek}else if(0===e.avail_in&&eB(t)<=eB(n)&&t!==ew)return eO(e,eE);if(666===a.status&&0!==e.avail_in)return eO(e,eE);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let t=eD+(a.w_bits-8<<4)<<8;if(t|=(a.strategy>=eT||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(t|=32),eq(a,t+=31-t%31),0!==a.strstart&&(eq(a,e.adler>>>16),eq(a,65535&e.adler)),e.adler=1,a.status=113,eH(e),0!==a.pending)return a.last_flush=-1,ek}if(57===a.status){if(e.adler=0,eZ(a,31),eZ(a,139),eZ(a,8),a.gzhead)eZ(a,+!!a.gzhead.text+2*!!a.gzhead.hcrc+4*!!a.gzhead.extra+8*!!a.gzhead.name+16*!!a.gzhead.comment),eZ(a,255&a.gzhead.time),eZ(a,a.gzhead.time>>8&255),eZ(a,a.gzhead.time>>16&255),eZ(a,a.gzhead.time>>24&255),eZ(a,9===a.level?2:4*(a.strategy>=eT||a.level<2)),eZ(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(eZ(a,255&a.gzhead.extra.length),eZ(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=ec(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(eZ(a,0),eZ(a,0),eZ(a,0),eZ(a,0),eZ(a,0),eZ(a,9===a.level?2:4*(a.strategy>=eT||a.level<2)),eZ(a,3),a.status=113,eH(e),0!==a.pending)return a.last_flush=-1,ek}if(69===a.status){if(a.gzhead.extra){let t=a.pending,n=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+n>a.pending_buf_size;){let r=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+r),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>t&&(e.adler=ec(e.adler,a.pending_buf,a.pending-t,t)),a.gzindex+=r,eH(e),0!==a.pending)return a.last_flush=-1,ek;t=0,n-=r}let r=new Uint8Array(a.gzhead.extra);a.pending_buf.set(r.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending+=n,a.gzhead.hcrc&&a.pending>t&&(e.adler=ec(e.adler,a.pending_buf,a.pending-t,t)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let t,n=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>n&&(e.adler=ec(e.adler,a.pending_buf,a.pending-n,n)),eH(e),0!==a.pending)return a.last_flush=-1,ek;n=0}t=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,eZ(a,t)}while(0!==t)a.gzhead.hcrc&&a.pending>n&&(e.adler=ec(e.adler,a.pending_buf,a.pending-n,n)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let t,n=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>n&&(e.adler=ec(e.adler,a.pending_buf,a.pending-n,n)),eH(e),0!==a.pending)return a.last_flush=-1,ek;n=0}t=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,eZ(a,t)}while(0!==t)a.gzhead.hcrc&&a.pending>n&&(e.adler=ec(e.adler,a.pending_buf,a.pending-n,n))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(eH(e),0!==a.pending))return a.last_flush=-1,ek;eZ(a,255&e.adler),eZ(a,e.adler>>8&255),e.adler=0}if(a.status=113,eH(e),0!==a.pending)return a.last_flush=-1,ek}if(0!==e.avail_in||0!==a.lookahead||t!==ev&&666!==a.status){let n=0===a.level?eQ(a,t):a.strategy===eT?((e,t)=>{let a;for(;;){if(0===e.lookahead&&(eK(e),0===e.lookahead)){if(t===ev)return 1;break}if(e.match_length=0,a=ef(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,a&&(e$(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ew)?(e$(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(e$(e,!1),0===e.strm.avail_out)?1:2})(a,t):a.strategy===eR?((e,t)=>{let a,n,r,i,s=e.window;for(;;){if(e.lookahead<=258){if(eK(e),e.lookahead<=258&&t===ev)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[r=e.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=e.strstart+258;do;while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i)e.match_length=258-(i-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(a=ef(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(a=ef(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),a&&(e$(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ew)?(e$(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(e$(e,!1),0===e.strm.avail_out)?1:2})(a,t):eX[a.level].func(a,t);if((3===n||4===n)&&(a.status=666),1===n||3===n)return 0===e.avail_out&&(a.last_flush=-1),ek;if(2===n&&(t===ey?e_(a):t!==ex&&(em(a,0,0,!1),t===eb&&(eL(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),eH(e),0===e.avail_out))return a.last_flush=-1,ek}return t!==ew?ek:a.wrap<=0?eS:(2===a.wrap?(eZ(a,255&e.adler),eZ(a,e.adler>>8&255),eZ(a,e.adler>>16&255),eZ(a,e.adler>>24&255),eZ(a,255&e.total_in),eZ(a,e.total_in>>8&255),eZ(a,e.total_in>>16&255),eZ(a,e.total_in>>24&255)):(eq(a,e.adler>>>16),eq(a,65535&e.adler)),eH(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?ek:eS)},deflateEnd:e=>{if(e1(e))return ej;let t=e.state.status;return e.state=null,113===t?eO(e,eC):ek},deflateSetDictionary:(e,t)=>{let a=t.length;if(e1(e))return ej;let n=e.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return ej;if(1===r&&(e.adler=el(e.adler,t,a,0)),n.wrap=0,a>=n.w_size){0===r&&(eL(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(a-n.w_size,a),0),t=e,a=n.w_size}let i=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=a,e.next_in=0,e.input=t,eK(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do n.ins_h=eF(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++;while(--t)n.strstart=e,n.lookahead=2,eK(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=o,e.avail_in=i,n.wrap=r,ek}};let e5=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var e6={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let a=t.shift();if(a){if("object"!=typeof a)throw TypeError(a+"must be non-object");for(let t in a)e5(a,t)&&(e[t]=a[t])}}return e},flattenChunks:e=>{let t=0;for(let a=0,n=e.length;a<n;a++)t+=e[a].length;let a=new Uint8Array(t);for(let t=0,n=0,r=e.length;t<r;t++){let r=e[t];a.set(r,n),n+=r.length}return a}};let e3=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){e3=!1}let e8=new Uint8Array(256);for(let e=0;e<256;e++)e8[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;e8[254]=e8[254]=1;var e4={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,a,n,r,i,s=e.length,o=0;for(r=0;r<s;r++)(64512&(a=e.charCodeAt(r)))==55296&&r+1<s&&(64512&(n=e.charCodeAt(r+1)))==56320&&(a=65536+(a-55296<<10)+(n-56320),r++),o+=a<128?1:a<2048?2:a<65536?3:4;for(i=0,t=new Uint8Array(o),r=0;i<o;r++)(64512&(a=e.charCodeAt(r)))==55296&&r+1<s&&(64512&(n=e.charCodeAt(r+1)))==56320&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?t[i++]=a:(a<2048?t[i++]=192|a>>>6:(a<65536?t[i++]=224|a>>>12:(t[i++]=240|a>>>18,t[i++]=128|a>>>12&63),t[i++]=128|a>>>6&63),t[i++]=128|63&a);return t},buf2string:(e,t)=>{let a,n,r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i=Array(2*r);for(n=0,a=0;a<r;){let t=e[a++];if(t<128){i[n++]=t;continue}let s=e8[t];if(s>4){i[n++]=65533,a+=s-1;continue}for(t&=2===s?31:3===s?15:7;s>1&&a<r;)t=t<<6|63&e[a++],s--;if(s>1){i[n++]=65533;continue}t<65536?i[n++]=t:(t-=65536,i[n++]=55296|t>>10&1023,i[n++]=56320|1023&t)}return((e,t)=>{if(t<65534&&e.subarray&&e3)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let a="";for(let n=0;n<t;n++)a+=String.fromCharCode(e[n]);return a})(i,n)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let a=t-1;for(;a>=0&&(192&e[a])==128;)a--;return a<0||0===a?t:a+e8[e[a]]>t?a:t}},e9=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let e7=Object.prototype.toString,{Z_NO_FLUSH:te,Z_SYNC_FLUSH:tt,Z_FULL_FLUSH:ta,Z_FINISH:tn,Z_OK:tr,Z_STREAM_END:ti,Z_DEFAULT_COMPRESSION:ts,Z_DEFAULT_STRATEGY:to,Z_DEFLATED:tl}=eu;function td(e){this.options=e6.assign({level:ts,method:tl,chunkSize:16384,windowBits:15,memLevel:8,strategy:to},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e9,this.strm.avail_out=0;let a=e2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(a!==tr)throw Error(eh[a]);if(t.header&&e2.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?e4.string2buf(t.dictionary):"[object ArrayBuffer]"===e7.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(a=e2.deflateSetDictionary(this.strm,e))!==tr)throw Error(eh[a]);this._dict_set=!0}}function tc(e,t){let a=new td(t);if(a.push(e,!0),a.err)throw a.msg||eh[a.err];return a.result}td.prototype.push=function(e,t){let a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?tn:te,"string"==typeof e?r.input=e4.string2buf(e):"[object ArrayBuffer]"===e7.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===tt||n===ta)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if((a=e2.deflate(r,n))===ti)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=e2.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===tr;if(0===r.avail_out){this.onData(r.output);continue}if(n>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(0===r.avail_in)break}return!0},td.prototype.onData=function(e){this.chunks.push(e)},td.prototype.onEnd=function(e){e===tr&&(this.result=e6.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var th=function(e,t){let a,n,r,i,s,o,l,d,c,h,u,p,m,g,f,_,v,y,b,w,x,k,S,j,C=e.state;a=e.next_in,S=e.input,n=a+(e.avail_in-5),r=e.next_out,j=e.output,i=r-(t-e.avail_out),s=r+(e.avail_out-257),o=C.dmax,l=C.wsize,d=C.whave,c=C.wnext,h=C.window,u=C.hold,p=C.bits,m=C.lencode,g=C.distcode,f=(1<<C.lenbits)-1,_=(1<<C.distbits)-1;e:do for(p<15&&(u+=S[a++]<<p,p+=8,u+=S[a++]<<p,p+=8),v=m[u&f];;){if(u>>>=y=v>>>24,p-=y,0==(y=v>>>16&255))j[r++]=65535&v;else if(16&y)for(b=65535&v,(y&=15)&&(p<y&&(u+=S[a++]<<p,p+=8),b+=u&(1<<y)-1,u>>>=y,p-=y),p<15&&(u+=S[a++]<<p,p+=8,u+=S[a++]<<p,p+=8),v=g[u&_];;){if(u>>>=y=v>>>24,p-=y,16&(y=v>>>16&255)){if(w=65535&v,p<(y&=15)&&(u+=S[a++]<<p,(p+=8)<y&&(u+=S[a++]<<p,p+=8)),(w+=u&(1<<y)-1)>o){e.msg="invalid distance too far back",C.mode=16209;break e}if(u>>>=y,p-=y,w>(y=r-i)){if((y=w-y)>d&&C.sane){e.msg="invalid distance too far back",C.mode=16209;break e}if(x=0,k=h,0===c){if(x+=l-y,y<b){b-=y;do j[r++]=h[x++];while(--y)x=r-w,k=j}}else if(c<y){if(x+=l+c-y,(y-=c)<b){b-=y;do j[r++]=h[x++];while(--y)if(x=0,c<b){b-=y=c;do j[r++]=h[x++];while(--y)x=r-w,k=j}}}else if(x+=c-y,y<b){b-=y;do j[r++]=h[x++];while(--y)x=r-w,k=j}for(;b>2;)j[r++]=k[x++],j[r++]=k[x++],j[r++]=k[x++],b-=3;b&&(j[r++]=k[x++],b>1&&(j[r++]=k[x++]))}else{x=r-w;do j[r++]=j[x++],j[r++]=j[x++],j[r++]=j[x++],b-=3;while(b>2)b&&(j[r++]=j[x++],b>1&&(j[r++]=j[x++]))}}else if((64&y)==0){v=g[(65535&v)+(u&(1<<y)-1)];continue}else{e.msg="invalid distance code",C.mode=16209;break e}break}else if((64&y)==0){v=m[(65535&v)+(u&(1<<y)-1)];continue}else if(32&y){C.mode=16191;break e}else{e.msg="invalid literal/length code",C.mode=16209;break e}break}while(a<n&&r<s)a-=b=p>>3,p-=b<<3,u&=(1<<p)-1,e.next_in=a,e.next_out=r,e.avail_in=a<n?5+(n-a):5-(a-n),e.avail_out=r<s?257+(s-r):257-(r-s),C.hold=u,C.bits=p};let tu=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tp=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tm=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tg=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tf=(e,t,a,n,r,i,s,o)=>{let l,d,c,h,u,p,m,g,f,_=o.bits,v=0,y=0,b=0,w=0,x=0,k=0,S=0,j=0,C=0,E=0,N=null,A=new Uint16Array(16),T=new Uint16Array(16),R=null;for(v=0;v<=15;v++)A[v]=0;for(y=0;y<n;y++)A[t[a+y]]++;for(w=15,x=_;w>=1&&0===A[w];w--);if(x>w&&(x=w),0===w)return r[i++]=0x1400000,r[i++]=0x1400000,o.bits=1,0;for(b=1;b<w&&0===A[b];b++);for(x<b&&(x=b),j=1,v=1;v<=15;v++)if(j<<=1,(j-=A[v])<0)return -1;if(j>0&&(0===e||1!==w))return -1;for(v=1,T[1]=0;v<15;v++)T[v+1]=T[v]+A[v];for(y=0;y<n;y++)0!==t[a+y]&&(s[T[t[a+y]]++]=y);if(0===e?(N=R=s,p=20):1===e?(N=tu,R=tp,p=257):(N=tm,R=tg,p=0),E=0,y=0,v=b,u=i,k=x,S=0,c=-1,h=(C=1<<x)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){m=v-S,s[y]+1<p?(g=0,f=s[y]):s[y]>=p?(g=R[s[y]-p],f=N[s[y]-p]):(g=96,f=0),l=1<<v-S,b=d=1<<k;do r[u+(E>>S)+(d-=l)]=m<<24|g<<16|f;while(0!==d)for(l=1<<v-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,y++,0==--A[v]){if(v===w)break;v=t[a+s[y]]}if(v>x&&(E&h)!==c){for(0===S&&(S=x),u+=b,j=1<<(k=v-S);k+S<w&&!((j-=A[k+S])<=0);)k++,j<<=1;if(C+=1<<k,1===e&&C>852||2===e&&C>592)return 1;r[c=E&h]=x<<24|k<<16|u-i}}return 0!==E&&(r[u+E]=v-S<<24|4194304),o.bits=x,0};let{Z_FINISH:t_,Z_BLOCK:tv,Z_TREES:ty,Z_OK:tb,Z_STREAM_END:tw,Z_NEED_DICT:tx,Z_STREAM_ERROR:tk,Z_DATA_ERROR:tS,Z_MEM_ERROR:tj,Z_BUF_ERROR:tC,Z_DEFLATED:tE}=eu,tN=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function tA(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let tT=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},tR=e=>{if(tT(e))return tk;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(tT(e))return tk;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tb})(e)},tP=!0,tz=e=>{if(tP){r=new Int32Array(512),i=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tf(1,e.lens,0,288,r,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tf(2,e.lens,0,32,i,0,e.work,{bits:5}),tP=!1}e.lencode=r,e.lenbits=9,e.distcode=i,e.distbits=5},tM=(e,t,a,n)=>{let r,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(a-i.wsize,a),0),i.wnext=0,i.whave=i.wsize):((r=i.wsize-i.wnext)>n&&(r=n),i.window.set(t.subarray(a-n,a-n+r),i.wnext),(n-=r)?(i.window.set(t.subarray(a-n,a),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0};var tD={inflateReset:tR,inflateInit2:(e,t)=>{if(!e)return tk;let a=new tA;e.state=a,a.strm=e,a.window=null,a.mode=16180;let n=((e,t)=>{let a;if(tT(e))return tk;let n=e.state;return(t<0?(a=0,t=-t):(a=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?tk:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=a,n.wbits=t,tR(e))})(e,t);return n!==tb&&(e.state=null),n},inflate:(e,t)=>{let a,n,r,i,s,o,l,d,c,h,u,p,m,g,f,_,v,y,b,w,x,k,S,j,C=0,E=new Uint8Array(4),N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tT(e)||!e.output||!e.input&&0!==e.avail_in)return tk;16191===(a=e.state).mode&&(a.mode=16192),s=e.next_out,r=e.output,l=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,d=a.hold,c=a.bits,h=o,u=l,k=tb;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;c<16;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(2&a.wrap&&35615===d){0===a.wbits&&(a.wbits=15),a.check=0,E[0]=255&d,E[1]=d>>>8&255,a.check=ec(a.check,E,2,0),d=0,c=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=16209;break}if((15&d)!==tE){e.msg="unknown compression method",a.mode=16209;break}if(d>>>=4,c-=4,x=(15&d)+8,0===a.wbits&&(a.wbits=x),x>15||x>a.wbits){e.msg="invalid window size",a.mode=16209;break}a.dmax=1<<a.wbits,a.flags=0,e.adler=a.check=1,a.mode=512&d?16189:16191,d=0,c=0;break;case 16181:for(;c<16;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(a.flags=d,(255&a.flags)!==tE){e.msg="unknown compression method",a.mode=16209;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=16209;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&4&a.wrap&&(E[0]=255&d,E[1]=d>>>8&255,a.check=ec(a.check,E,2,0)),d=0,c=0,a.mode=16182;case 16182:for(;c<32;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}a.head&&(a.head.time=d),512&a.flags&&4&a.wrap&&(E[0]=255&d,E[1]=d>>>8&255,E[2]=d>>>16&255,E[3]=d>>>24&255,a.check=ec(a.check,E,4,0)),d=0,c=0,a.mode=16183;case 16183:for(;c<16;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&4&a.wrap&&(E[0]=255&d,E[1]=d>>>8&255,a.check=ec(a.check,E,2,0)),d=0,c=0,a.mode=16184;case 16184:if(1024&a.flags){for(;c<16;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&4&a.wrap&&(E[0]=255&d,E[1]=d>>>8&255,a.check=ec(a.check,E,2,0)),d=0,c=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&((p=a.length)>o&&(p=o),p&&(a.head&&(x=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(n.subarray(i,i+p),x)),512&a.flags&&4&a.wrap&&(a.check=ec(a.check,n,p,i)),o-=p,i+=p,a.length-=p),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;p=0;do x=n[i+p++],a.head&&x&&a.length<65536&&(a.head.name+=String.fromCharCode(x));while(x&&p<o)if(512&a.flags&&4&a.wrap&&(a.check=ec(a.check,n,p,i)),o-=p,i+=p,x)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;p=0;do x=n[i+p++],a.head&&x&&a.length<65536&&(a.head.comment+=String.fromCharCode(x));while(x&&p<o)if(512&a.flags&&4&a.wrap&&(a.check=ec(a.check,n,p,i)),o-=p,i+=p,x)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;c<16;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(4&a.wrap&&d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=16209;break}d=0,c=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=16191;break;case 16189:for(;c<32;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}e.adler=a.check=tN(d),d=0,c=0,a.mode=16190;case 16190:if(0===a.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,a.hold=d,a.bits=c,tx;e.adler=a.check=1,a.mode=16191;case 16191:if(t===tv||t===ty)break t;case 16192:if(a.last){d>>>=7&c,c-=7&c,a.mode=16206;break}for(;c<3;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}switch(a.last=1&d,c-=1,3&(d>>>=1)){case 0:a.mode=16193;break;case 1:if(tz(a),a.mode=16199,t===ty){d>>>=2,c-=2;break t}break;case 2:a.mode=16196;break;case 3:e.msg="invalid block type",a.mode=16209}d>>>=2,c-=2;break;case 16193:for(d>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=16209;break}if(a.length=65535&d,d=0,c=0,a.mode=16194,t===ty)break t;case 16194:a.mode=16195;case 16195:if(p=a.length){if(p>o&&(p=o),p>l&&(p=l),0===p)break t;r.set(n.subarray(i,i+p),s),o-=p,i+=p,l-=p,s+=p,a.length-=p;break}a.mode=16191;break;case 16196:for(;c<14;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(a.nlen=(31&d)+257,c-=5,a.ndist=(31&(d>>>=5))+1,c-=5,a.ncode=(15&(d>>>=5))+4,d>>>=4,c-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=16209;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;c<3;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}a.lens[N[a.have++]]=7&d,d>>>=3,c-=3}for(;a.have<19;)a.lens[N[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},k=tf(0,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,k){e.msg="invalid code lengths set",a.mode=16209;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;f=(C=a.lencode[d&(1<<a.lenbits)-1])>>>24,_=C>>>16&255,v=65535&C,!(f<=c);){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(v<16)d>>>=f,c-=f,a.lens[a.have++]=v;else{if(16===v){for(j=f+2;c<j;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(d>>>=f,c-=f,0===a.have){e.msg="invalid bit length repeat",a.mode=16209;break}x=a.lens[a.have-1],p=3+(3&d),d>>>=2,c-=2}else if(17===v){for(j=f+3;c<j;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}d>>>=f,c-=f,x=0,p=3+(7&d),d>>>=3,c-=3}else{for(j=f+7;c<j;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}d>>>=f,c-=f,x=0,p=11+(127&d),d>>>=7,c-=7}if(a.have+p>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=16209;break}for(;p--;)a.lens[a.have++]=x}}if(16209===a.mode)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=16209;break}if(a.lenbits=9,S={bits:a.lenbits},k=tf(1,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,k){e.msg="invalid literal/lengths set",a.mode=16209;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},k=tf(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,k){e.msg="invalid distances set",a.mode=16209;break}if(a.mode=16199,t===ty)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,a.hold=d,a.bits=c,th(e,u),s=e.next_out,r=e.output,l=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,d=a.hold,c=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;f=(C=a.lencode[d&(1<<a.lenbits)-1])>>>24,_=C>>>16&255,v=65535&C,!(f<=c);){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(_&&(240&_)==0){for(y=f,b=_,w=v;f=(C=a.lencode[w+((d&(1<<y+b)-1)>>y)])>>>24,_=C>>>16&255,v=65535&C,!(y+f<=c);){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}d>>>=y,c-=y,a.back+=y}if(d>>>=f,c-=f,a.back+=f,a.length=v,0===_){a.mode=16205;break}if(32&_){a.back=-1,a.mode=16191;break}if(64&_){e.msg="invalid literal/length code",a.mode=16209;break}a.extra=15&_,a.mode=16201;case 16201:if(a.extra){for(j=a.extra;c<j;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,c-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;f=(C=a.distcode[d&(1<<a.distbits)-1])>>>24,_=C>>>16&255,v=65535&C,!(f<=c);){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if((240&_)==0){for(y=f,b=_,w=v;f=(C=a.distcode[w+((d&(1<<y+b)-1)>>y)])>>>24,_=C>>>16&255,v=65535&C,!(y+f<=c);){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}d>>>=y,c-=y,a.back+=y}if(d>>>=f,c-=f,a.back+=f,64&_){e.msg="invalid distance code",a.mode=16209;break}a.offset=v,a.extra=15&_,a.mode=16203;case 16203:if(a.extra){for(j=a.extra;c<j;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,c-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=16209;break}a.mode=16204;case 16204:if(0===l)break t;if(p=u-l,a.offset>p){if((p=a.offset-p)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=16209;break}p>a.wnext?(p-=a.wnext,m=a.wsize-p):m=a.wnext-p,p>a.length&&(p=a.length),g=a.window}else g=r,m=s-a.offset,p=a.length;p>l&&(p=l),l-=p,a.length-=p;do r[s++]=g[m++];while(--p)0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;r[s++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;c<32;){if(0===o)break t;o--,d|=n[i++]<<c,c+=8}if(u-=l,e.total_out+=u,a.total+=u,4&a.wrap&&u&&(e.adler=a.check=a.flags?ec(a.check,r,u,s-u):el(a.check,r,u,s-u)),u=l,4&a.wrap&&(a.flags?d:tN(d))!==a.check){e.msg="incorrect data check",a.mode=16209;break}d=0,c=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;c<32;){if(0===o)break t;o--,d+=n[i++]<<c,c+=8}if(4&a.wrap&&d!==(0|a.total)){e.msg="incorrect length check",a.mode=16209;break}d=0,c=0}a.mode=16208;case 16208:k=tw;break t;case 16209:k=tS;break t;case 16210:return tj;default:return tk}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,a.hold=d,a.bits=c,(a.wsize||u!==e.avail_out&&a.mode<16209&&(a.mode<16206||t!==t_))&&tM(e,e.output,e.next_out,u-e.avail_out),h-=e.avail_in,u-=e.avail_out,e.total_in+=h,e.total_out+=u,a.total+=u,4&a.wrap&&u&&(e.adler=a.check=a.flags?ec(a.check,r,u,e.next_out-u):el(a.check,r,u,e.next_out-u)),e.data_type=a.bits+64*!!a.last+128*(16191===a.mode)+256*(16199===a.mode||16194===a.mode),(0===h&&0===u||t===t_)&&k===tb&&(k=tC),k},inflateEnd:e=>{if(tT(e))return tk;let t=e.state;return t.window&&(t.window=null),e.state=null,tb},inflateGetHeader:(e,t)=>{if(tT(e))return tk;let a=e.state;return(2&a.wrap)==0?tk:(a.head=t,t.done=!1,tb)},inflateSetDictionary:(e,t)=>{let a,n=t.length;return tT(e)||0!==(a=e.state).wrap&&16190!==a.mode?tk:16190===a.mode&&el(1,t,n,0)!==a.check?tS:tM(e,t,n,n)?(a.mode=16210,tj):(a.havedict=1,tb)}},tI=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tO=Object.prototype.toString,{Z_NO_FLUSH:tB,Z_FINISH:tL,Z_OK:tU,Z_STREAM_END:tF,Z_NEED_DICT:tH,Z_STREAM_ERROR:t$,Z_DATA_ERROR:tZ,Z_MEM_ERROR:tq}=eu;function tW(e){this.options=e6.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e9,this.strm.avail_out=0;let a=tD.inflateInit2(this.strm,t.windowBits);if(a!==tU||(this.header=new tI,tD.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=e4.string2buf(t.dictionary):"[object ArrayBuffer]"===tO.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(a=tD.inflateSetDictionary(this.strm,t.dictionary))!==tU))throw Error(eh[a])}function tV(e,t){let a=new tW(t);if(a.push(e),a.err)throw a.msg||eh[a.err];return a.result}tW.prototype.push=function(e,t){let a,n,r,i=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?tL:tB,"[object ArrayBuffer]"===tO.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(a=tD.inflate(i,n))===tH&&o&&((a=tD.inflateSetDictionary(i,o))===tU?a=tD.inflate(i,n):a===tZ&&(a=tH));i.avail_in>0&&a===tF&&i.state.wrap>0&&0!==e[i.next_in];)tD.inflateReset(i),a=tD.inflate(i,n);switch(a){case t$:case tZ:case tH:case tq:return this.onEnd(a),this.ended=!0,!1}if(r=i.avail_out,i.next_out&&(0===i.avail_out||a===tF))if("string"===this.options.to){let e=e4.utf8border(i.output,i.next_out),t=i.next_out-e,a=e4.buf2string(i.output,e);i.next_out=t,i.avail_out=s-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(a)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(a!==tU||0!==r){if(a===tF)return a=tD.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},tW.prototype.onData=function(e){this.chunks.push(e)},tW.prototype.onEnd=function(e){e===tU&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=e6.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:tK,deflate:tQ,deflateRaw:tY,gzip:tJ}={Deflate:td,deflate:tc,deflateRaw:function(e,t){return(t=t||{}).raw=!0,tc(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,tc(e,t)},constants:eu},{Inflate:tG,inflate:tX,inflateRaw:t0,ungzip:t1}={Inflate:tW,inflate:tV,inflateRaw:function(e,t){return(t=t||{}).raw=!0,tV(e,t)},ungzip:tV,constants:eu};var t2={deflate:tQ,inflate:tX};function t5(e){let{open:t,onClose:a}=e,{state:n,dispatch:r}=(0,k.useChoresApp)(),[i,l]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[h,u]=(0,o.useState)(!1),[p,m]=(0,o.useState)(!1),[g,f]=(0,o.useState)(""),_=(0,o.useRef)(null),v=(0,o.useRef)(null);if(o.default.useEffect(()=>(p&&_.current?(v.current=new T(_.current,e=>{c(e.data),m(!1),v.current&&v.current.stop()},{highlightScanRegion:!0,highlightCodeOutline:!0}),v.current.start()):v.current&&(v.current.stop(),v.current=null),()=>{v.current&&v.current.stop()}),[p]),!t)return null;let y=async()=>{try{let e={children:n.children,chores:n.chores,choreTemplates:n.choreTemplates,parentSettings:{pins:n.parentSettings.pins||[],approvals:n.parentSettings.approvals},completedTasks:n.completedTasks,oneOffTasks:n.oneOffTasks},t=JSON.stringify(e),a=t2.deflate(t),r=String.fromCharCode(...a),i=btoa(r);try{let e=await A.default.toDataURL(i,{width:256,margin:2,errorCorrectionLevel:"L"});l(e)}catch(e){console.warn("Compressed data still too large for QR code, showing text instead"),l("TEXT:".concat(i))}}catch(e){console.error("QR Code generation error:",e),f("Failed to generate configuration data.")}};return(0,s.jsx)("div",{className:"modal",style:{display:"block"},children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:"ðŸ“± Sync Data"}),(0,s.jsx)("span",{className:"close",onClick:a,children:"Ã—"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[g&&(0,s.jsxs)("div",{className:"error-message",style:{marginBottom:"20px"},children:[g,(0,s.jsx)("button",{style:{float:"right",background:"none",border:"none",cursor:"pointer"},onClick:()=>f(""),children:"Ã—"})]}),(0,s.jsxs)("div",{className:"sync-section",children:[(0,s.jsx)("h3",{children:"Share Configuration"}),(0,s.jsx)("p",{children:"Generate configuration data to share with other devices:"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:y,children:"Generate Config Data"}),i&&(0,s.jsx)("div",{className:"qr-container",children:i.startsWith("TEXT:")?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"10px"},children:"Configuration data (too large for QR code):"}),(0,s.jsx)("textarea",{readOnly:!0,value:i.substring(5),style:{width:"100%",height:"100px",fontFamily:"monospace",fontSize:"12px"}}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>navigator.clipboard.writeText(i.substring(5)),style:{marginTop:"10px"},children:"Copy to Clipboard"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:i,alt:"QR Code for configuration data",style:{maxWidth:"100%",height:"auto",border:"1px solid #e2e8f0"}}),(0,s.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"10px"},children:"Scan this QR code with another device to import the configuration"})]})})]}),(0,s.jsxs)("div",{className:"sync-section",children:[(0,s.jsx)("h3",{children:"Import Configuration"}),(0,s.jsxs)("div",{className:"import-options",children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>m(!p),children:p?"Stop":"ðŸ“· Scan QR Code"}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>u(!h),children:h?"Hide":"âœï¸ Manual Entry"})]}),p&&(0,s.jsxs)("div",{className:"qr-scanner",style:{marginTop:"15px"},children:[(0,s.jsx)("video",{ref:_,style:{width:"100%",maxWidth:"400px",height:"auto"}}),(0,s.jsx)("p",{style:{textAlign:"center",marginTop:"10px"},children:"Position QR code within the camera view"})]}),h&&(0,s.jsxs)("div",{style:{marginTop:"15px"},children:[(0,s.jsx)("p",{children:"Paste configuration data from another device:"}),(0,s.jsx)("textarea",{placeholder:"Paste configuration data here...",value:d,onChange:e=>c(e.target.value),style:{width:"100%",height:"120px",fontFamily:"monospace"}}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!d.trim())return void f("Please paste configuration data");try{let e;try{let t=atob(d),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);let n=t2.inflate(a),r=String.fromCharCode(...n);e=JSON.parse(r)}catch(t){try{let t=decodeURIComponent(atob(d));e=JSON.parse(t)}catch(t){e=JSON.parse(d)}}if(!e.children)throw Error("Invalid configuration format");let t={children:e.children||[],chores:e.chores||[],choreTemplates:e.choreTemplates||[],parentSettings:e.parentSettings||n.parentSettings,completedTasks:e.completedTasks||{},oneOffTasks:e.oneOffTasks||{}};r({type:"SET_STATE",payload:t}),c(""),f(""),alert("Configuration imported successfully!"),a()}catch(e){console.error("Import error:",e),f("Error importing configuration. Please check the data format.")}},children:"Import Data"})]})]})]}),(0,s.jsx)("div",{className:"modal-footer",children:(0,s.jsx)("button",{className:"btn btn-secondary",onClick:a,children:"Close"})})]})})}function t6(e){let{open:t,onClose:a,child:n,onSave:r,onDelete:i}=e,{state:l}=(0,k.useChoresApp)(),[d,c]=(0,o.useState)(""),[h,u]=(0,o.useState)(""),[p,m]=(0,o.useState)(!1),[g,f]=(0,o.useState)(null);return(o.default.useEffect(()=>{n&&(c(n.name),u(n.blockchainAddress||""))},[n]),t&&n)?(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h2",{children:"Edit Child"}),(0,s.jsxs)("form",{onSubmit:e=>{var t,a;e.preventDefault();let i={...n,name:d,blockchainAddress:h||void 0},s=!!(null==(a=l.parentSettings)||null==(t=a.approvals)?void 0:t.editTasks),o=(l.parentSettings.pins||[]).length>0;if(s)return o?(f(i),void m(!0)):void alert("Editing requires parent approval, but no approvers are defined. Please add an approver in Settings first.");r(i)},children:[(0,s.jsxs)("label",{children:["Name:",(0,s.jsx)("input",{value:d,onChange:e=>c(e.target.value),required:!0})]}),(0,s.jsxs)("label",{children:["Blockchain Address / ENS:",(0,s.jsx)("input",{value:h,onChange:e=>u(e.target.value),placeholder:"0x or ENS name"})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{type:"submit",children:"Save"}),(0,s.jsx)("button",{type:"button",onClick:a,children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>i(n.id),children:"Delete"})]})]}),(0,s.jsx)(E.default,{open:p,onClose:()=>{m(!1),f(null)},onSuccess:()=>{g&&(r(g),f(null)),m(!1),a()}})]})}):null}function t3(e){let{open:t,onClose:a,onAdd:n}=e,[r,i]=(0,o.useState)("");return t?(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h2",{children:"Add Child"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n({name:r}),i(""),a()},children:[(0,s.jsxs)("label",{children:["Name:",(0,s.jsx)("input",{value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{type:"submit",children:"Add"}),(0,s.jsx)("button",{type:"button",onClick:a,children:"Cancel"})]})]})]})}):null}function t8(e){let{open:t,onClose:a,onAdd:n}=e,[r,i]=(0,o.useState)(""),[l,d]=(0,o.useState)(""),[c,h]=(0,o.useState)("#cccccc"),[u,p]=(0,o.useState)(1),[m,g]=(0,o.useState)(0),[f,_]=(0,o.useState)(!1),[v,y]=(0,o.useState)(5),[b,w]=(0,o.useState)(50),[x,k]=(0,o.useState)(!1);return t?(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h2",{children:"Add Chore"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n({name:r,emoji:l,color:c,starReward:u,moneyReward:m,timed:f,allowedSeconds:Math.round(60*v),latePenaltyPercent:b/100,autoApproveOnStop:x}),i(""),d(""),h("#cccccc"),p(1),g(0),a()},children:[(0,s.jsxs)("label",{children:["Name:",(0,s.jsx)("input",{value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,s.jsxs)("label",{children:["Emoji:",(0,s.jsx)("input",{value:l,onChange:e=>d(e.target.value),maxLength:2,required:!0})]}),(0,s.jsxs)("label",{children:["Color:",(0,s.jsx)("input",{type:"color",value:c,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("label",{children:["Star Reward:",(0,s.jsx)("input",{type:"number",value:u,min:0,onChange:e=>p(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Money Reward:",(0,s.jsx)("input",{type:"number",value:m,min:0,step:.01,onChange:e=>g(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Timed Task:",(0,s.jsx)("input",{type:"checkbox",checked:f,onChange:e=>_(e.target.checked)})]}),f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{children:["Allowed Minutes:",(0,s.jsx)("input",{type:"number",value:v,min:1,onChange:e=>y(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Late Penalty (% of reward when late):",(0,s.jsx)("input",{type:"number",value:b,min:-200,max:200,onChange:e=>w(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Auto-approve on Stop:",(0,s.jsx)("input",{type:"checkbox",checked:x,onChange:e=>k(e.target.checked)})]})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{type:"submit",children:"Add"}),(0,s.jsx)("button",{type:"button",onClick:a,children:"Cancel"})]})]})]})}):null}function t4(e){let{open:t,onClose:a,initialTask:n=null,onSave:r}=e,{dispatch:i}=(0,k.useChoresApp)(),[l,d]=(0,o.useState)(""),[c,h]=(0,o.useState)(""),[u,p]=(0,o.useState)("#cccccc"),[m,g]=(0,o.useState)("recurring"),[f,_]=(0,o.useState)(1),[v,y]=(0,o.useState)(0),[b,w]=(0,o.useState)(!1),[x,S]=(0,o.useState)(null),[j,C]=(0,o.useState)(5),[E,N]=(0,o.useState)(50),[A,T]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{if(n){if(S(String(n.id)),d(n.title||n.name||""),h(n.emoji||""),p(n.color||"#cccccc"),g(n.type||"recurring"),_("number"==typeof n.stars?n.stars:1),y("number"==typeof n.money?n.money:0),w("boolean"==typeof n.requirePin&&n.requirePin),"timed"===n.type&&n.timed){var e;let t=n.timed;C(Math.round((t.allowedSeconds||60)/60)),N((null!=(e=t.latePenaltyPercent)?e:0)*100),T(!!t.autoApproveOnStop)}}else S(null),d(""),h(""),p("#cccccc"),g("recurring"),_(1),y(0),w(!1),C(5),N(50),T(!1)},[n,t]),t)?(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h2",{children:x?"Edit Task":"Create Task"}),(0,s.jsxs)("form",{onSubmit:e=>{let t;e.preventDefault();let n={id:null!=x?x:"task_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8)),title:l,description:"",createdAt:new Date().toISOString(),enabled:!0,requirePin:b,stars:Number(f),money:Number(v)};t="timed"===m?{...n,type:"timed",timed:{allowedSeconds:Math.round(60*j),latePenaltyPercent:E/100,autoApproveOnStop:A,allowNegative:!1}}:"oneoff"===m?{...n,type:"oneoff",oneOff:{dueDate:new Date().toISOString()},completed:!1}:{...n,type:"recurring",recurring:{cadence:"daily"}},x?(i({type:"UPDATE_TASK",payload:t}),r&&r(t)):i({type:"ADD_TASK",payload:t}),a()},children:[(0,s.jsxs)("label",{children:["Title:",(0,s.jsx)("input",{value:l,onChange:e=>d(e.target.value),required:!0})]}),(0,s.jsxs)("label",{children:["Emoji:",(0,s.jsx)("input",{value:c,onChange:e=>h(e.target.value),maxLength:2})]}),(0,s.jsxs)("label",{children:["Color:",(0,s.jsx)("input",{type:"color",value:u,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("label",{children:["Type:",(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),children:[(0,s.jsx)("option",{value:"recurring",children:"Recurring"}),(0,s.jsx)("option",{value:"oneoff",children:"One-off"}),(0,s.jsx)("option",{value:"timed",children:"Timed"})]})]}),(0,s.jsxs)("label",{children:["Star Reward:",(0,s.jsx)("input",{type:"number",value:f,min:-10,onChange:e=>_(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Money Reward:",(0,s.jsx)("input",{type:"number",value:v,step:"0.01",onChange:e=>y(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Require PIN:",(0,s.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked)})]}),"timed"===m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{children:["Allowed Minutes:",(0,s.jsx)("input",{type:"number",value:j,min:1,onChange:e=>C(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Late Penalty (%):",(0,s.jsx)("input",{type:"number",value:E,onChange:e=>N(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Auto-approve on Stop:",(0,s.jsx)("input",{type:"checkbox",checked:A,onChange:e=>T(e.target.checked)})]})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{type:"submit",children:x?"Save":"Create"}),(0,s.jsx)("button",{type:"button",onClick:a,children:"Cancel"})]})]})]})}):null}function t9(e){let{open:t,onClose:a,chore:n,onSave:r,onDelete:i}=e,[l,d]=(0,o.useState)(""),[c,h]=(0,o.useState)(""),[u,p]=(0,o.useState)("#cccccc"),[m,g]=(0,o.useState)(1),[f,_]=(0,o.useState)(0),[v,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(5),[x,k]=(0,o.useState)(50),[S,j]=(0,o.useState)(!1);return(o.default.useEffect(()=>{n&&(d(n.name),h(n.emoji),p(n.color),g(n.starReward),_(n.moneyReward),y(!!n.timed),w(n.allowedSeconds?Math.round(n.allowedSeconds/60):5),k(n.latePenaltyPercent?Math.round(100*n.latePenaltyPercent):50),j(!!n.autoApproveOnStop))},[n]),t&&n)?(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("h2",{children:"Edit Chore"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r({...n,name:l,emoji:c,color:u,starReward:m,moneyReward:f,timed:v,allowedSeconds:Math.round(60*b),latePenaltyPercent:x/100,autoApproveOnStop:S})},children:[(0,s.jsxs)("label",{children:["Name:",(0,s.jsx)("input",{value:l,onChange:e=>d(e.target.value),required:!0})]}),(0,s.jsxs)("label",{children:["Emoji:",(0,s.jsx)("input",{value:c,onChange:e=>h(e.target.value),maxLength:2,required:!0})]}),(0,s.jsxs)("label",{children:["Color:",(0,s.jsx)("input",{type:"color",value:u,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("label",{children:["Star Reward:",(0,s.jsx)("input",{type:"number",value:m,min:0,onChange:e=>g(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Money Reward:",(0,s.jsx)("input",{type:"number",value:f,min:0,step:.01,onChange:e=>_(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Timed Task:",(0,s.jsx)("input",{type:"checkbox",checked:v,onChange:e=>y(e.target.checked)})]}),v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{children:["Allowed Minutes:",(0,s.jsx)("input",{type:"number",value:b,min:1,onChange:e=>w(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Late Penalty (% of reward when late):",(0,s.jsx)("input",{type:"number",value:x,min:-200,max:200,onChange:e=>k(Number(e.target.value))})]}),(0,s.jsxs)("label",{children:["Auto-approve on Stop:",(0,s.jsx)("input",{type:"checkbox",checked:S,onChange:e=>j(e.target.checked)})]})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{type:"submit",children:"Save"}),(0,s.jsx)("button",{type:"button",onClick:a,children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>i(n.id),children:"Delete"})]})]})]})}):null}let{chains:t7,publicClient:ae}=(0,d.configureChains)([c.mainnet,u,v],[function(e){return e.rpcUrls.public.http[0]?{chain:e,rpcUrls:e.rpcUrls.public}:null}]),at=(0,l.createConfig)({autoConnect:!0,connectors:[new y.InjectedConnector({chains:t7})],publicClient:ae});function aa(e){let{children:t}=e,[a,n]=(0,o.useState)(!1),[r,i]=(0,o.useState)(!1),[d,c]=(0,o.useState)(null),[h,u]=(0,o.useState)(!1),[p,m]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[_,v]=(0,o.useState)(!1),[y,w]=(0,o.useState)(null),[A,T]=(0,o.useState)(!1),[R,P]=(0,o.useState)(null),[z,M]=(0,o.useState)(!1),[D,I]=(0,o.useState)(!1),[O,B]=(0,o.useState)(!1),[L,U]=(0,o.useState)(!1),[F,H]=(0,o.useState)(null),[$,Z]=(0,o.useState)(!1),[q,W]=(0,o.useState)(null),{state:V,dispatch:K}=(0,k.useChoresApp)(),Q=()=>M(!0);return(0,s.jsx)(l.WagmiConfig,{config:at,children:(0,s.jsx)(b.ModalControlContext.Provider,{value:{openTaskEditModal:e=>{let t="number"==typeof e?e:Number(e);c(Number.isNaN(t)?null:t);let a=Number.isNaN(t)?null:V.chores.find(e=>e.id===t)||null;if(a){var n,r;H({id:"chore_".concat(a.id),title:a.name,description:"",createdAt:new Date().toISOString(),enabled:!0,requirePin:!1,stars:a.starReward,money:a.moneyReward,type:a.timed?"timed":"recurring",...a.timed?{timed:{allowedSeconds:a.allowedSeconds||60,latePenaltyPercent:null!=(n=a.latePenaltyPercent)?n:.5,autoApproveOnStop:null!=(r=a.autoApproveOnStop)&&r,allowNegative:!1}}:{recurring:{cadence:a.recurrence||"daily"}}}),U(!0)}else i(!0)},openAddTaskModal:e=>{w(e),u(!0)},openEditChildModal:e=>{P(e),T(!0)},openAddChildModal:Q,openAddChoreModal:()=>I(!0),openEditChoreModal:e=>{W(e),Z(!0)},openOneOffTaskModal:e=>{w(e),f(!0)}},children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)(x,{onSettingsClick:()=>n(!0),onSyncClick:()=>v(!0)}),(0,s.jsx)(S,{open:a,onClose:()=>n(!1)}),(0,s.jsx)(j,{open:r,onClose:()=>i(!1),task:V.chores.find(e=>e.id===d)||null,onSave:e=>{K({type:"SET_STATE",payload:{...V,chores:V.chores.map(t=>t.id===e.id?{...t,...e}:t)}}),i(!1)}}),(0,s.jsx)(C,{open:h,onClose:()=>u(!1),onAdd:e=>{K({type:"SET_STATE",payload:{...V,chores:[...V.chores,{id:V.chores.length>0?Math.max(...V.chores.map(e=>e.id))+1:1,name:e.name,emoji:e.emoji,color:e.color,recurrence:"daily",customDays:[],eligibleChildren:null!==y?[y]:[],starReward:e.starReward,moneyReward:e.moneyReward}]}})}}),(0,s.jsx)(t8,{open:D,onClose:()=>I(!1),onAdd:e=>{K({type:"SET_STATE",payload:{...V,chores:[...V.chores,{id:V.chores.length>0?Math.max(...V.chores.map(e=>e.id))+1:1,name:e.name,emoji:e.emoji,color:e.color,recurrence:"daily",customDays:[],eligibleChildren:[],starReward:e.starReward,moneyReward:e.moneyReward,timed:e.timed||!1,allowedSeconds:e.allowedSeconds||void 0,latePenaltyPercent:e.latePenaltyPercent||void 0,autoApproveOnStop:e.autoApproveOnStop||!1}]}})}}),(0,s.jsx)(t4,{open:O,onClose:()=>B(!1)}),(0,s.jsx)(t4,{open:L,onClose:()=>{U(!1),H(null)},initialTask:F,onSave:e=>{var t;if(F&&(null==(t=F.id)?void 0:t.startsWith("chore_"))){let t=parseInt(F.id.split("_")[1],10);K({type:"SET_STATE",payload:{...V,chores:V.chores.map(a=>{var n,r,i,s,o;return a.id===t?{...a,name:e.title,starReward:null!=(s=e.stars)?s:a.starReward,moneyReward:null!=(o=e.money)?o:a.moneyReward,timed:"timed"===e.type,allowedSeconds:"timed"===e.type?null==(n=e.timed)?void 0:n.allowedSeconds:a.allowedSeconds,latePenaltyPercent:"timed"===e.type?null==(r=e.timed)?void 0:r.latePenaltyPercent:a.latePenaltyPercent,autoApproveOnStop:"timed"===e.type?null==(i=e.timed)?void 0:i.autoApproveOnStop:a.autoApproveOnStop}:a})}})}U(!1),H(null)}}),(0,s.jsx)(t9,{open:$,onClose:()=>Z(!1),chore:V.chores.find(e=>e.id===q)||null,onSave:e=>{K({type:"SET_STATE",payload:{...V,chores:V.chores.map(t=>t.id===e.id?{...t,...e}:t)}}),Z(!1)},onDelete:e=>{window.confirm("Are you sure you want to delete this chore?")&&(K({type:"SET_STATE",payload:{...V,chores:V.chores.filter(t=>t.id!==e)}}),Z(!1))}}),(0,s.jsx)(t3,{open:z,onClose:()=>M(!1),onAdd:e=>{K({type:"SET_STATE",payload:{...V,children:[...V.children,{id:V.children.length>0?Math.max(...V.children.map(e=>e.id))+1:1,name:e.name,stars:0,money:0}]}})}}),(0,s.jsx)(t6,{open:A,onClose:()=>T(!1),child:V.children.find(e=>e.id===R)||null,onSave:e=>{K({type:"SET_STATE",payload:{...V,children:V.children.map(t=>t.id===e.id?{...t,...e}:t)}}),T(!1)},onDelete:e=>{window.confirm("Are you sure you want to delete this child?")&&(K({type:"SET_STATE",payload:{...V,children:V.children.filter(t=>t.id!==e)}}),T(!1))}}),(0,s.jsx)(E.default,{open:p,onClose:()=>m(!1),onSuccess:()=>m(!1)}),(0,s.jsx)(N,{open:g,onClose:()=>f(!1),childId:y||void 0}),(0,s.jsx)(t5,{open:_,onClose:()=>v(!1)}),t,(0,s.jsxs)("div",{style:{position:"fixed",bottom:10,right:10,zIndex:2e3},children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:Q,style:{marginRight:4},children:"+ Add Child"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>B(!0),children:"+ Add Chore"})]})]})})})}function an(e){let{Component:t,pageProps:a}=e;return(0,s.jsx)(k.ChoresAppProvider,{children:(0,s.jsx)(aa,{children:(0,s.jsx)(t,{...a})})})}},68146,(e,t,a)=>{let n="/_app";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(3115)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);